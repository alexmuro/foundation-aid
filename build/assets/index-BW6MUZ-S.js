const __vite__fileDeps=["assets/InlineImageComponent-DHTJuH60.js","assets/vendor-Czp-dUv8.js","assets/LexicalNestedComposer-CH9a9FYS.js","assets/TableComponent-Ce3lG7uX.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var Hi=Object.defineProperty;var zi=(e,t,s)=>t in e?Hi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var ue=(e,t,s)=>(zi(e,typeof t!="symbol"?t+"":t,s),s);import{R as O,r as h,j as n,g as W,i as Be,L as te,a as ee,b as g,c as de,d as Ce,e as me,f as he,h as ae,k as $e,l as _n,m as Rs,n as Fe,o as ot,p as L,q as Wi,s as qn,t as ft,u as fn,v as gn,w as Ui,x as Vi,y as Os,z as qi,A as Yi,B as Gi,C as Ji,D as en,E as Yn,F as tn,G as Ki,H as Xi,I as Zi,J as Qi,K as eo,M as to,N as no,O as so,P as io,Q as oo,S as ro,T as ao,U as oe,V as bt,W as Le,X as Me,Y as En,Z as lo,_ as De,$ as co,a0 as Yt,a1 as uo,a2 as po,a3 as dt,a4 as je,a5 as ye,a6 as mo,a7 as ho,a8 as fo,a9 as ce,aa as Ds,ab as Tn,ac as Oe,ad as go,ae as Ls,af as xo,ag as bo,ah as yo}from"./vendor-Czp-dUv8.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();const wo="project-manager";let vo="https://graph.availabs.org",No="transportny.org";function Co(){return{landing:{wrapper:"p-4 border-2 border-blue-300"},table:{table:"min-w-full divide-y divide-gray-300",thead:"",th:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900",tbody:"divide-y divide-gray-200 ",td:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},textarea:{viewWrapper:"overflow-hidden p-2 bg-gray-100 border-b-2"},card:{wrapper:"p-4",row:"flex py-1",rowLabel:"px-4 w-28 text-sm",rowContent:"flex-1"}}}const Sn=Co(),jo=O.createContext(Sn),fe=()=>h.useContext(jo),_o=({value:e="",onChange:t,className:s,placeholder:i})=>{var a;const o=fe();return n.jsx("input",{className:s||((a=o==null?void 0:o.text)==null?void 0:a.input)||"w-full border p-2",value:e,placeholder:i,onChange:r=>t(r.target.value)})},Eo=({value:e,className:t})=>{var i;if(!e)return!1;const s=fe();return n.jsx("div",{className:t||((i=s==null?void 0:s.text)==null?void 0:i.view),children:e})},nn={EditComp:_o,ViewComp:Eo},To=({value:e,onChange:t,className:s,placeholder:i})=>{var a;const o=fe();return n.jsx("textarea",{className:s||((a=o==null?void 0:o.textarea)==null?void 0:a.input)||"w-full border p-2",value:e,placeholder:i,onChange:r=>t(r.target.value)})},So=({value:e})=>{const t=fe();return e?n.jsx("div",{className:W(t,"textarea.viewWrapper",""),children:e}):!1},ko={EditComp:To,ViewComp:So},$o=({value:e,onChange:t})=>n.jsxs("select",{value:e,onChange:s=>t(s.target.value),children:[n.jsx("option",{value:!0,children:"True"}),n.jsx("option",{value:!1,children:"False"})]}),Mo=({value:e})=>e?n.jsx("div",{children:e}):!1,Io={EditComp:$o,ViewComp:Mo};function Ao({value:e,onChange:t,attributes:s={}}){console.log("dms-format",e,s);const i=(o,a)=>{Be(e,{...e,[o]:a})||t({...e,[o]:a})};return n.jsx("div",{children:Object.keys(s).map((o,a)=>{let r=s[o].EditComp;return n.jsxs("div",{children:[n.jsx("div",{children:o}),n.jsx("div",{children:n.jsx(r,{value:e==null?void 0:e[o],onChange:l=>i(o,l)},`${o}-${a}`)})]},`${o}-${a}`)})})}const Ro=({value:e={},attributes:t})=>n.jsx("div",{children:Object.keys(t).map((s,i)=>{let o=t[s].ViewComp;return n.jsxs("div",{children:[n.jsx("div",{children:s}),n.jsx("div",{children:n.jsx(o,{value:e[s]},`${s}-${i}`)})]},`${s}-${i}`)})}),Oo={EditComp:Ao,ViewComp:Ro},Do=({Component:e,value:t,onChange:s,attr:i})=>{(!t||!t.map)&&(t=[]);const[o,a]=O.useState(""),r=()=>{s([...t,o]),a("")};return n.jsxs(n.Fragment,{children:[t.map((l,c)=>h.createElement(e.ViewComp,{value:l,...i,key:c})),n.jsx(e.EditComp,{value:o,onChange:a,...i}),n.jsx("button",{onClick:r,children:"Add"})]})},Lo=({Component:e,value:t,attr:s})=>!t||!t.map?"":t.map((i,o)=>h.createElement(e.ViewComp,{...s,key:o,value:i})),Ps={EditComp:Do,ViewComp:Lo},Nt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Po=h.createContext({}),Fo=()=>h.useContext(Po),Bo=h.createContext([e=>()=>e,e=>e]),Fs=()=>{const[e,t]=h.useContext(Bo),[s,i]=h.useState(null);return h.useEffect(()=>e(o=>{i(o)}),[e]),[s,t]},Lt=new WeakMap;function Gn(e){const t=e.changedTouches[0];return t===void 0?null:[t.clientX,t.clientY]}function Ho(e,t){let s=Lt.get(e);if(s===void 0){const i=new Set,o=r=>{s!==void 0&&(s.start=Gn(r))},a=r=>{if(s===void 0)return;const l=s.start;if(l===null)return;const c=Gn(r);for(const d of i)c!==null&&d([c[0]-l[0],c[1]-l[1]],r)};e.addEventListener("touchstart",o),e.addEventListener("touchend",a),s={handleTouchend:a,handleTouchstart:o,listeners:i,start:null},Lt.set(e,s)}return s.listeners.add(t),()=>zo(e,t)}function zo(e,t){const s=Lt.get(e);if(s===void 0)return;const i=s.listeners;i.delete(t),i.size===0&&(Lt.delete(e),e.removeEventListener("touchstart",s.handleTouchstart),e.removeEventListener("touchend",s.handleTouchend))}function Wo(e,t){return Ho(e,(s,i)=>{const[o,a]=s;o>0&&o>Math.abs(a)&&t(o,i)})}const xn=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);function Jn(e){if(!g.$isRangeSelection(e)||!e.isCollapsed())return[!1,""];const t=e.getNodes()[0],s=e.anchor;if(!g.$isTextNode(t)||!t.isSimpleText()||!de.$isAtNodeEnd(s))return[!1,""];const i=[],o=t.getTextContent();let a=t.getTextContentSize(),r;for(;a--&&a>=0&&(r=o[a])!==" ";)i.push(r);return i.length===0?[!1,""]:[!0,i.reverse().join("")]}function Uo(){return h.useCallback(e=>{const t=new qo;console.time("query");const s=t.query(e);return console.timeEnd("query"),s},[])}function Vo(){const[e]=te.useLexicalComposerContext(),[,t]=Fs(),s=Uo();return h.useEffect(()=>{let i=null,o=null,a=null,r=null;function l(){const x=i!==null?g.$getNodeByKey(i):null;x!==null&&x.isAttached()&&(x.remove(),i=null),r!==null&&(r.dismiss(),r=null),o=null,a=null,t(null)}function c(x,y){r!==x||y===null||e.update(()=>{const v=g.$getSelection(),[S,_]=Jn(v);if(!S||_!==o||!g.$isRangeSelection(v))return;const j=v.clone(),N=Bs(xn);i=N.getKey(),v.insertNodes([N]),g.$setSelection(j),a=y,t(y)},{tag:"history-merge"})}function d(x){const y=x.getKey();x.__uuid===xn&&y!==i&&l()}function u(){e.update(()=>{const x=g.$getSelection(),[y,v]=Jn(x);if(!y){l();return}v!==o&&(l(),r=s(v),r.promise.then(S=>{r!==null&&c(r,S)}).catch(S=>{console.error(S)}),o=v)})}function p(){if(a===null||i===null)return!1;const x=g.$getNodeByKey(i);if(x===null)return!1;const y=g.$createTextNode(a);return x.replace(y),y.selectNext(),l(),!0}function m(x){return p()?(x.preventDefault(),!0):!1}function f(x,y){e.update(()=>{p()&&y.preventDefault()})}function b(){e.update(()=>{l()})}const w=e.getRootElement();return ee.mergeRegister(e.registerNodeTransform(ct,d),e.registerUpdateListener(u),e.registerCommand(g.KEY_TAB_COMMAND,m,g.COMMAND_PRIORITY_LOW),e.registerCommand(g.KEY_ARROW_RIGHT_COMMAND,m,g.COMMAND_PRIORITY_LOW),...w!==null?[Wo(w,f)]:[],b)},[e,s,t]),null}class qo{constructor(){this.DATABASE=Yo,this.LATENCY=200,this.query=t=>{let s=!1;const i=()=>{s=!0},o=new Promise((a,r)=>{setTimeout(()=>{if(s)return r("Dismissed");const l=t.length;if(t===""||l<4)return a(null);const c=t.charCodeAt(0),d=c>=65&&c<=90,u=d?String.fromCharCode(c+32)+t.substring(1):t,p=this.DATABASE.find(b=>b.startsWith(u)??null);if(p===void 0)return a(null);const f=(d?String.fromCharCode(p.charCodeAt(0)-32)+p.substring(1):p).substring(l);return a(f===""?null:f)},this.LATENCY)});return{dismiss:i,promise:o}}}}const Yo=["information","available","copyright","university","management","international","development","education","community","technology","following","resources","including","directory","government","department","description","insurance","different","categories","conditions","accessories","september","questions","application","financial","equipment","performance","experience","important","activities","additional","something","professional","committee","washington","california","reference","companies","computers","president","australia","discussion","entertainment","agreement","marketing","association","collection","solutions","electronics","technical","microsoft","conference","environment","statement","downloads","applications","requirements","individual","subscribe","everything","production","commercial","advertising","treatment","newsletter","knowledge","currently","construction","registered","protection","engineering","published","corporate","customers","materials","countries","standards","political","advertise","environmental","availability","employment","commission","administration","institute","sponsored","electronic","condition","effective","organization","selection","corporation","executive","necessary","according","particular","facilities","opportunities","appropriate","statistics","investment","christmas","registration","furniture","wednesday","structure","distribution","industrial","potential","responsible","communications","associated","foundation","documents","communication","independent","operating","developed","telephone","population","navigation","operations","therefore","christian","understand","publications","worldwide","connection","publisher","introduction","properties","accommodation","excellent","opportunity","assessment","especially","interface","operation","restaurants","beautiful","locations","significant","technologies","manufacturer","providing","authority","considered","programme","enterprise","educational","employees","alternative","processing","responsibility","resolution","publication","relations","photography","components","assistance","completed","organizations","otherwise","transportation","disclaimer","membership","recommended","background","character","maintenance","functions","trademarks","phentermine","submitted","television","interested","throughout","established","programming","regarding","instructions","increased","understanding","beginning","associates","instruments","businesses","specified","restaurant","procedures","relationship","traditional","sometimes","themselves","transport","interesting","evaluation","implementation","galleries","references","presented","literature","respective","definition","secretary","networking","australian","magazines","francisco","individuals","guidelines","installation","described","attention","difference","regulations","certificate","directions","documentation","automotive","successful","communities","situation","publishing","emergency","developing","determine","temperature","announcements","historical","ringtones","difficult","scientific","satellite","particularly","functional","monitoring","architecture","recommend","dictionary","accounting","manufacturing","professor","generally","continued","techniques","permission","generation","component","guarantee","processes","interests","paperback","classifieds","supported","competition","providers","characters","thousands","apartments","generated","administrative","practices","reporting","essential","affiliate","immediately","designated","integrated","configuration","comprehensive","universal","presentation","languages","compliance","improvement","pennsylvania","challenge","acceptance","strategies","affiliates","multimedia","certified","computing","interactive","procedure","leadership","religious","breakfast","developer","approximately","recommendations","comparison","automatically","minnesota","adventure","institutions","assistant","advertisement","headlines","yesterday","determined","wholesale","extension","statements","completely","electrical","applicable","manufacturers","classical","dedicated","direction","basketball","wisconsin","personnel","identified","professionals","advantage","newsletters","estimated","anonymous","miscellaneous","integration","interview","framework","installed","massachusetts","associate","frequently","discussions","laboratory","destination","intelligence","specifications","tripadvisor","residential","decisions","industries","partnership","editorial","expression","provisions","principles","suggestions","replacement","strategic","economics","compatible","apartment","netherlands","consulting","recreation","participants","favorites","translation","estimates","protected","philadelphia","officials","contained","legislation","parameters","relationships","tennessee","representative","frequency","introduced","departments","residents","displayed","performed","administrator","addresses","permanent","agriculture","constitutes","portfolio","practical","delivered","collectibles","infrastructure","exclusive","originally","utilities","philosophy","regulation","reduction","nutrition","recording","secondary","wonderful","announced","prevention","mentioned","automatic","healthcare","maintained","increasing","connected","directors","participation","containing","combination","amendment","guaranteed","libraries","distributed","singapore","enterprises","convention","principal","certification","previously","buildings","household","batteries","positions","subscription","contemporary","panasonic","permalink","signature","provision","certainly","newspaper","liability","trademark","trackback","americans","promotion","conversion","reasonable","broadband","influence","importance","webmaster","prescription","specifically","represent","conservation","louisiana","javascript","marketplace","evolution","certificates","objectives","suggested","concerned","structures","encyclopedia","continuing","interracial","competitive","suppliers","preparation","receiving","accordance","discussed","elizabeth","reservations","playstation","instruction","annotation","differences","establish","expressed","paragraph","mathematics","compensation","conducted","percentage","mississippi","requested","connecticut","personals","immediate","agricultural","supporting","collections","participate","specialist","experienced","investigation","institution","searching","proceedings","transmission","characteristics","experiences","extremely","verzeichnis","contracts","concerning","developers","equivalent","chemistry","neighborhood","variables","continues","curriculum","psychology","responses","circumstances","identification","appliances","elementary","unlimited","printable","enforcement","hardcover","celebrity","chocolate","hampshire","bluetooth","controlled","requirement","authorities","representatives","pregnancy","biography","attractions","transactions","authorized","retirement","financing","efficiency","efficient","commitment","specialty","interviews","qualified","discovery","classified","confidence","lifestyle","consistent","clearance","connections","inventory","converter","organisation","objective","indicated","securities","volunteer","democratic","switzerland","parameter","processor","dimensions","contribute","challenges","recognition","submission","encourage","regulatory","inspection","consumers","territory","transaction","manchester","contributions","continuous","resulting","cambridge","initiative","execution","disability","increases","contractor","examination","indicates","committed","extensive","affordable","candidate","databases","outstanding","perspective","messenger","tournament","consideration","discounts","catalogue","publishers","caribbean","reservation","remaining","depending","expansion","purchased","performing","collected","absolutely","featuring","implement","scheduled","calculator","significantly","temporary","sufficient","awareness","vancouver","contribution","measurement","constitution","packaging","consultation","northwest","classroom","democracy","wallpaper","merchandise","resistance","baltimore","candidates","charlotte","biological","transition","preferences","instrument","classification","physician","hollywood","wikipedia","spiritual","photographs","relatively","satisfaction","represents","pittsburgh","preferred","intellectual","comfortable","interaction","listening","effectively","experimental","revolution","consolidation","landscape","dependent","mechanical","consultants","applicant","cooperation","acquisition","implemented","directories","recognized","notification","licensing","textbooks","diversity","cleveland","investments","accessibility","sensitive","templates","completion","universities","technique","contractors","subscriptions","calculate","alexander","broadcast","converted","anniversary","improvements","specification","accessible","accessory","typically","representation","arrangements","conferences","uniprotkb","consumption","birmingham","afternoon","consultant","controller","ownership","committees","legislative","researchers","unsubscribe","molecular","residence","attorneys","operators","sustainable","philippines","statistical","innovation","employers","definitions","elections","stainless","newspapers","hospitals","exception","successfully","indonesia","primarily","capabilities","recommendation","recruitment","organized","improving","expensive","organisations","explained","programmes","expertise","mechanism","jewellery","eventually","agreements","considering","innovative","conclusion","disorders","collaboration","detection","formation","engineers","proposals","moderator","tutorials","settlement","collectables","fantastic","governments","purchasing","appointed","operational","corresponding","descriptions","determination","animation","productions","telecommunications","instructor","approaches","highlights","designers","melbourne","scientists","blackjack","argentina","possibility","commissioner","dangerous","reliability","unfortunately","respectively","volunteers","attachment","appointment","workshops","hurricane","represented","mortgages","responsibilities","carefully","productivity","investors","underground","diagnosis","principle","vacations","calculated","appearance","incorporated","notebooks","algorithm","valentine","involving","investing","christopher","admission","terrorism","parliament","situations","allocated","corrections","structural","municipal","describes","disabilities","substance","prohibited","addressed","simulation","initiatives","concentration","interpretation","bankruptcy","optimization","substances","discovered","restrictions","participating","exhibition","composition","nationwide","definitely","existence","commentary","limousines","developments","immigration","destinations","necessarily","attribute","apparently","surrounding","mountains","popularity","postposted","coordinator","obviously","fundamental","substantial","progressive","championship","sacramento","impossible","depression","testimonials","memorabilia","cartridge","explanation","cincinnati","subsection","electricity","permitted","workplace","confirmed","wallpapers","infection","eligibility","involvement","placement","observations","vbulletin","subsequent","motorcycle","disclosure","establishment","presentations","undergraduate","occupation","donations","associations","citysearch","radiation","seriously","elsewhere","pollution","conservative","guestbook","effectiveness","demonstrate","atmosphere","experiment","purchases","federation","assignment","chemicals","everybody","nashville","counseling","acceptable","satisfied","measurements","milwaukee","medication","warehouse","shareware","violation","configure","stability","southwest","institutional","expectations","independence","metabolism","personally","excellence","somewhere","attributes","recognize","screening","thumbnail","forgotten","intelligent","edinburgh","obligation","regardless","restricted","republican","merchants","attendance","arguments","amsterdam","adventures","announcement","appreciate","regularly","mechanisms","customize","tradition","indicators","emissions","physicians","complaint","experiments","afghanistan","scholarship","governance","supplements","camcorder","implementing","ourselves","conversation","capability","producing","precision","contributed","reproduction","ingredients","franchise","complaints","promotions","rehabilitation","maintaining","environments","reception","correctly","consequences","geography","appearing","integrity","discrimination","processed","implications","functionality","intermediate","emotional","platforms","overnight","geographic","preliminary","districts","introduce","promotional","chevrolet","specialists","generator","suspension","correction","authentication","communicate","supplement","showtimes","promoting","machinery","bandwidth","probability","dimension","schedules","admissions","quarterly","illustrated","continental","alternate","achievement","limitations","automated","passenger","convenient","orientation","childhood","flexibility","jurisdiction","displaying","encouraged","cartridges","declaration","automation","advantages","preparing","recipient","extensions","athletics","southeast","alternatives","determining","personalized","conditioning","partnerships","destruction","increasingly","migration","basically","conventional","applicants","occupational","adjustment","treatments","camcorders","difficulty","collective","coalition","enrollment","producers","collector","interfaces","advertisers","representing","observation","restoration","convenience","returning","opposition","container","defendant","confirmation","supervisor","peripherals","bestsellers","departure","minneapolis","interactions","intervention","attraction","modification","customized","understood","assurance","happening","amendments","metropolitan","compilation","verification","attractive","recordings","jefferson","gardening","obligations","orchestra","polyphonic","outsourcing","adjustable","allocation","discipline","demonstrated","identifying","alphabetical","dispatched","installing","voluntary","photographer","messaging","constructed","additions","requiring","engagement","refinance","calendars","arrangement","conclusions","bibliography","compatibility","furthermore","cooperative","measuring","jacksonville","headquarters","transfers","transformation","attachments","administrators","personality","facilitate","subscriber","priorities","bookstore","parenting","incredible","commonwealth","pharmaceutical","manhattan","workforce","organizational","portuguese","everywhere","discharge","halloween","hazardous","methodology","housewares","reputation","resistant","democrats","recycling","qualifications","slideshow","variation","transferred","photograph","distributor","underlying","wrestling","photoshop","gathering","projection","mathematical","specialized","diagnostic","indianapolis","corporations","criticism","automobile","confidential","statutory","accommodations","northeast","downloaded","paintings","injection","yorkshire","populations","protective","initially","indicator","eliminate","sunglasses","preference","threshold","venezuela","exploration","sequences","astronomy","translate","announces","compression","establishing","constitutional","perfectly","instantly","litigation","submissions","broadcasting","horizontal","terrorist","informational","ecommerce","suffering","prospective","ultimately","artificial","spectacular","coordination","connector","affiliated","activation","naturally","subscribers","mitsubishi","underwear","potentially","constraints","inclusive","dimensional","considerable","selecting","processors","pantyhose","difficulties","complexity","constantly","barcelona","presidential","documentary","territories","palestinian","legislature","hospitality","procurement","theoretical","exercises","surveillance","protocols","highlight","substitute","inclusion","hopefully","brilliant","evaluated","assignments","termination","households","authentic","montgomery","architectural","louisville","macintosh","movements","amenities","virtually","authorization","projector","comparative","psychological","surprised","genealogy","expenditure","liverpool","connectivity","algorithms","similarly","collaborative","excluding","commander","suggestion","spotlight","investigate","connecting","logistics","proportion","significance","symposium","essentials","protecting","transmitted","screenshots","intensive","switching","correspondence","supervision","expenditures","separation","testimony","celebrities","mandatory","boundaries","syndication","celebration","filtering","luxembourg","offensive","deployment","colleagues","separated","directive","governing","retailers","occasionally","attending","recruiting","instructional","traveling","permissions","biotechnology","prescribed","catherine","reproduced","calculation","consolidated","occasions","equations","exceptional","respondents","considerations","queensland","musicians","composite","unavailable","essentially","designing","assessments","brunswick","sensitivity","preservation","streaming","intensity","technological","syndicate","antivirus","addressing","discounted","bangladesh","constitute","concluded","desperate","demonstration","governmental","manufactured","graduation","variations","addiction","springfield","synthesis","undefined","unemployment","enhancement","newcastle","performances","societies","brazilian","identical","petroleum","norwegian","retention","exchanges","soundtrack","wondering","profession","separately","physiology","collecting","participant","scholarships","recreational","dominican","friendship","expanding","provincial","investigations","medications","rochester","advertiser","encryption","downloadable","sophisticated","possession","laboratories","vegetables","thumbnails","stockings","respondent","destroyed","manufacture","wordpress","vulnerability","accountability","celebrate","accredited","appliance","compressed","scheduling","perspectives","mortality","christians","therapeutic","impressive","accordingly","architect","challenging","microwave","accidents","relocation","contributors","violations","temperatures","competitions","discretion","cosmetics","repository","concentrations","christianity","negotiations","realistic","generating","christina","congressional","photographic","modifications","millennium","achieving","fisheries","exceptions","reactions","macromedia","companion","divisions","additionally","fellowship","victorian","copyrights","lithuania","mastercard","chronicles","obtaining","distribute","decorative","enlargement","campaigns","conjunction","instances","indigenous","validation","corruption","incentives","cholesterol","differential","scientist","starsmerchant","arthritis","nevertheless","practitioners","transcript","inflation","compounds","contracting","structured","reasonably","graduates","recommends","controlling","distributors","arlington","particles","extraordinary","indicating","coordinate","exclusively","limitation","widescreen","illustration","construct","inquiries","inspiration","affecting","downloading","aggregate","forecasts","complicated","shopzilla","decorating","expressions","shakespeare","connectors","conflicts","travelers","offerings","incorrect","furnishings","guatemala","perception","renaissance","pathology","ordinance","photographers","infections","configured","festivals","possibilities","contributing","analytical","circulation","assumption","jerusalem","transexuales","invention","technician","executives","enquiries","cognitive","exploring","registrar","supporters","withdrawal","predicted","saskatchewan","cancellation","ministers","veterinary","prostores","relevance","incentive","butterfly","mechanics","numerical","reflection","accompanied","invitation","princeton","spirituality","meanwhile","proprietary","childrens","thumbzilla","porcelain","pichunter","translated","columnists","consensus","delivering","journalism","intention","undertaken","statewide","semiconductor","illustrations","happiness","substantially","identifier","calculations","conducting","accomplished","calculators","impression","correlation","fragrance","neighbors","transparent","charleston","champions","selections","projectors","inappropriate","comparing","vocational","pharmacies","introducing","appreciated","albuquerque","distinguished","projected","assumptions","shareholders","developmental","regulated","anticipated","completing","comparable","confusion","copyrighted","warranties","documented","paperbacks","keyboards","vulnerable","reflected","respiratory","notifications","transexual","mainstream","evaluating","subcommittee","maternity","journalists","foundations","volleyball","liabilities","decreased","tolerance","creativity","describing","lightning","quotations","inspector","bookmarks","behavioral","riverside","bathrooms","abilities","initiated","nonprofit","lancaster","suspended","containers","attitudes","simultaneously","integrate","sociology","screenshot","exhibitions","confident","retrieved","officially","consortium","recipients","delicious","traditions","periodically","hungarian","referring","transform","educators","vegetable","humanities","independently","alignment","henderson","britannica","competitors","visibility","consciousness","encounter","resolutions","accessing","attempted","witnesses","administered","strengthen","frederick","aggressive","advertisements","sublimedirectory","disturbed","determines","sculpture","motivation","pharmacology","passengers","quantities","petersburg","consistently","powerpoint","obituaries","punishment","appreciation","subsequently","providence","restriction","incorporate","backgrounds","treasurer","lightweight","transcription","complications","scripting","remembered","synthetic","testament","specifics","partially","wilderness","generations","tournaments","sponsorship","headphones","proceeding","volkswagen","uncertainty","breakdown","reconstruction","subsidiary","strengths","encouraging","furnished","terrorists","comparisons","beneficial","distributions","viewpicture","threatened","republicans","discusses","responded","abstracts","prediction","pharmaceuticals","thesaurus","individually","battlefield","literally","ecological","appraisal","consisting","submitting","citations","geographical","mozambique","disclaimers","championships","sheffield","finishing","wellington","prospects","bulgarian","aboriginal","remarkable","preventing","productive","boulevard","compliant","penalties","imagination","refurbished","activated","conferencing","armstrong","politicians","trackbacks","accommodate","christine","accepting","precipitation","isolation","sustained","approximate","programmer","greetings","inherited","incomplete","chronicle","legitimate","biographies","investigator","plaintiff","prisoners","mediterranean","nightlife","architects","entrepreneur","freelance","excessive","screensaver","valuation","unexpected","cigarette","characteristic","metallica","consequently","appointments","narrative","academics","quantitative","screensavers","subdivision","distinction","livestock","exemption","sustainability","formatting","nutritional","nicaragua","affiliation","relatives","satisfactory","revolutionary","bracelets","telephony","breathing","thickness","adjustments","graphical","discussing","aerospace","meaningful","maintains","shortcuts","voyeurweb","extending","specifies","accreditation","blackberry","meditation","microphone","macedonia","combining","instrumental","organizing","moderators","kazakhstan","standings","partition","invisible","translations","commodity","kilometers","thanksgiving","guarantees","indication","congratulations","cigarettes","controllers","consultancy","conventions","coordinates","responding","physically","stakeholders","hydrocodone","consecutive","attempting","representations","competing","peninsula","accurately","considers","ministries","vacancies","parliamentary","acknowledge","thoroughly","nottingham","identifies","questionnaire","qualification","modelling","miniature","interstate","consequence","systematic","perceived","madagascar","presenting","troubleshooting","uzbekistan","centuries","magnitude","richardson","fragrances","vocabulary","earthquake","fundraising","geological","assessing","introduces","webmasters","computational","acdbentity","participated","handhelds","answering","impressed","conspiracy","organizer","combinations","preceding","cumulative","amplifier","arbitrary","prominent","lexington","contacted","recorders","occasional","innovations","postcards","reviewing","explicitly","transsexual","citizenship","informative","girlfriend","bloomberg","hierarchy","influenced","abandoned","complement","mauritius","checklist","requesting","lauderdale","scenarios","extraction","elevation","utilization","beverages","calibration","efficiently","entertaining","prerequisite","hypothesis","medicines","regression","enhancements","renewable","intersection","passwords","consistency","collectors","azerbaijan","astrology","occurring","supplemental","travelling","induction","precisely","spreading","provinces","widespread","incidence","incidents","enhancing","interference","palestine","listprice","atmospheric","knowledgestorm","referenced","publicity","proposition","allowance","designation","duplicate","criterion","civilization","vietnamese","tremendous","corrected","encountered","internationally","surrounded","creatures","commented","accomplish","vegetarian","newfoundland","investigated","ambassador","stephanie","contacting","vegetation","findarticles","specially","infectious","continuity","phenomenon","conscious","referrals","differently","integrating","revisions","reasoning","charitable","annotated","convinced","burlington","replacing","researcher","watershed","occupations","acknowledged","equilibrium","characterized","privilege","qualifying","estimation","pediatric","techrepublic","institutes","brochures","traveller","appropriations","suspected","benchmark","beginners","instructors","highlighted","stationery","unauthorized","competent","contributor","demonstrates","gradually","desirable","journalist","afterwards","religions","explosion","signatures","disciplines","daughters","conversations","simplified","motherboard","bibliographic","champagne","deviation","superintendent","housewives","influences","inspections","irrigation","hydraulic","robertson","penetration","conviction","omissions","retrieval","qualities","prototype","importantly","apparatus","explaining","nomination","empirical","dependence","sexuality","polyester","commitments","suggesting","remainder","privileges","televisions","specializing","commodities","motorcycles","concentrate","reproductive","molecules","refrigerator","intervals","sentences","exclusion","workstation","holocaust","receivers","disposition","navigator","investigators","marijuana","cathedral","fairfield","fascinating","landscapes","lafayette","computation","cardiovascular","salvation","predictions","accompanying","selective","arbitration","configuring","editorials","sacrifice","removable","convergence","gibraltar","anthropology","malpractice","reporters","necessity","rendering","hepatitis","nationally","waterproof","specialties","humanitarian","invitations","functioning","economies","alexandria","bacterial","undertake","continuously","achievements","convertible","secretariat","paragraphs","adolescent","nominations","cancelled","introductory","reservoir","occurrence","worcester","demographic","disciplinary","respected","portraits","interpreted","evaluations","elimination","hypothetical","immigrants","complimentary","helicopter","performer","commissions","powerseller","graduated","surprising","unnecessary","dramatically","yugoslavia","characterization","likelihood","fundamentals","contamination","endangered","compromise","expiration","namespace","peripheral","negotiation","opponents","nominated","confidentiality","electoral","changelog","alternatively","greensboro","controversial","recovered","upgrading","frontpage","demanding","defensive","forbidden","programmers","monitored","installations","deutschland","practitioner","motivated","smithsonian","examining","revelation","delegation","dictionaries","greenhouse","transparency","currencies","survivors","positioning","descending","temporarily","frequencies","reflections","municipality","detective","experiencing","fireplace","endorsement","psychiatry","persistent","summaries","looksmart","magnificent","colleague","adaptation","paintball","enclosure","supervisors","westminster","distances","absorption","treasures","transcripts","disappointed","continually","communist","collectible","entrepreneurs","creations","acquisitions","biodiversity","excitement","presently","mysterious","librarian","subsidiaries","stockholm","indonesian","therapist","promising","relaxation","thereafter","commissioners","forwarding","nightmare","reductions","southampton","organisms","telescope","portsmouth","advancement","harassment","generators","generates","replication","inexpensive","receptors","interventions","huntington","internship","aluminium","snowboard","beastality","evanescence","coordinated","shipments","antarctica","chancellor","controversy","legendary","beautifully","antibodies","examinations","immunology","departmental","terminology","gentleman","reproduce","convicted","roommates","threatening","spokesman","activists","frankfurt","encourages","assembled","restructuring","terminals","simulations","sufficiently","conditional","crossword","conceptual","liechtenstein","translator","automobiles","continent","longitude","challenged","telecharger","insertion","instrumentation","constraint","groundwater","strengthening","insulation","infringement","subjective","swaziland","varieties","mediawiki","configurations"];class ct extends g.DecoratorNode{static clone(t){return new ct(t.__key)}static getType(){return"autocomplete"}static importJSON(t){return Bs(t.uuid)}exportJSON(){return{...super.exportJSON(),type:"autocomplete",uuid:this.__uuid,version:1}}constructor(t,s){super(s),this.__uuid=t}updateDOM(){return!1}createDOM(){return document.createElement("span")}decorate(){return this.__uuid!==xn?null:n.jsx(Go,{})}}function Bs(e){return new ct(e)}function Go(){const[e]=Fs(),t=window.navigator.userAgentData,s=t!==void 0?t.mobile:window.innerWidth<=800&&window.innerHeight<=600;return n.jsxs("span",{style:{color:"#ccc"},spellCheck:"false",children:[e," ",s?"(SWIPE ⮕)":"(TAB)"]})}const Jo="modulepreload",Ko=function(e){return"/"+e},Kn={},Hs=function(t,s,i){let o=Promise.resolve();if(s&&s.length>0){const a=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),l=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.all(s.map(c=>{if(c=Ko(c),c in Kn)return;Kn[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(!!i)for(let f=a.length-1;f>=0;f--){const b=a[f];if(b.href===c&&(!d||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Jo,d||(m.as="script",m.crossOrigin=""),m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((f,b)=>{m.addEventListener("load",f),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}return o.then(()=>t()).catch(a=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=a,window.dispatchEvent(r),!r.defaultPrevented)throw a})},Xo=h.lazy(()=>Hs(()=>import("./InlineImageComponent-DHTJuH60.js"),__vite__mapDeps([0,1,2])));function Zo(e){if(e instanceof HTMLImageElement){const{alt:t,src:s,width:i,height:o}=e;return{node:Gt({altText:t,height:o,src:s,width:i})}}return null}class He extends g.DecoratorNode{static getType(){return"image"}static clone(t){return new He(t.__src,t.__altText,t.__position,t.__width,t.__height,t.__showCaption,t.__caption,t.__key)}static importJSON(t){const{altText:s,height:i,width:o,caption:a,src:r,showCaption:l,position:c="full"}=t,d=Gt({altText:s,height:i,position:c,showCaption:l,src:r,width:o}),u=d.__caption,p=u.parseEditorState(a.editorState);return p.isEmpty()||u.setEditorState(p),d}static importDOM(){return{img:t=>({conversion:Zo,priority:0})}}constructor(t,s,i,o,a,r,l,c){super(c),this.__src=t,this.__altText=s,this.__width=o||"inherit",this.__height=a||"inherit",this.__showCaption=r||!1,this.__caption=l||g.createEditor(),this.__position=i}exportDOM(){const t=document.createElement("img");return t.setAttribute("src",this.__src),t.setAttribute("alt",this.__altText),t.setAttribute("width",this.__width.toString()),t.setAttribute("height",this.__height.toString()),{element:t}}exportJSON(){return{altText:this.getAltText(),caption:this.__caption.toJSON(),height:this.__height==="inherit"?0:this.__height,position:this.__position,showCaption:this.__showCaption,src:this.getSrc(),type:"image",version:1,width:this.__width==="inherit"?0:this.__width}}getSrc(){return this.__src}getAltText(){return this.__altText}setAltText(t){const s=this.getWritable();s.__altText=t}setWidthAndHeight(t,s){const i=this.getWritable();i.__width=t,i.__height=s}getShowCaption(){return this.__showCaption}setShowCaption(t){const s=this.getWritable();s.__showCaption=t}getPosition(){return this.__position}setPosition(t){const s=this.getWritable();s.__position=t}update(t){console.log("updating payload",t);const s=this.getWritable(),{altText:i,showCaption:o,position:a}=t;i!==void 0&&(s.__altText=i),o!==void 0&&(s.__showCaption=o),a!==void 0&&(s.__position=a)}createDOM(t){const s=document.createElement("span"),i=`${t.theme.inlineImage} position-${this.__position}`;return i!==void 0&&(s.className=i),s}updateDOM(t,s,i){const o=this.__position;if(o!==t.__position){const a=`${i.theme.inlineImage} position-${o}`;a!==void 0&&(s.className=a)}return!1}decorate(){return n.jsx(h.Suspense,{fallback:null,children:n.jsx(Xo,{src:this.__src,altText:this.__altText,width:this.__width,height:this.__height,nodeKey:this.getKey(),showCaption:this.__showCaption,caption:this.__caption,position:this.__position})})}}function Gt({altText:e,position:t,height:s,src:i,width:o,showCaption:a,caption:r,key:l}){return g.$applyNodeReplacement(new He(i,e,t,o,s,a,r,l))}function zs(e){return e instanceof He}class Ye extends g.TextNode{static getType(){return"keyword"}static clone(t){return new Ye(t.__text,t.__key)}static importJSON(t){const s=Ws(t.text);return s.setFormat(t.format),s.setDetail(t.detail),s.setMode(t.mode),s.setStyle(t.style),s}exportJSON(){return{...super.exportJSON(),type:"keyword",version:1}}createDOM(t){const s=super.createDOM(t);return s.style.cursor="default",s.className="keyword",s}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}isTextEntity(){return!0}}function Ws(e){return new Ye(e)}const Qo=[Ce.HeadingNode,me.ListNode,me.ListItemNode,he.CodeNode,he.CodeHighlightNode,ae.AutoLinkNode,ae.LinkNode,He,ct,Ye];function er({onClose:e,children:t,title:s,closeOnClickOutside:i}){const o=h.useRef(null);return h.useEffect(()=>{o.current!==null&&o.current.focus()},[]),h.useEffect(()=>{let a=null;const r=d=>{d.keyCode===27&&e()},l=d=>{const u=d.target;o.current!==null&&!o.current.contains(u)&&i&&e()},c=o.current;return c!==null&&(a=c.parentElement,a!==null&&a.addEventListener("click",l)),window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r),a!==null&&(a==null||a.removeEventListener("click",l))}},[i,e]),n.jsx("div",{className:"flex justify-center items-center fixed flex-col top-0 bottom-0 left-0 right-0 bg-[rgba(40,_40,_40,_0.6)] flex-grow-[0px] flex-shrink-[1px]",role:"dialog",children:n.jsxs("div",{className:"p-[20px] min-h-[100px] min-w-[300px] flex flex-grow-[0px] bg-[#fff] flex-col relative [box-shadow:0_0_20px_0_#444] rounded-[10px]",tabIndex:-1,ref:o,children:[n.jsx("h2",{className:"text-[#444] m-0 pb-[10px] border-b-[1px_solid_#ccc]",children:s}),n.jsx("button",{className:"border-[0px] absolute right-[20px] rounded-[20px] justify-center items-center flex w-[30px] h-[30px] text-center cursor-pointer bg-[#eee] hover:bg-[#ddd]","aria-label":"Close modal",type:"button",onClick:e,children:"X"}),n.jsx("div",{className:"pt-[20px]",children:t})]})})}function tr({onClose:e,children:t,title:s,closeOnClickOutside:i=!1}){return $e.createPortal(n.jsx(er,{onClose:e,title:s,closeOnClickOutside:i,children:t}),document.body)}function Ct(){const[e,t]=h.useState(null),s=h.useCallback(()=>{t(null)},[]),i=h.useMemo(()=>{if(e===null)return null;const{title:a,content:r,closeOnClickOutside:l}=e;return n.jsx(tr,{onClose:s,title:a,closeOnClickOutside:l,children:r})},[e,s]),o=h.useCallback((a,r,l=!1)=>{t({closeOnClickOutside:l,content:r(s),title:a})},[s]);return[i,o]}function nr(...e){return e.filter(Boolean).join(" ")}function at({"data-test-id":e,children:t,className:s,onClick:i,disabled:o,small:a,title:r}){return n.jsx("button",{disabled:o,className:nr("pt-[10px] pb-[10px] pl-[15px] pr-[15px] border-[0px] bg-[#eee] rounded-[5px] cursor-pointer text-[14px] hover:bg-[#ddd]",o&&"cursor-not-allowed hover:bg-[#eee]",a&&"pt-[5px] pb-[5px] pl-[10px] pr-[10px] text-[13px]",s),onClick:i,title:r,"aria-label":r,...e&&{"data-test-id":e},children:t})}const sr="https://platform.twitter.com/widgets.js";function ir(e){const t=e.getAttribute("data-lexical-tweet-id");return t?{node:kn(t)}:null}let Xn=!0;function or({className:e,format:t,loadingComponent:s,nodeKey:i,onError:o,onLoad:a,tweetID:r}){const l=h.useRef(null),c=h.useRef(""),[d,u]=h.useState(!1),p=h.useCallback(async()=>{try{await window.twttr.widgets.createTweet(r,l.current),u(!1),Xn=!1,a&&a()}catch(m){o&&o(String(m))}},[o,a,r]);return h.useEffect(()=>{var m;if(r!==c.current){if(u(!0),Xn){const f=document.createElement("script");f.src=sr,f.async=!0,(m=document.body)==null||m.appendChild(f),f.onload=p,o&&(f.onerror=o)}else p();c&&(c.current=r)}},[p,o,r]),n.jsxs(Rs.BlockWithAlignableContents,{className:e,format:t,nodeKey:i,children:[d?s:null,n.jsx("div",{style:{display:"inline-block",width:"550px"},ref:l})]})}class jt extends _n.DecoratorBlockNode{static getType(){return"tweet"}static clone(t){return new jt(t.__id,t.__format,t.__key)}static importJSON(t){const s=kn(t.id);return s.setFormat(t.format),s}exportJSON(){return{...super.exportJSON(),id:this.getId(),type:"tweet",version:1}}static importDOM(){return{div:t=>t.hasAttribute("data-lexical-tweet-id")?{conversion:ir,priority:2}:null}}exportDOM(){const t=document.createElement("div");t.setAttribute("data-lexical-tweet-id",this.__id);const s=document.createTextNode(this.getTextContent());return t.append(s),{element:t}}constructor(t,s,i){super(s,i),this.__id=t}getId(){return this.__id}getTextContent(t,s){return`https://twitter.com/i/web/status/${this.__id}`}decorate(t,s){const i=s.theme.embedBlock||{},o={base:i.base||"",focus:i.focus||""};return n.jsx(or,{className:o,format:this.__format,loadingComponent:"Loading...",nodeKey:this.getKey(),tweetID:this.__id})}isInline(){return!1}}function kn(e){return new jt(e)}function rr(e){return e instanceof jt}const ar={dependencies:[ot.HorizontalRuleNode],export:e=>ot.$isHorizontalRuleNode(e)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(e,t,s,i)=>{const o=ot.$createHorizontalRuleNode();i||e.getNextSibling()!=null?e.replace(o):e.insertBefore(o),o.selectNext()},type:"element"},lr={dependencies:[He],export:e=>zs(e)?`![${e.getAltText()}](${e.getSrc()})`:null,importRegExp:/!(?:\[([^[]*)\])(?:\(([^(]+)\))/,regExp:/!(?:\[([^[]*)\])(?:\(([^(]+)\))$/,replace:(e,t)=>{const[,s,i]=t,o=Gt({altText:s,maxWidth:800,src:i});e.replace(o)},trigger:")",type:"text-match"},cr={dependencies:[jt],export:e=>rr(e)?`<tweet id="${e.getId()}" />`:null,regExp:/<tweet id="([^"]+?)"\s?\/>\s?$/,replace:(e,t,s)=>{const[,i]=s,o=kn(i);e.replace(o)},type:"element"},Us=/^(?:\|)(.+)(?:\|)\s?$/,dr=/^(\| ?:?-*:? ?)+\|\s?$/,ur={dependencies:[L.TableNode,L.TableRowNode,L.TableCellNode],export:e=>{if(!L.$isTableNode(e))return null;const t=[];for(const s of e.getChildren()){const i=[];if(!L.$isTableRowNode(s))continue;let o=!1;for(const a of s.getChildren())L.$isTableCellNode(a)&&(i.push(Fe.$convertToMarkdownString(Pt,a).replace(/\n/g,"\\n")),a.__headerState===L.TableCellHeaderStates.ROW&&(o=!0));t.push(`| ${i.join(" | ")} |`),o&&t.push(`| ${i.map(a=>"---").join(" | ")} |`)}return t.join(`
`)},regExp:Us,replace:(e,t,s)=>{if(dr.test(s[0])){const d=e.getPreviousSibling();if(!d||!L.$isTableNode(d))return;const u=d.getChildren(),p=u[u.length-1];if(!p||!L.$isTableRowNode(p))return;p.getChildren().forEach(m=>{L.$isTableCellNode(m)&&m.toggleHeaderStyle(L.TableCellHeaderStates.ROW)}),e.remove();return}const i=Zn(s[0]);if(i==null)return;const o=[i];let a=e.getPreviousSibling(),r=i.length;for(;a&&!(!g.$isParagraphNode(a)||a.getChildrenSize()!==1);){const d=a.getFirstChild();if(!g.$isTextNode(d))break;const u=Zn(d.getTextContent());if(u==null)break;r=Math.max(r,u.length),o.unshift(u);const p=a.getPreviousSibling();a.remove(),a=p}const l=L.$createTableNode();for(const d of o){const u=L.$createTableRowNode();l.append(u);for(let p=0;p<r;p++)u.append(p<d.length?d[p]:Vs(""))}const c=e.getPreviousSibling();L.$isTableNode(c)&&pr(c)===r?(c.append(...l.getChildren()),e.remove()):e.replace(l),l.selectEnd()},type:"element"};function pr(e){const t=e.getFirstChild();return L.$isTableRowNode(t)?t.getChildrenSize():0}const Vs=e=>{e=e.replace(/\\n/g,`
`);const t=L.$createTableCellNode(L.TableCellHeaderStates.NO_STATUS);return Fe.$convertFromMarkdownString(e,Pt,t),t},Zn=e=>{const t=e.match(Us);return!t||!t[1]?null:t[1].split("|").map(s=>Vs(s))},Pt=[ur,ar,lr,cr,Fe.CHECK_LIST,...Fe.ELEMENT_TRANSFORMERS,...Fe.TEXT_FORMAT_TRANSFORMERS,...Fe.TEXT_MATCH_TRANSFORMERS],Qn=()=>{let e=document.getElementById("report-container");return e===null&&(e=document.createElement("div"),e.id="report-container",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.fontSize="32px",e.style.transform="translate(-50%, -50px)",e.style.padding="20px",e.style.background="rgba(240, 240, 240, 0.4)",e.style.borderRadius="20px",document.body&&document.body.appendChild(e)),e};function mr(){const e=h.useRef(null),t=h.useCallback(()=>{e!==null&&clearTimeout(e.current),document.body&&document.body.removeChild(Qn())},[]);return h.useEffect(()=>t,[t]),h.useCallback(s=>{console.log(s);const i=Qn();return clearTimeout(e.current),i.innerHTML=s,e.current=setTimeout(t,1e3),e.current},[t])}const qs=g.createCommand("SPEECH_TO_TEXT_COMMAND"),hr={"\n":({selection:e})=>{e.insertParagraph()},redo:({editor:e})=>{e.dispatchCommand(g.REDO_COMMAND,void 0)},undo:({editor:e})=>{e.dispatchCommand(g.UNDO_COMMAND,void 0)}},Ys="SpeechRecognition"in window||"webkitSpeechRecognition"in window;function fr(){const[e]=te.useLexicalComposerContext(),[t,s]=h.useState(!1),i=window.SpeechRecognition||window.webkitSpeechRecognition,o=h.useRef(null),a=mr();return h.useEffect(()=>(t&&o.current===null&&(o.current=new i,o.current.continuous=!0,o.current.interimResults=!0,o.current.addEventListener("result",r=>{const l=r.results.item(r.resultIndex),{transcript:c}=l.item(0);a(c),l.isFinal&&e.update(()=>{const d=g.$getSelection();if(g.$isRangeSelection(d)){const u=hr[c.toLowerCase().trim()];u?u({editor:e,selection:d}):c.match(/\s*\n\s*/)?d.insertParagraph():d.insertText(c)}})})),o.current&&(t?o.current.start():o.current.stop()),()=>{o.current!==null&&o.current.stop()}),[i,e,t,a]),h.useEffect(()=>e.registerCommand(qs,r=>(s(r),!0),g.COMMAND_PRIORITY_EDITOR),[e]),null}const gr=Ys?fr:()=>null;async function xr(e){const t=JSON.stringify(e.getEditorState());try{await fetch("http://localhost:1235/setEditorState",{body:t,headers:{Accept:"application/json","Content-type":"application/json"},method:"POST"})}catch{}}async function br(e){const t=JSON.stringify(e.getEditorState());let s=null;try{s=await fetch("http://localhost:1235/validateEditorState",{body:t,headers:{Accept:"application/json","Content-type":"application/json"},method:"POST"})}catch{}if(s!==null&&s.status===403)throw new Error("Editor state validation failed! Server did not accept changes.")}function yr({isRichText:e}){const[t]=te.useLexicalComposerContext(),[s,i]=h.useState(()=>t.isEditable()),[o,a]=h.useState(!1);h.useState(!1);const[r,l]=h.useState(!0),[c,d]=Ct();Wi.useCollaborationContext(),h.useEffect(()=>t.registerUpdateListener(({dirtyElements:p,prevEditorState:m,tags:f})=>{!s&&p.size>0&&!f.has("historic")&&!f.has("collaboration")&&br(t),t.getEditorState().read(()=>{const w=g.$getRoot().getChildren();if(w.length>1)l(!1);else if(g.$isParagraphNode(w[0])){const x=w[0].getChildren();l(x.length===0)}else l(!1)})}),[t,s]);const u=h.useCallback(()=>{t.update(()=>{const p=g.$getRoot(),m=p.getFirstChild();if(he.$isCodeNode(m)&&m.getLanguage()==="markdown")Fe.$convertFromMarkdownString(m.getTextContent(),Pt);else{const f=Fe.$convertToMarkdownString(Pt);p.clear().append(he.$createCodeNode("markdown").append(g.$createTextNode(f)))}p.selectEnd()})},[t]);return n.jsxs("div",{className:"actions",children:[Ys&&n.jsx("button",{onClick:()=>{t.dispatchCommand(qs,!o),a(!o)},className:"action-button action-button-mic "+(o?"active":""),title:"Speech To Text","aria-label":`${o?"Enable":"Disable"} speech to text`,children:n.jsx("i",{className:"mic"})}),n.jsx("button",{className:"action-button import",onClick:()=>qn.importFile(t),title:"Import","aria-label":"Import editor state from JSON",children:n.jsx("i",{className:"import"})}),n.jsx("button",{className:"action-button export",onClick:()=>qn.exportFile(t,{fileName:`Playground ${new Date().toISOString()}`,source:"Playground"}),title:"Export","aria-label":"Export editor state to JSON",children:n.jsx("i",{className:"export"})}),n.jsx("button",{className:"action-button clear",disabled:r,onClick:()=>{d("Clear editor",p=>n.jsx(wr,{editor:t,onClose:p}))},title:"Clear","aria-label":"Clear editor contents",children:n.jsx("i",{className:"clear"})}),n.jsx("button",{className:`action-button ${s?"lock":"unlock"}`,onClick:()=>{s&&xr(t),t.setEditable(!t.isEditable())},title:"Read-Only Mode","aria-label":`${s?"Lock":"Unlock"} read-only mode`,children:n.jsx("i",{className:s?"lock":"unlock"})}),n.jsx("button",{className:"action-button",onClick:u,title:"Convert From Markdown","aria-label":"Convert from markdown",children:n.jsx("i",{className:"markdown"})}),c]})}function wr({editor:e,onClose:t}){return n.jsxs(n.Fragment,{children:["Are you sure you want to clear the editor?",n.jsxs("div",{className:"Modal__content",children:[n.jsx(at,{onClick:()=>{e.dispatchCommand(g.CLEAR_EDITOR_COMMAND,void 0),e.focus(),t()},children:"Clear"})," ",n.jsx(at,{onClick:()=>{e.focus(),t()},children:"Cancel"})]})]})}function Jt({"data-test-id":e,children:t}){return n.jsx("div",{className:"flex flex-row mt-[20px]","data-test-id":e,children:t})}function vr({className:e,format:t,nodeKey:s,videoID:i}){return n.jsx(Rs.BlockWithAlignableContents,{className:e,format:t,nodeKey:s,children:n.jsx("iframe",{width:"560",height:"315",src:`https://www.youtube-nocookie.com/embed/${i}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"YouTube video"})})}function Nr(e){const t=e.getAttribute("data-lexical-youtube");return t?{node:$n(t)}:null}class _t extends _n.DecoratorBlockNode{static getType(){return"youtube"}static clone(t){return new _t(t.__id,t.__format,t.__key)}static importJSON(t){const s=$n(t.videoID);return s.setFormat(t.format),s}exportJSON(){return{...super.exportJSON(),type:"youtube",version:1,videoID:this.__id}}constructor(t,s,i){super(s,i),this.__id=t}exportDOM(){const t=document.createElement("iframe");return t.setAttribute("data-lexical-youtube",this.__id),t.setAttribute("width","560"),t.setAttribute("height","315"),t.setAttribute("src",`https://www.youtube-nocookie.com/embed/${this.__id}`),t.setAttribute("frameborder","0"),t.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),t.setAttribute("allowfullscreen","true"),t.setAttribute("title","YouTube video"),{element:t}}static importDOM(){return{iframe:t=>t.hasAttribute("data-lexical-youtube")?{conversion:Nr,priority:1}:null}}updateDOM(){return!1}getId(){return this.__id}getTextContent(t,s){return`https://www.youtube.com/watch?v=${this.__id}`}decorate(t,s){const i=s.theme.embedBlock||{},o={base:i.base||"",focus:i.focus||""};return n.jsx(vr,{className:o,format:this.__format,nodeKey:this.getKey(),videoID:this.__id})}isInline(){return!1}}function $n(e){return new _t(e)}const Gs=g.createCommand("INSERT_YOUTUBE_COMMAND");function Cr(){const[e]=te.useLexicalComposerContext();return h.useEffect(()=>{if(!e.hasNodes([_t]))throw new Error("YouTubePlugin: YouTubeNode not registered on editor");return e.registerCommand(Gs,t=>{const s=$n(t);return ee.$insertNodeToNearestRoot(s),!0},g.COMMAND_PRIORITY_EDITOR)},[e]),null}const jr={contentName:"Youtube Video",exampleUrl:"https://www.youtube.com/watch?v=jNQXAC9IVRw",icon:n.jsx("i",{className:"icon youtube"}),insertNode:(e,t)=>{e.dispatchCommand(Gs,t.id)},keywords:["youtube","video"],parseUrl:async e=>{const t=/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/.exec(e),s=t&&(t==null?void 0:t[2].length)===11?t[2]:null;return s!=null?{id:s,url:e}:null},type:"youtube-video"},Js=[jr];function _r({index:e,isSelected:t,onClick:s,onMouseEnter:i,option:o}){let a="item";return t&&(a+=" selected"),n.jsx("li",{tabIndex:-1,className:a,ref:o.setRefElement,role:"option","aria-selected":t,id:"typeahead-item-"+e,onMouseEnter:i,onClick:s,children:n.jsx("span",{className:"text",children:o.title})},o.key)}function Er({options:e,selectedItemIndex:t,onOptionClick:s,onOptionMouseEnter:i}){return n.jsx("div",{className:"typeahead-popover",children:n.jsx("ul",{children:e.map((o,a)=>n.jsx(_r,{index:a,isSelected:t===a,onClick:()=>s(o,a),onMouseEnter:()=>i(a),option:o},o.key))})})}const Tr=(e,t)=>{let s;return i=>{window.clearTimeout(s),s=window.setTimeout(()=>{e(i)},t)}};function Sr({embedConfig:e,onClose:t}){const[s,i]=h.useState(""),[o]=te.useLexicalComposerContext(),[a,r]=h.useState(null),l=h.useMemo(()=>Tr(d=>{const u=ft.URL_MATCHER.exec(d);e!=null&&d!=null&&u!=null?Promise.resolve(e.parseUrl(d)).then(p=>{r(p)}):a!=null&&r(null)},200),[e,a]),c=()=>{a!=null&&(e.insertNode(o,a),t())};return n.jsxs("div",{style:{width:"600px"},children:[n.jsx("div",{className:"Input__wrapper",children:n.jsx("input",{type:"text",className:"Input__input",placeholder:e.exampleUrl,value:s,"data-test-id":`${e.type}-embed-modal-url`,onChange:d=>{const{value:u}=d.target;i(u),l(u)}})}),n.jsx(Jt,{children:n.jsx(at,{disabled:!a,onClick:c,"data-test-id":`${e.type}-embed-modal-submit-btn`,children:"Embed"})})]})}function kr(){const[e,t]=Ct(),s=o=>{t(`Embed ${o.contentName}`,a=>n.jsx(Sr,{embedConfig:o,onClose:a}))},i=(o,a,r)=>[new ft.AutoEmbedOption("Dismiss",{onSelect:r}),new ft.AutoEmbedOption(`Embed ${o.contentName}`,{onSelect:a})];return n.jsxs(n.Fragment,{children:[e,n.jsx(ft.LexicalAutoEmbedPlugin,{embedConfigs:Js,onOpenEmbedModalForConfig:s,getMenuOptions:i,menuRenderFn:(o,{selectedIndex:a,options:r,selectOptionAndCleanUp:l,setHighlightedIndex:c})=>o.current?$e.createPortal(n.jsx("div",{className:"typeahead-popover auto-embed-menu",style:{marginLeft:o.current.style.width,width:200},children:n.jsx(Er,{options:r,selectedItemIndex:a,onOptionClick:(d,u)=>{c(u),l(d)},onOptionMouseEnter:d=>{c(d)}})}),o.current):null})]})}const $r=/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,Mr=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,Ir=[fn.createLinkMatcherWithRegExp($r,e=>e.startsWith("http")?e:`https://${e}`),fn.createLinkMatcherWithRegExp(Mr,e=>`mailto:${e}`)];function Ar(){return n.jsx(fn.AutoLinkPlugin,{matchers:Ir})}function es({filter:e,newTab:t=!1}){const[s]=te.useLexicalComposerContext();return h.useEffect(()=>{function i(o){const a=o,r=Rr(a,s);if(r===null)return;const l=r.getAttribute("href");if(r.getAttribute("contenteditable")==="false"||l===void 0)return;const c=s.getEditorState().read(g.$getSelection);if(g.$isRangeSelection(c)&&!c.isCollapsed())return;let d=null;if(s.update(()=>{const u=g.$getNearestNodeFromDOMNode(r);ae.$isLinkNode(u)&&(d=u)}),!(d===null||e!==void 0&&!e(a,d)))try{if(l!==null){const u=a.type==="auxclick"&&a.button===1;window.open(l,t||a.metaKey||a.ctrlKey||u?"_blank":"_self"),a.preventDefault()}}catch{}}return s.registerRootListener((o,a)=>{a!==null&&(a.removeEventListener("click",i),a.removeEventListener("auxclick",i)),o!==null&&(o.addEventListener("click",i),o.addEventListener("auxclick",i))})},[s,e,t]),null}function ts(e){return e.nodeName.toLowerCase()==="a"}function Rr(e,t){return t.getEditorState().read(()=>{const s=e.target;return ts(s)?s:s.parentNode&&ts(s.parentNode)?s.parentNode:null})}function Or(){const[e]=te.useLexicalComposerContext();return h.useEffect(()=>he.registerCodeHighlighting(e),[e]),null}function Dr(e){const t=e.open!==void 0?e.open:!0;return{node:Mn(t)}}class Ge extends g.ElementNode{constructor(t,s){super(s),this.__open=t}static getType(){return"collapsible-container"}static clone(t){return new Ge(t.__open,t.__key)}createDOM(t,s){const i=document.createElement("details");return i.classList.add("Collapsible__container"),i.open=this.__open,i.addEventListener("toggle",()=>{s.getEditorState().read(()=>this.getOpen())!==i.open&&s.update(()=>this.toggleOpen())}),i}updateDOM(t,s){return t.__open!==this.__open&&(s.open=this.__open),!1}static importDOM(){return{details:t=>({conversion:Dr,priority:1})}}static importJSON(t){return Mn(t.open)}exportDOM(){const t=document.createElement("details");return t.setAttribute("open",this.__open.toString()),{element:t}}exportJSON(){return{...super.exportJSON(),open:this.__open,type:"collapsible-container",version:1}}setOpen(t){const s=this.getWritable();s.__open=t}getOpen(){return this.getLatest().__open}toggleOpen(){this.setOpen(!this.getOpen())}}function Mn(e){return new Ge(e)}function Re(e){return e instanceof Ge}function Lr(e){return{node:In()}}class Je extends g.ElementNode{static getType(){return"collapsible-content"}static clone(t){return new Je(t.__key)}createDOM(t){const s=document.createElement("div");return s.classList.add("Collapsible__content"),s}updateDOM(t,s){return!1}static importDOM(){return{div:t=>t.hasAttribute("data-lexical-collapsible-content")?{conversion:Lr,priority:2}:null}}exportDOM(){const t=document.createElement("div");return t.setAttribute("data-lexical-collapsible-content","true"),{element:t}}static importJSON(t){return In()}isShadowRoot(){return!0}exportJSON(){return{...super.exportJSON(),type:"collapsible-content",version:1}}}function In(){return new Je}function Ks(e){return e instanceof Je}function Pr(e){return{node:An()}}class Ke extends g.ElementNode{static getType(){return"collapsible-title"}static clone(t){return new Ke(t.__key)}createDOM(t,s){const i=document.createElement("summary");return i.classList.add("Collapsible__title"),i.classList.add("w-full","font-sans","font-medium","text-md","uppercase"),i.classList.add("tracking-wider","py-1","pl-5"),i}updateDOM(t,s){return!1}static importDOM(){return{summary:t=>({conversion:Pr,priority:1})}}static importJSON(t){return An()}exportDOM(){return{element:document.createElement("summary")}}exportJSON(){return{...super.exportJSON(),type:"collapsible-title",version:1}}collapseAtStart(t){return this.getParentOrThrow().insertBefore(this),!0}insertNewAfter(t,s=!0){const i=this.getParentOrThrow();if(!Re(i))throw new Error("CollapsibleTitleNode expects to be child of CollapsibleContainerNode");if(i.getOpen()){const o=this.getNextSibling();if(!Ks(o))throw new Error("CollapsibleTitleNode expects to have CollapsibleContentNode sibling");const a=o.getFirstChild();if(g.$isElementNode(a))return a;{const r=g.$createParagraphNode();return o.append(r),r}}else{const o=g.$createParagraphNode();return i.insertAfter(o,s),o}}}function An(){return new Ke}function ns(e){return e instanceof Ke}const Rn=g.createCommand();g.createCommand();function Fr(){const[e]=te.useLexicalComposerContext();return h.useEffect(()=>{if(!e.hasNodes([Ge,Ke,Je]))throw new Error("CollapsiblePlugin: CollapsibleContainerNode, CollapsibleTitleNode, or CollapsibleContentNode not registered on editor");const t=()=>{var o;const i=g.$getSelection();if(g.$isRangeSelection(i)&&i.isCollapsed()&&i.anchor.offset===0){const a=ee.$findMatchingParent(i.anchor.getNode(),Re);if(Re(a)){const r=a.getParent();r!==null&&r.getFirstChild()===a&&i.anchor.key===((o=a.getFirstDescendant())==null?void 0:o.getKey())&&a.insertBefore(g.$createParagraphNode())}}return!1},s=()=>{const i=g.$getSelection();if(g.$isRangeSelection(i)&&i.isCollapsed()){const o=ee.$findMatchingParent(i.anchor.getNode(),Re);if(Re(o)){const a=o.getParent();if(a!==null&&a.getLastChild()===o){const r=o.getLastDescendant();r!==null&&i.anchor.key===r.getKey()&&i.anchor.offset===r.getTextContentSize()&&o.insertAfter(g.$createParagraphNode())}}}return!1};return ee.mergeRegister(e.registerNodeTransform(Je,i=>{const o=i.getParent();if(!Re(o)){const a=i.getChildren();for(const r of a)i.insertBefore(r);i.remove()}}),e.registerNodeTransform(Ke,i=>{const o=i.getParent();if(!Re(o)){i.replace(g.$createParagraphNode().append(...i.getChildren()));return}}),e.registerNodeTransform(Ge,i=>{const o=i.getChildren();if(o.length!==2||!ns(o[0])||!Ks(o[1])){for(const a of o)i.insertBefore(a);i.remove()}}),e.registerCommand(g.DELETE_CHARACTER_COMMAND,()=>{const i=g.$getSelection();if(!g.$isRangeSelection(i)||!i.isCollapsed()||i.anchor.offset!==0)return!1;const a=i.anchor.getNode().getTopLevelElement();if(a===null)return!1;const r=a.getPreviousSibling();return!Re(r)||r.getOpen()?!1:(r.setOpen(!0),!0)},g.COMMAND_PRIORITY_LOW),e.registerCommand(g.KEY_ARROW_DOWN_COMMAND,s,g.COMMAND_PRIORITY_LOW),e.registerCommand(g.KEY_ARROW_RIGHT_COMMAND,s,g.COMMAND_PRIORITY_LOW),e.registerCommand(g.KEY_ARROW_UP_COMMAND,t,g.COMMAND_PRIORITY_LOW),e.registerCommand(g.KEY_ARROW_LEFT_COMMAND,t,g.COMMAND_PRIORITY_LOW),e.registerCommand(g.INSERT_PARAGRAPH_COMMAND,()=>{var o;const i=(o=e._window)==null?void 0:o.event;if(i&&(i.ctrlKey||i.metaKey)&&i.key==="Enter"){const a=g.$getPreviousSelection();if(g.$isRangeSelection(a)&&a.isCollapsed()){const r=ee.$findMatchingParent(a.anchor.getNode(),l=>g.$isElementNode(l)&&!l.isInline());if(ns(r)){const l=r.getParent();if(Re(l))return l.toggleOpen(),g.$setSelection(a.clone()),!0}}}return!1},g.COMMAND_PRIORITY_LOW),e.registerCommand(Rn,()=>(e.update(()=>{const i=An();ee.$insertNodeToNearestRoot(Mn(!0).append(i,In().append(g.$createParagraphNode()))),i.select()}),!0),g.COMMAND_PRIORITY_LOW))},[e]),null}const sn={};function Br({accept:e,label:t,onChange:s,"data-test-id":i}){return n.jsxs("div",{className:`${sn.Input__wrapper}`,children:[n.jsx("label",{className:`${sn.Input__label}`,children:t}),n.jsx("input",{type:"file",accept:e,className:`${sn.Input__input}`,onChange:o=>s(o.target.files),"data-test-id":i})]})}function Hr({children:e,label:t,className:s,...i}){return n.jsxs("div",{className:"Input__wrapper",children:[n.jsx("label",{style:{marginTop:"-1em"},className:"Input__label",children:t}),n.jsx("select",{...i,className:s||"min-w-[160px] max-w-[290px] border-[1px] border-[solid] border-[#393939] rounded-[0.25em] px-[0.5em] py-[0.25em] text-[1rem] cursor-pointer leading-[1.4] bg-[linear-gradient(to_bottom,_#ffffff_0%,_#e5e5e5_100%)]",children:e})]})}const on={};function lt({label:e,value:t,onChange:s,placeholder:i="","data-test-id":o,type:a="text"}){return n.jsxs("div",{className:`${on.Input__wrapper}`,children:[n.jsx("label",{className:`${on.Input__label}`,children:e}),n.jsx("input",{type:a,className:`${on.Input__input}`,placeholder:i,onChange:r=>s(r.target.files),"data-test-id":o})]})}const zr=e=>Nt?(e||window).getSelection():null,Kt=g.createCommand("INSERT_INLINE_IMAGE_COMMAND");function Xs({activeEditor:e,onClose:t}){const s=h.useRef(!1),[i,o]=h.useState(""),[a,r]=h.useState(""),[l,c]=h.useState(!1),[d,u]=h.useState("left"),p=i==="",m=x=>{c(x.target.checked)},f=x=>{u(x.target.value)},b=x=>{const y=new FileReader;y.onload=function(){return typeof y.result=="string"&&o(y.result),""},x!==null&&y.readAsDataURL(x[0])};h.useEffect(()=>{s.current=!1;const x=y=>{s.current=y.altKey};return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[e]);const w=()=>{const x={altText:a,position:d,showCaption:l,src:i};e.dispatchCommand(Kt,x),t()};return n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{marginBottom:"1em"},children:n.jsx(Br,{label:"Image Upload",onChange:b,accept:"image/*","data-test-id":"image-modal-file-upload"})}),n.jsx("div",{style:{marginBottom:"1em"},children:n.jsx(lt,{label:"Alt Text",placeholder:"Descriptive alternative text",onChange:r,value:a,"data-test-id":"image-modal-alt-text-input"})}),n.jsxs(Hr,{style:{marginBottom:"1em",width:"290px"},label:"Position",name:"position",id:"position-select",onChange:f,children:[n.jsx("option",{value:"left",children:"Left"}),n.jsx("option",{value:"right",children:"Right"}),n.jsx("option",{value:"full",children:"Full Width"})]}),n.jsxs("div",{className:"Input__wrapper",children:[n.jsx("input",{id:"caption",type:"checkbox",checked:l,onChange:m}),n.jsx("label",{htmlFor:"caption",children:"Show Caption"})]}),n.jsx(Jt,{children:n.jsx(at,{"data-test-id":"image-modal-file-upload-btn",disabled:p,onClick:()=>w(),children:"Confirm"})})]})}function Wr(){const[e]=te.useLexicalComposerContext();return h.useEffect(()=>{if(!e.hasNodes([He]))throw new Error("ImagesPlugin: ImageNode not registered on editor");return ee.mergeRegister(e.registerCommand(Kt,t=>{const s=Gt(t);return g.$insertNodes([s]),g.$isRootOrShadowRoot(s.getParentOrThrow())&&ee.$wrapNodeInElement(s,g.$createParagraphNode).selectEnd(),!0},g.COMMAND_PRIORITY_EDITOR),e.registerCommand(g.DRAGSTART_COMMAND,t=>Vr(t),g.COMMAND_PRIORITY_HIGH),e.registerCommand(g.DRAGOVER_COMMAND,t=>qr(t),g.COMMAND_PRIORITY_LOW),e.registerCommand(g.DROP_COMMAND,t=>Yr(t,e),g.COMMAND_PRIORITY_HIGH))},[e]),null}const Ur="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Zs=document.createElement("img");Zs.src=Ur;function Vr(e){const t=On();if(!t)return!1;const s=e.dataTransfer;return s?(s.setData("text/plain","_"),s.setDragImage(Zs,0,0),s.setData("application/x-lexical-drag",JSON.stringify({data:{altText:t.__altText,caption:t.__caption,height:t.__height,key:t.getKey(),showCaption:t.__showCaption,src:t.__src,width:t.__width},type:"image"})),!0):!1}function qr(e){return On()?(Qs(e)||e.preventDefault(),!0):!1}function Yr(e,t){const s=On();if(!s)return!1;const i=Gr(e);if(!i)return!1;if(e.preventDefault(),Qs(e)){const o=Jr(e);s.remove();const a=g.$createRangeSelection();o!=null&&a.applyDOMRange(o),g.$setSelection(a),t.dispatchCommand(Kt,i)}return!0}function On(){const e=g.$getSelection();if(!g.$isNodeSelection(e))return null;const s=e.getNodes()[0];return zs(s)?s:null}function Gr(e){var o;const t=(o=e.dataTransfer)==null?void 0:o.getData("application/x-lexical-drag");if(!t)return null;const{type:s,data:i}=JSON.parse(t);return s!=="image"?null:i}function Qs(e){const t=e.target;return!!(t&&t instanceof HTMLElement&&!t.closest("code, span.editor-image")&&t.parentElement&&t.parentElement.closest("div.ContentEditable__root"))}function Jr(e){let t;const s=e.target,i=s==null?null:s.nodeType===9?s.defaultView:s.ownerDocument.defaultView,o=zr(i);if(document.caretRangeFromPoint)t=document.caretRangeFromPoint(e.clientX,e.clientY);else if(e.rangeParent&&o!==null)o.collapse(e.rangeParent,e.rangeOffset||0),t=o.getRangeAt(0);else throw Error("Cannot get the selection when dragging");return t}function ei(e,t,...s){if(!e)throw new Error("Internal Lexical error: invariant() is meant to be replaced at compile time. There is no runtime version. Error: "+t)}const Kr=new Map,lu=new Map,ti='{"root":{"children":[{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1}],"direction":null,"format":"","indent":0,"type":"root","version":1}}',ni=e=>e===""?ti:`{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":${e},"type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}`,Xr=h.lazy(()=>Hs(()=>import("./TableComponent-Ce3lG7uX.js"),__vite__mapDeps([3,1,2])));function si(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function Ue(e){return{colSpan:1,id:si(),json:ti,type:e,width:null}}function yt(){return{cells:[],height:null,id:si()}}function cu(e){const t=e.querySelectorAll("tr"),s=[];for(let i=0;i<t.length;i++){const a=t[i].querySelectorAll("td,th");if(!a||a.length===0)continue;const r=[];for(let c=0;c<a.length;c++){const d=a[c],u=d.nodeName==="TH",p=Ue(u?"header":"normal");p.json=ni(JSON.stringify(d.innerText.replace(/\n/g," "))),r.push(p)}const l=yt();l.cells=r,s.push(l)}return s}function Zr(e){const t=e.querySelectorAll("tr");if(!t||t.length===0)return null;const s=[];for(let i=0;i<t.length;i++){const a=t[i].querySelectorAll("td,th");if(!a||a.length===0)continue;const r=[];for(let c=0;c<a.length;c++){const d=a[c],u=d.nodeName==="TH",p=Ue(u?"header":"normal");p.json=ni(JSON.stringify(d.innerText.replace(/\n/g," "))),r.push(p)}const l=yt();l.cells=r,s.push(l)}return{node:ii(s)}}function Qr(e,t){const s=document.createElement("table"),i=document.createElement("colgroup"),o=document.createElement("tbody"),a=e[0];for(let r=t!=null?t.startX:0;r<(t!=null?t.endX+1:a.cells.length);r++){const l=document.createElement("col");i.append(l)}for(let r=t!=null?t.startY:0;r<(t!=null?t.endY+1:e.length);r++){const c=e[r].cells,d=document.createElement("tr");for(let u=t!=null?t.startX:0;u<(t!=null?t.endX+1:c.length);u++){const p=c[u],m=document.createElement(p.type==="header"?"th":"td");m.innerHTML=Kr.get(p.json)||"",d.appendChild(m)}o.appendChild(d)}return s.appendChild(i),s.appendChild(o),s}class Qe extends g.DecoratorNode{static getType(){return"tablesheet"}static clone(t){return new Qe(Array.from(t.__rows),t.__key)}static importJSON(t){return ii(t.rows)}exportJSON(){return{rows:this.__rows,type:"tablesheet",version:1}}static importDOM(){return{table:t=>({conversion:Zr,priority:0})}}exportDOM(){return{element:Qr(this.__rows)}}constructor(t,s){super(s),this.__rows=t||[]}createDOM(){return document.createElement("div")}updateDOM(){return!1}mergeRows(t,s,i){const a=this.getWritable().__rows,r=Math.min(a.length,s+i.length);for(let l=s;l<r;l++){const c=a[l],d=i[l-s],u=c.cells,p=Array.from(u),m={...c,cells:p},f=d.cells,b=Math.min(u.length,t+f.length);for(let w=t;w<b;w++){const x=u[w],y=f[w-t],v={...x,json:y.json,type:y.type};p[w]=v}a[l]=m}}updateCellJSON(t,s,i){const a=this.getWritable().__rows,r=a[s],l=r.cells,c=l[t],d=Array.from(l),u={...c,json:i},p={...r,cells:d};d[t]=u,a[s]=p}updateCellType(t,s,i){const a=this.getWritable().__rows,r=a[s],l=r.cells,c=l[t],d=Array.from(l),u={...c,type:i},p={...r,cells:d};d[t]=u,a[s]=p}insertColumnAt(t){const i=this.getWritable().__rows;for(let o=0;o<i.length;o++){const a=i[o],r=a.cells,l=Array.from(r),c={...a,cells:l},d=(r[t]||r[t-1]).type;l.splice(t,0,Ue(d)),i[o]=c}}deleteColumnAt(t){const i=this.getWritable().__rows;for(let o=0;o<i.length;o++){const a=i[o],r=a.cells,l=Array.from(r),c={...a,cells:l};l.splice(t,1),i[o]=c}}addColumns(t){const i=this.getWritable().__rows;for(let o=0;o<i.length;o++){const a=i[o],r=a.cells,l=Array.from(r),c={...a,cells:l},d=r[r.length-1].type;for(let u=0;u<t;u++)l.push(Ue(d));i[o]=c}}insertRowAt(t){const i=this.getWritable().__rows,o=i[t]||i[t-1],a=o.cells.length,r=yt();for(let l=0;l<a;l++){const c=Ue(o.cells[l].type);r.cells.push(c)}i.splice(t,0,r)}deleteRowAt(t){this.getWritable().__rows.splice(t,1)}addRows(t){const i=this.getWritable().__rows,o=i[i.length-1],a=o.cells.length;for(let r=0;r<t;r++){const l=yt();for(let c=0;c<a;c++){const d=Ue(o.cells[c].type);l.cells.push(d)}i.push(l)}}updateColumnWidth(t,s){const o=this.getWritable().__rows;for(let a=0;a<o.length;a++){const r=o[a],l=r.cells,c=Array.from(l),d={...r,cells:c};c[t].width=s,o[a]=d}}decorate(t,s){return n.jsx(h.Suspense,{children:n.jsx(Xr,{nodeKey:this.__key,theme:s.theme,rows:this.__rows})})}isInline(){return!1}}function du(e){return e instanceof Qe}function ii(e){return new Qe(e)}function ea(e,t,s=!0){const i=[];for(let o=0;o<t;o++){const a=yt();i.push(a);for(let r=0;r<e;r++)a.cells.push(Ue(s===!0&&(o===0||r===0)?"header":"normal"))}return new Qe(i)}const oi=g.createCommand("INSERT_NEW_TABLE_COMMAND"),ta=h.createContext({cellEditorConfig:null,cellEditorPlugins:null,set:()=>{}});function ri({activeEditor:e,onClose:t}){const[s,i]=h.useState("5"),[o,a]=h.useState("5"),[r,l]=h.useState(!0);h.useEffect(()=>{const d=Number(s),u=Number(o);d&&d>0&&d<=500&&u&&u>0&&u<=50?l(!1):l(!0)},[s,o]);const c=()=>{e.dispatchCommand(L.INSERT_TABLE_COMMAND,{columns:o,rows:s}),t()};return n.jsxs(n.Fragment,{children:[n.jsx(lt,{placeholder:"# of rows (1-500)",label:"Rows",onChange:i,value:s,"data-test-id":"table-modal-rows",type:"number"}),n.jsx(lt,{placeholder:"# of columns (1-50)",label:"Columns",onChange:a,value:o,"data-test-id":"table-modal-columns",type:"number"}),n.jsx(Jt,{"data-test-id":"table-model-confirm-insert",children:n.jsx(at,{disabled:r,onClick:c,children:"Confirm"})})]})}function na({activeEditor:e,onClose:t}){const[s,i]=h.useState(""),[o,a]=h.useState(""),[r,l]=h.useState(!0);h.useEffect(()=>{const d=Number(s),u=Number(o);d&&d>0&&d<=500&&u&&u>0&&u<=50?l(!1):l(!0)},[s,o]);const c=()=>{e.dispatchCommand(oi,{columns:o,rows:s}),t()};return n.jsxs(n.Fragment,{children:[n.jsx(lt,{placeholder:"# of rows (1-500)",label:"Rows",onChange:i,value:s,"data-test-id":"table-modal-rows",type:"number"}),n.jsx(lt,{placeholder:"# of columns (1-50)",label:"Columns",onChange:a,value:o,"data-test-id":"table-modal-columns",type:"number"}),n.jsx(Jt,{"data-test-id":"table-model-confirm-insert",children:n.jsx(at,{disabled:r,onClick:c,children:"Confirm"})})]})}function sa({cellEditorConfig:e,children:t}){const[s]=te.useLexicalComposerContext(),i=h.useContext(ta);return h.useEffect(()=>(s.hasNodes([Qe])||ei(!1,"TablePlugin: TableNode is not registered on editor"),i.set(e,t),s.registerCommand(oi,({columns:o,rows:a,includeHeaders:r})=>{const l=ea(Number(a),Number(o),r);return g.$insertNodes([l]),!0},g.COMMAND_PRIORITY_EDITOR)),[i,e,t,s]),null}class xe extends gn.MenuOption{constructor(t,s){super(t),this.title=t,this.keywords=s.keywords||[],this.icon=s.icon,this.keyboardShortcut=s.keyboardShortcut,this.onSelect=s.onSelect.bind(this)}}function ia({index:e,isSelected:t,onClick:s,onMouseEnter:i,option:o}){let a="item";return t&&(a+=" selected"),n.jsxs("li",{tabIndex:-1,className:a,ref:o.setRefElement,role:"option","aria-selected":t,id:"typeahead-item-"+e,onMouseEnter:i,onClick:s,children:[o.icon,n.jsx("span",{className:"text",children:o.title})]},o.key)}function oa(e,t){const s=[];if(t==null)return s;const i=t.match(/^([1-9]\d?)(?:x([1-9]\d?)?)?$/);if(i!==null){const o=i[1],a=i[2]?[i[2]]:[1,2,3,4,5,6,7,8,9,10].map(String);s.push(...a.map(r=>new xe(`${o}x${r} Table`,{icon:n.jsx("i",{className:"icon table"}),keywords:["table"],onSelect:()=>e.dispatchCommand(L.INSERT_TABLE_COMMAND,{columns:r,rows:o})})))}return s}function ra(e,t){return[new xe("Paragraph",{icon:n.jsx("i",{className:"icon paragraph"}),keywords:["normal","paragraph","p","text"],onSelect:()=>e.update(()=>{const s=g.$getSelection();g.$isRangeSelection(s)&&de.$setBlocksType(s,()=>g.$createParagraphNode())})}),...[1,2,3,4].map(s=>new xe(`Heading ${s}`,{icon:n.jsx("i",{className:`icon h${s}`}),keywords:["heading","header",`h${s}`],onSelect:()=>e.update(()=>{const i=g.$getSelection();g.$isRangeSelection(i)&&de.$setBlocksType(i,()=>Ce.$createHeadingNode(`h${s}`))})})),new xe("Table",{icon:n.jsx("i",{className:"icon table"}),keywords:["table","grid","spreadsheet","rows","columns"],onSelect:()=>t("Insert Table",s=>n.jsx(ri,{activeEditor:e,onClose:s}))}),...Js.map(s=>new xe(`Embed ${s.contentName}`,{icon:s.icon,keywords:[...s.keywords,"embed"],onSelect:()=>e.dispatchCommand(ft.INSERT_EMBED_COMMAND,s.type)})),new xe("Numbered List",{icon:n.jsx("i",{className:"icon number"}),keywords:["numbered list","ordered list","ol"],onSelect:()=>e.dispatchCommand(me.INSERT_ORDERED_LIST_COMMAND,void 0)}),new xe("Bulleted List",{icon:n.jsx("i",{className:"icon bullet"}),keywords:["bulleted list","unordered list","ul"],onSelect:()=>e.dispatchCommand(me.INSERT_UNORDERED_LIST_COMMAND,void 0)}),new xe("Check List",{icon:n.jsx("i",{className:"icon check"}),keywords:["check list","todo list"],onSelect:()=>e.dispatchCommand(me.INSERT_CHECK_LIST_COMMAND,void 0)}),new xe("Quote",{icon:n.jsx("i",{className:"icon quote"}),keywords:["block quote"],onSelect:()=>e.update(()=>{const s=g.$getSelection();g.$isRangeSelection(s)&&de.$setBlocksType(s,()=>Ce.$createQuoteNode())})}),new xe("Code",{icon:n.jsx("i",{className:"icon code"}),keywords:["javascript","python","js","codeblock"],onSelect:()=>e.update(()=>{const s=g.$getSelection();if(g.$isRangeSelection(s))if(s.isCollapsed())de.$setBlocksType(s,()=>he.$createCodeNode());else{const i=s.getTextContent(),o=he.$createCodeNode();s.insertNodes([o]),s.insertRawText(i)}})}),new xe("Divider",{icon:n.jsx("i",{className:"icon horizontal-rule"}),keywords:["horizontal rule","divider","hr"],onSelect:()=>e.dispatchCommand(ot.INSERT_HORIZONTAL_RULE_COMMAND,void 0)}),new xe("Image",{icon:n.jsx("i",{className:"icon image"}),keywords:["image","photo","picture","file"],onSelect:()=>t("Insert Image",s=>n.jsx(Xs,{activeEditor:e,onClose:s}))}),new xe("Collapsible",{icon:n.jsx("i",{className:"icon caret-right"}),keywords:["collapse","collapsible","toggle"],onSelect:()=>e.dispatchCommand(Rn,void 0)}),...["left","center","right","justify"].map(s=>new xe(`Align ${s}`,{icon:n.jsx("i",{className:`icon ${s}-align`}),keywords:["align","justify",s],onSelect:()=>e.dispatchCommand(g.FORMAT_ELEMENT_COMMAND,s)}))]}function aa(){const[e]=te.useLexicalComposerContext(),[t,s]=Ct(),[i,o]=h.useState(null),a=gn.useBasicTypeaheadTriggerMatch("/",{minLength:0}),r=h.useMemo(()=>{const c=ra(e,s);if(!i)return c;const d=new RegExp(i,"i");return[...oa(e,i),...c.filter(u=>d.test(u.title)||u.keywords.some(p=>d.test(p)))]},[e,i,s]),l=h.useCallback((c,d,u,p)=>{e.update(()=>{d==null||d.remove(),c.onSelect(p),u()})},[e]);return n.jsxs(n.Fragment,{children:[t,n.jsx(gn.LexicalTypeaheadMenuPlugin,{onQueryChange:o,onSelectOption:l,triggerFn:a,options:r,menuRenderFn:(c,{selectedIndex:d,selectOptionAndCleanUp:u,setHighlightedIndex:p})=>c.current&&r.length?$e.createPortal(n.jsx("div",{className:"typeahead-popover component-picker-menu",children:n.jsx("ul",{children:r.map((m,f)=>n.jsx(ia,{index:f,isSelected:d===f,onClick:()=>{p(f),u(m)},onMouseEnter:()=>{p(f)},option:m},m.key))})}),c.current):null})]})}const ss=["image/","image/heic","image/heif","image/gif","image/webp"];function la(){const[e]=te.useLexicalComposerContext();return h.useEffect(()=>e.registerCommand(Ce.DRAG_DROP_PASTE,t=>((async()=>{const s=await ee.mediaFileReader(t,[ss].flatMap(i=>i));for(const{file:i,result:o}of s)ee.isMimeType(i,ss)&&e.dispatchCommand(Kt,{altText:i.name,src:o})})(),!0),g.COMMAND_PRIORITY_LOW),[e]),null}function rn(e){return e instanceof HTMLElement}class ai{constructor(t,s){this._x=t,this._y=s}get x(){return this._x}get y(){return this._y}equals({x:t,y:s}){return this.x===t&&this.y===s}calcDeltaXTo({x:t}){return this.x-t}calcDeltaYTo({y:t}){return this.y-t}calcHorizontalDistanceTo(t){return Math.abs(this.calcDeltaXTo(t))}calcVerticalDistance(t){return Math.abs(this.calcDeltaYTo(t))}calcDistanceTo(t){return Math.sqrt(Math.pow(this.calcDeltaXTo(t),2)+Math.pow(this.calcDeltaYTo(t),2))}}function ca(e){return e instanceof ai}class We{constructor(t,s,i,o){const[a,r]=s<=o?[s,o]:[o,s],[l,c]=t<=i?[t,i]:[i,t];this._top=a,this._right=c,this._left=l,this._bottom=r}get top(){return this._top}get right(){return this._right}get bottom(){return this._bottom}get left(){return this._left}get width(){return Math.abs(this._left-this._right)}get height(){return Math.abs(this._bottom-this._top)}equals({top:t,left:s,bottom:i,right:o}){return t===this._top&&i===this._bottom&&s===this._left&&o===this._right}contains(t){if(ca(t)){const{x:s,y:i}=t,o=i<this._top,a=i>this._bottom,r=s<this._left,l=s>this._right;return{reason:{isOnBottomSide:a,isOnLeftSide:r,isOnRightSide:l,isOnTopSide:o},result:!o&&!a&&!r&&!l}}else{const{top:s,left:i,bottom:o,right:a}=t;return s>=this._top&&s<=this._bottom&&o>=this._top&&o<=this._bottom&&i>=this._left&&i<=this._right&&a>=this._left&&a<=this._right}}intersectsWith(t){const{left:s,top:i,width:o,height:a}=t,{left:r,top:l,width:c,height:d}=this,u=s+o>=r+c?s+o:r+c,p=i+a>=l+d?i+a:l+d,m=s<=r?s:r,f=i<=l?i:l;return u-m<=o+c&&p-f<=a+d}generateNewRect({left:t=this.left,top:s=this.top,right:i=this.right,bottom:o=this.bottom}){return new We(t,s,i,o)}static fromLTRB(t,s,i,o){return new We(t,s,i,o)}static fromLWTH(t,s,i,o){return new We(t,i,t+s,i+o)}static fromPoints(t,s){const{y:i,x:o}=t,{y:a,x:r}=s;return We.fromLTRB(o,i,r,a)}static fromDOM(t){const{top:s,width:i,left:o,height:a}=t.getBoundingClientRect();return We.fromLWTH(o,i,s,a)}}const bn=4,da=2,ua="draggable-block-menu",is="application/x-lexical-drag-block",os=28,pa=1,ma=-1,rs=0;let Ot=1/0;function ha(e){return e===0?1/0:Ot>=0&&Ot<e?Ot:Math.floor(e/2)}function fa(e){return e.getEditorState().read(()=>g.$getRoot().getChildrenKeys())}function li(e){const t=(c,d)=>c?parseFloat(window.getComputedStyle(c)[d]):0,{marginTop:s,marginBottom:i}=window.getComputedStyle(e),o=t(e.previousElementSibling,"marginBottom"),a=t(e.nextElementSibling,"marginTop"),r=Math.max(parseFloat(s),o);return{marginBottom:Math.max(parseFloat(i),a),marginTop:r}}function an(e,t,s,i=!1){const o=e.getBoundingClientRect(),a=fa(t);let r=null;return t.getEditorState().read(()=>{if(i){const[d,u]=[t.getElementByKey(a[0]),t.getElementByKey(a[a.length-1])],[p,m]=[d==null?void 0:d.getBoundingClientRect(),u==null?void 0:u.getBoundingClientRect()];if(p&&m&&(s.y<p.top?r=d:s.y>m.bottom&&(r=u),r))return}let l=ha(a.length),c=rs;for(;l>=0&&l<a.length;){const d=a[l],u=t.getElementByKey(d);if(u===null)break;const p=new ai(s.x,s.y),m=We.fromDOM(u),{marginTop:f,marginBottom:b}=li(u),w=m.generateNewRect({bottom:m.bottom+b,left:o.left,right:o.right,top:m.top-f}),{result:x,reason:{isOnTopSide:y,isOnBottomSide:v}}=w.contains(p);if(x){r=u,Ot=l;break}c===rs&&(y?c=ma:v?c=pa:c=1/0),l+=c}}),r}function ga(e){return!!e.closest(`.${ua}`)}function xa(e,t,s){if(!e){t.style.opacity="0",t.style.transform="translate(-10000px, -10000px)";return}const i=e.getBoundingClientRect(),o=window.getComputedStyle(e),a=t.getBoundingClientRect(),r=s.getBoundingClientRect(),l=i.top+(parseInt(o.lineHeight,10)-a.height)/2-r.top,c=bn;t.style.opacity="1",t.style.transform=`translate(${c}px, ${l}px)`}function ba(e,t){const{transform:s}=t.style;t.style.transform="translateZ(0)",e.setDragImage(t,0,0),setTimeout(()=>{t.style.transform=s})}function ya(e,t,s,i){const{top:o,height:a}=t.getBoundingClientRect(),{top:r,width:l}=i.getBoundingClientRect(),{marginTop:c,marginBottom:d}=li(t);let u=o;s>=o?u+=a+d/2:u-=c/2;const p=u-r-da,m=os-bn;e.style.transform=`translate(${m}px, ${p}px)`,e.style.width=`${l-(os-bn)*2}px`,e.style.opacity=".4"}function wa(e){e&&(e.style.opacity="0",e.style.transform="translate(-10000px, -10000px)")}function va(e,t,s){const i=t.parentElement,o=h.useRef(null),a=h.useRef(null),r=h.useRef(!1),[l,c]=h.useState(null);h.useEffect(()=>{function p(f){const b=f.target;if(!rn(b)){c(null);return}if(ga(b))return;const w=an(t,e,f);c(w)}function m(){c(null)}return i==null||i.addEventListener("mousemove",p),i==null||i.addEventListener("mouseleave",m),()=>{i==null||i.removeEventListener("mousemove",p),i==null||i.removeEventListener("mouseleave",m)}},[i,t,e]),h.useEffect(()=>{o.current&&xa(l,o.current,t)},[t,l]),h.useEffect(()=>{function p(f){if(!r.current)return!1;const[b]=Ce.eventFiles(f);if(b)return!1;const{pageY:w,target:x}=f;if(!rn(x))return!1;const y=an(t,e,f,!0),v=a.current;return y===null||v===null?!1:(ya(v,y,w,t),f.preventDefault(),!0)}function m(f){if(!r.current)return!1;const[b]=Ce.eventFiles(f);if(b)return!1;const{target:w,dataTransfer:x,pageY:y}=f,v=(x==null?void 0:x.getData(is))||"",S=g.$getNodeByKey(v);if(!S||!rn(w))return!1;const _=an(t,e,f,!0);if(!_)return!1;const j=g.$getNearestNodeFromDOMNode(_);if(!j)return!1;if(j===S)return!0;const N=_.getBoundingClientRect().top;return y>=N?j.insertAfter(S):j.insertBefore(S),c(null),!0}return ee.mergeRegister(e.registerCommand(g.DRAGOVER_COMMAND,f=>p(f),g.COMMAND_PRIORITY_LOW),e.registerCommand(g.DROP_COMMAND,f=>m(f),g.COMMAND_PRIORITY_HIGH))},[t,e]);function d(p){const m=p.dataTransfer;if(!m||!l)return;ba(m,l);let f="";e.update(()=>{const b=g.$getNearestNodeFromDOMNode(l);b&&(f=b.getKey())}),r.current=!0,m.setData(is,f)}function u(){r.current=!1,wa(a.current)}return $e.createPortal(n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"icon draggable-block-menu",ref:o,draggable:!0,onDragStart:d,onDragEnd:u,children:n.jsx("div",{className:s?"icon":""})}),n.jsx("div",{className:"draggable-block-target-line",ref:a})]}),t)}function Na({anchorElem:e=document.body}){const[t]=te.useLexicalComposerContext();return va(t,e,t._editable)}function wt(e){const t=e.anchor,s=e.focus,i=e.anchor.getNode(),o=e.focus.getNode();return i===o?i:e.isBackward()?de.$isAtNodeEnd(s)?i:o:de.$isAtNodeEnd(t)?i:o}const Ca=10,ja=5;function as(e,t,s,i=Ca,o=ja){const a=s.parentElement;if(e===null||!a){t.style.opacity="0",t.style.transform="translate(-10000px, -10000px)";return}const r=t.getBoundingClientRect(),l=s.getBoundingClientRect(),c=a.getBoundingClientRect();let d=e.top-i,u=e.left-o;d<c.top&&(d+=r.height+e.height+i*2),u+r.width>c.right&&(u=c.right-r.width-o),d-=l.top,u-=l.left,t.style.opacity="1",t.style.transform=`translate(${u}px, ${d}px)`}function Ft(e){const t=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,s=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;return e=String(e).trim(),e.match(t)||e.match(s)?e:"https://"}const _a=new RegExp(/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[\w]*))?)/);function Ea(e){return e==="https://"||_a.test(e)}function Ta({editor:e,isLink:t,setIsLink:s,anchorElem:i,isLinkEditMode:o,setIsLinkEditMode:a}){const r=h.useRef(null),l=h.useRef(null),[c,d]=h.useState(""),[u,p]=h.useState("https://"),[m,f]=h.useState(null),b=h.useCallback(()=>{var N,E;const y=g.$getSelection();if(g.$isRangeSelection(y)){const k=wt(y),C=k.getParent();ae.$isLinkNode(C)?d(C.getURL()):ae.$isLinkNode(k)?d(k.getURL()):d("")}const v=r.current,S=window.getSelection(),_=document.activeElement;if(v===null)return;const j=e.getRootElement();if(y!==null&&S!==null&&j!==null&&j.contains(S.anchorNode)&&e.isEditable()){const k=(E=(N=S.focusNode)==null?void 0:N.parentElement)==null?void 0:E.getBoundingClientRect();k&&(k.y+=40,as(k,v,i)),f(y)}else(!_||_.className!=="link-input")&&(j!==null&&as(null,v,i),f(null),a&&a(!1),d(""));return!0},[i,e,a]);h.useEffect(()=>{const y=i.parentElement,v=()=>{e.getEditorState().read(()=>{b()})};return window.addEventListener("resize",v),y&&y.addEventListener("scroll",v),()=>{window.removeEventListener("resize",v),y&&y.removeEventListener("scroll",v)}},[i.parentElement,e,b]),h.useEffect(()=>ee.mergeRegister(e.registerUpdateListener(({editorState:y})=>{y.read(()=>{b()})}),e.registerCommand(g.SELECTION_CHANGE_COMMAND,()=>(b(),!0),g.COMMAND_PRIORITY_LOW),e.registerCommand(g.KEY_ESCAPE_COMMAND,()=>t?(s(!1),!0):!1,g.COMMAND_PRIORITY_HIGH)),[e,b,s,t]),h.useEffect(()=>{e.getEditorState().read(()=>{b()})},[e,b]),h.useEffect(()=>{o&&l.current&&l.current.focus()},[o,t]);const w=y=>{y.key==="Enter"?(y.preventDefault(),x()):y.key==="Escape"&&(y.preventDefault(),a&&a(!1))},x=()=>{m!==null&&(c!==""&&e.dispatchCommand(ae.TOGGLE_LINK_COMMAND,Ft(u)),p("https://"),a&&a(!1))};return n.jsx("div",{ref:r,className:"link-editor",children:t?o?n.jsxs(n.Fragment,{children:[n.jsx("input",{ref:l,className:"link-input",value:u,onChange:y=>{p(y.target.value)},onKeyDown:y=>{w(y)}}),n.jsxs("div",{children:[n.jsx("div",{className:"link-cancel",role:"button",tabIndex:0,onMouseDown:y=>y.preventDefault(),onClick:()=>{a&&a(!1)}}),n.jsx("div",{className:"link-confirm",role:"button",tabIndex:0,onMouseDown:y=>y.preventDefault(),onClick:x})]})]}):n.jsxs("div",{className:"link-view",children:[n.jsx("a",{href:Ft(c),target:"_blank",rel:"noopener noreferrer",children:c}),n.jsx("div",{className:"link-edit",role:"button",tabIndex:0,onMouseDown:y=>y.preventDefault(),onClick:()=>{p(c),a&&a(!0)}}),n.jsx("div",{className:"link-trash",role:"button",tabIndex:0,onMouseDown:y=>y.preventDefault(),onClick:()=>{e.dispatchCommand(ae.TOGGLE_LINK_COMMAND,null)}})]}):null})}function Sa(e,t,s,i){const[o,a]=h.useState(e),[r,l]=h.useState(!1);return h.useEffect(()=>{function c(){const d=g.$getSelection();if(g.$isRangeSelection(d)){const u=wt(d),p=ee.$findMatchingParent(u,ae.$isLinkNode),m=ee.$findMatchingParent(u,ae.$isAutoLinkNode);l(p!==null&&m===null)}}return ee.mergeRegister(e.registerUpdateListener(({editorState:d})=>{d.read(()=>{c()})}),e.registerCommand(g.SELECTION_CHANGE_COMMAND,(d,u)=>(c(),a(u),!1),g.COMMAND_PRIORITY_CRITICAL),e.registerCommand(g.CLICK_COMMAND,d=>{const u=g.$getSelection();if(g.$isRangeSelection(u)){const p=wt(u),m=ee.$findMatchingParent(p,ae.$isLinkNode);if(ae.$isLinkNode(m)&&(d.metaKey||d.ctrlKey))return window.open(m.getURL(),"_blank"),!0}return!1},g.COMMAND_PRIORITY_LOW))},[e]),$e.createPortal(n.jsx(Ta,{editor:o,isLink:r,anchorElem:t,setIsLink:l,isLinkEditMode:s,setIsLinkEditMode:i}),t)}function ka({anchorElem:e=document.body,isLinkEditMode:t,setIsLinkEditMode:s}){const[i]=te.useLexicalComposerContext();return Sa(i,e,t,s)}function $a(e,t){const s=e.getRangeAt(0);let i;if(e.anchorNode===t){let o=t;for(;o.firstElementChild!=null;)o=o.firstElementChild;i=o.getBoundingClientRect()}else i=s.getBoundingClientRect();return i}const Ma=10,Ia=5;function Aa(e,t,s,i=Ma,o=Ia){const a=s.parentElement;if(e===null||!a){t.style.opacity="0",t.style.transform="translate(-10000px, -10000px)";return}const r=t.getBoundingClientRect(),l=s.getBoundingClientRect(),c=a.getBoundingClientRect();let d=e.top-r.height-i,u=e.left-o;d<c.top&&(d+=r.height+e.height+i*2),u+r.width>c.right&&(u=c.right-r.width-o),d-=l.top,u-=l.left,t.style.opacity="1",t.style.transform=`translate(${u}px, ${d}px)`}function Ra({editor:e,anchorElem:t,isLink:s,isBold:i,isItalic:o,isUnderline:a,isCode:r,isStrikethrough:l,isSubscript:c,isSuperscript:d}){const u=h.useRef(null),p=h.useCallback(()=>{s?e.dispatchCommand(ae.TOGGLE_LINK_COMMAND,null):e.dispatchCommand(ae.TOGGLE_LINK_COMMAND,"https://")},[e,s]);function m(w){u!=null&&u.current&&(w.buttons===1||w.buttons===3)&&(u.current.style.pointerEvents="none")}function f(w){u!=null&&u.current&&(u.current.style.pointerEvents="auto")}h.useEffect(()=>{if(u!=null&&u.current)return document.addEventListener("mousemove",m),document.addEventListener("mouseup",f),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",f)}},[u]);const b=h.useCallback(()=>{const w=g.$getSelection(),x=u.current,y=window.getSelection();if(x===null)return;const v=e.getRootElement();if(w!==null&&y!==null&&!y.isCollapsed&&v!==null&&v.contains(y.anchorNode)){const S=$a(y,v);Aa(S,x,t)}},[e,t]);return h.useEffect(()=>{const w=t.parentElement,x=()=>{e.getEditorState().read(()=>{b()})};return window.addEventListener("resize",x),w&&w.addEventListener("scroll",x),()=>{window.removeEventListener("resize",x),w&&w.removeEventListener("scroll",x)}},[e,b,t]),h.useEffect(()=>(e.getEditorState().read(()=>{b()}),ee.mergeRegister(e.registerUpdateListener(({editorState:w})=>{w.read(()=>{b()})}),e.registerCommand(g.SELECTION_CHANGE_COMMAND,()=>(b(),!1),g.COMMAND_PRIORITY_LOW))),[e,b]),n.jsx("div",{ref:u,className:e.isEditable()&&"floating-text-format-popup",children:e.isEditable()&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{e.dispatchCommand(g.FORMAT_TEXT_COMMAND,"bold")},className:"popup-item spaced "+(i?"active":""),"aria-label":"Format text as bold",children:n.jsx("i",{className:"format bold"})}),n.jsx("button",{onClick:()=>{e.dispatchCommand(g.FORMAT_TEXT_COMMAND,"italic")},className:"popup-item spaced "+(o?"active":""),"aria-label":"Format text as italics",children:n.jsx("i",{className:"format italic"})}),n.jsx("button",{onClick:()=>{e.dispatchCommand(g.FORMAT_TEXT_COMMAND,"underline")},className:"popup-item spaced "+(a?"active":""),"aria-label":"Format text to underlined",children:n.jsx("i",{className:"format underline"})}),n.jsx("button",{onClick:()=>{e.dispatchCommand(g.FORMAT_TEXT_COMMAND,"strikethrough")},className:"popup-item spaced "+(l?"active":""),"aria-label":"Format text with a strikethrough",children:n.jsx("i",{className:"format strikethrough"})}),n.jsx("button",{onClick:()=>{e.dispatchCommand(g.FORMAT_TEXT_COMMAND,"subscript")},className:"popup-item spaced "+(c?"active":""),title:"Subscript","aria-label":"Format Subscript",children:n.jsx("i",{className:"format subscript"})}),n.jsx("button",{onClick:()=>{e.dispatchCommand(g.FORMAT_TEXT_COMMAND,"superscript")},className:"popup-item spaced "+(d?"active":""),title:"Superscript","aria-label":"Format Superscript",children:n.jsx("i",{className:"format superscript"})}),n.jsx("button",{onClick:()=>{e.dispatchCommand(g.FORMAT_TEXT_COMMAND,"code")},className:"popup-item spaced "+(r?"active":""),"aria-label":"Insert code block",children:n.jsx("i",{className:"format code"})}),n.jsx("button",{onClick:p,className:"popup-item spaced "+(s?"active":""),"aria-label":"Insert link",children:n.jsx("i",{className:"format link"})})]})})}function Oa(e,t){const[s,i]=h.useState(!1),[o,a]=h.useState(!1),[r,l]=h.useState(!1),[c,d]=h.useState(!1),[u,p]=h.useState(!1),[m,f]=h.useState(!1),[b,w]=h.useState(!1),[x,y]=h.useState(!1),[v,S]=h.useState(!1),_=h.useCallback(()=>{e.getEditorState().read(()=>{if(e.isComposing())return;const j=g.$getSelection(),N=window.getSelection(),E=e.getRootElement();if(N!==null&&(!g.$isRangeSelection(j)||E===null||!E.contains(N.anchorNode))){i(!1);return}if(!g.$isRangeSelection(j))return;const k=wt(j);l(j.hasFormat("bold")),d(j.hasFormat("italic")),p(j.hasFormat("underline")),f(j.hasFormat("strikethrough")),w(j.hasFormat("subscript")),y(j.hasFormat("superscript")),S(j.hasFormat("code"));const C=k.getParent();ae.$isLinkNode(C)||ae.$isLinkNode(k)?a(!0):a(!1),!he.$isCodeHighlightNode(j.anchor.getNode())&&j.getTextContent()!==""?i(g.$isTextNode(k)):i(!1);const $=j.getTextContent().replace(/\n/g,"");if(!j.isCollapsed()&&$===""){i(!1);return}})},[e]);return h.useEffect(()=>(document.addEventListener("selectionchange",_),()=>{document.removeEventListener("selectionchange",_)}),[_]),h.useEffect(()=>ee.mergeRegister(e.registerUpdateListener(()=>{_()}),e.registerRootListener(()=>{e.getRootElement()===null&&i(!1)})),[e,_]),!s||o?null:$e.createPortal(n.jsx(Ra,{editor:e,anchorElem:t,isLink:o,isBold:r,isItalic:c,isStrikethrough:m,isSubscript:b,isSuperscript:x,isUnderline:u,isCode:v}),t)}function ls({anchorElem:e=document.body}){const[t]=te.useLexicalComposerContext();return Oa(t,e)}const Da=/(^|$|[^A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ])(congrats|congratulations|gratuluju|gratuluji|gratulujeme|blahopřeju|blahopřeji|blahopřejeme|Til lykke|Tillykke|Glückwunsch|Gratuliere|felicitaciones|enhorabuena|paljon onnea|onnittelut|Félicitations|gratula|gratulálok|gratulálunk|congratulazioni|complimenti|おめでとう|おめでとうございます|축하해|축하해요|gratulerer|Gefeliciteerd|gratulacje|Parabéns|parabéns|felicitações|felicitări|мои поздравления|поздравляем|поздравляю|gratulujem|blahoželám|ยินดีด้วย|ขอแสดงความยินดี|tebrikler|tebrik ederim|恭喜|祝贺你|恭喜你|恭喜|恭喜|baie geluk|veels geluk|অভিনন্দন|Čestitam|Čestitke|Čestitamo|Συγχαρητήρια|Μπράβο|અભિનંદન|badhai|बधाई|अभिनंदन|Честитам|Свака част|hongera|வாழ்த்துகள்|வாழ்த்துக்கள்|అభినందనలు|അഭിനന്ദനങ്ങൾ|Chúc mừng|מזל טוב|mazel tov|mazal tov)(^|$|[^A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ])/i;function La(){const[e]=te.useLexicalComposerContext();h.useEffect(()=>{if(!e.hasNodes([Ye]))throw new Error("KeywordsPlugin: KeywordNode not registered on editor")},[e]);const t=h.useCallback(i=>Ws(i.getTextContent()),[]),s=h.useCallback(i=>{const o=Da.exec(i);if(o===null)return null;const a=o[2].length,r=o.index+o[1].length;return{end:r+a,start:r}},[]);return Ui.useLexicalTextEntity(s,Ye,t),null}function cs(){return n.jsx(Vi.LinkPlugin,{validateUrl:Ea})}function Pa(e){const t=e.getNodes();return t.length===0?new Set([e.anchor.getNode().getParentOrThrow(),e.focus.getNode().getParentOrThrow()]):new Set(t.map(s=>g.$isElementNode(s)?s:s.getParentOrThrow()))}function Fa(e){const t=g.$getSelection();if(!g.$isRangeSelection(t))return!1;const s=Pa(t);let i=0;for(const o of s)if(me.$isListNode(o))i=Math.max(me.$getListDepth(o)+1,i);else if(me.$isListItemNode(o)){const a=o.getParent();if(!me.$isListNode(a))throw new Error("ListMaxIndentLevelPlugin: A ListItemNode must have a ListNode for a parent.");i=Math.max(me.$getListDepth(a)+1,i)}return i<=e}function Ba({maxDepth:e}){const[t]=te.useLexicalComposerContext();return h.useEffect(()=>t.registerCommand(g.INDENT_CONTENT_COMMAND,()=>!Fa(e??7),g.COMMAND_PRIORITY_CRITICAL),[t,e]),null}function Ha({maxLength:e}){const[t]=te.useLexicalComposerContext();return h.useEffect(()=>{let s=null;return t.registerNodeTransform(g.RootNode,i=>{const o=g.$getSelection();if(!g.$isRangeSelection(o)||!o.isCollapsed())return;const a=t.getEditorState(),r=a.read(()=>i.getTextContentSize()),l=i.getTextContentSize();if(r!==l){const c=l-e,d=o.anchor;c>0&&(r===e&&s!==a?(s=a,ee.$restoreEditorState(t,a)):de.trimTextContentFromAnchor(t,d,c))}})},[t,e]),null}const za=1,Wa=100;let ci=0,ds=!1;function Ua(){window.addEventListener("keydown",e=>{e.keyCode===9&&(ci=e.timeStamp)},!0)}function Va(){const[e]=te.useLexicalComposerContext();return h.useEffect(()=>(ds||(Ua(),ds=!0),e.registerCommand(g.FOCUS_COMMAND,t=>{const s=g.$getSelection();return g.$isRangeSelection(s)&&ci+Wa>t.timeStamp&&g.$setSelection(s.clone()),!1},za)),[e]),null}const qa=["#d0021b","#f5a623","#f8e71c","#8b572a","#7ed321","#417505","#bd10e0","#9013fe","#4a90e2","#50e3c2","#b8e986","#000000","#4a4a4a","#9b9b9b","#ffffff"],ut=214,us=150,Ie={"color-picker-wrapper":"p-[20px]","color-picker-basic-color":"flex flex-wrap gap-[10px] m-0 p-0","color-picker-basic-color-button":"border-[1px] border-[solid] border-[#ccc] rounded-[4px] h-[16px] w-[16px] cursor-pointer list-none","color-picker-basic-color-button.active":"[box-shadow:0px_0px_2px_2px_rgba(0,_0,_0,_0.3)]","color-picker-saturation":"w-full relative mt-[15px] h-[150px] bg-[linear-gradient(transparent,_black),_linear-gradient(to_right,_white,_transparent)] select-none","color-picker-saturation_cursor":"absolute w-[20px] h-[20px] border-[2px] border-[solid] border-[#ffffff] rounded-[50%] [box-shadow:0_0_15px_#00000026] box-border -translate-x-[10px] -translate-y-[10px]","color-picker-hue":"w-full relative mt-[15px] h-[12px] bg-[linear-gradient(_to_right,_rgb(255,_0,_0),_rgb(255,_255,_0),_rgb(0,_255,_0),_rgb(0,_255,_255),_rgb(0,_0,_255),_rgb(255,_0,_255),_rgb(255,_0,_0)_)] select-none rounded-[12px]","color-picker-hue_cursor":"absolute w-[20px] h-[20px] border-[2px] border-[solid] border-[#ffffff] rounded-full [box-shadow:#0003_0_0_0_0.5px] box-border -translate-x-[10px] -translate-y-[4px]","color-picker-color":"border-[1px] border-[solid] border-[#ccc] mt-[15px] w-full h-[20px]"};function di({color:e,onChange:t}){const[s,i]=h.useState(nt("hex",e)),[o,a]=h.useState(e),r=h.useRef(null),l=h.useMemo(()=>({x:s.hsv.s/100*ut,y:(100-s.hsv.v)/100*us}),[s.hsv.s,s.hsv.v]),c=h.useMemo(()=>({x:s.hsv.h/360*ut}),[s.hsv]),d=m=>{if(a(m),/^#[0-9A-Fa-f]{6}$/i.test(m)){const f=nt("hex",m);i(f)}},u=({x:m,y:f})=>{const b={...s.hsv,s:m/ut*100,v:100-f/us*100},w=nt("hsv",b);i(w),a(w.hex)},p=({x:m})=>{const f={...s.hsv,h:m/ut*360},b=nt("hsv",f);i(b),a(b.hex)};return h.useEffect(()=>{r.current!==null&&t&&(t(s.hex),a(s.hex))},[s,t]),h.useEffect(()=>{if(e===void 0)return;const m=nt("hex",e);i(m),a(m.hex)},[e]),n.jsxs("div",{className:`${Ie["color-picker-wrapper"]}`,style:{width:ut},ref:r,children:[n.jsx(lt,{label:"Hex",onChange:d,value:o}),n.jsx("div",{className:`${Ie["color-picker-basic-color"]}`,children:qa.map(m=>n.jsx("button",{className:`${Ie["color-picker-basic-color-button"]} ${m===s.hex?Ie["color-picker-basic-color-button.active"]:""}`,style:{backgroundColor:m},onClick:()=>{a(m),i(nt("hex",m))}},m))}),n.jsx(ps,{className:`${Ie["color-picker-saturation"]}`,style:{backgroundColor:`hsl(${s.hsv.h}, 100%, 50%)`},onChange:u,children:n.jsx("div",{className:`${Ie["color-picker-saturation_cursor"]}`,style:{backgroundColor:s.hex,left:l.x,top:l.y}})}),n.jsx(ps,{className:`${Ie["color-picker-hue"]}`,onChange:p,children:n.jsx("div",{className:`${Ie["color-picker-hue_cursor"]}`,style:{backgroundColor:`hsl(${s.hsv.h}, 100%, 50%)`,left:c.x}})}),n.jsx("div",{className:`${Ie["color-picker-color"]}`,style:{backgroundColor:s.hex}})]})}function ps({className:e,style:t,onChange:s,children:i}){const o=h.useRef(null),a=l=>{if(o.current){const{current:c}=o,{width:d,height:u,left:p,top:m}=c.getBoundingClientRect(),f=ms(l.clientX-p,d,0),b=ms(l.clientY-m,u,0);s({x:f,y:b})}},r=l=>{if(l.button!==0)return;a(l);const c=u=>{a(u)},d=u=>{document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",d,!1),a(u)};document.addEventListener("mousemove",c,!1),document.addEventListener("mouseup",d,!1)};return n.jsx("div",{ref:o,className:e,style:t,onMouseDown:r,children:i})}function ms(e,t,s){return e>t?t:e<s?s:e}function hs(e){if(e.startsWith("#")){if(e.length===4||e.length===5)return e=e.split("").map((t,s)=>s?t+t:"#").join(""),e;if(e.length===7||e.length===9)return e}else{const t=document.createElement("canvas").getContext("2d");if(!t)throw new Error("2d context not supported or canvas already initialized");return t.fillStyle=e,t.fillStyle}return"#000000"}function fs(e){const t=(e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(s,i,o,a)=>"#"+i+i+o+o+a+a).substring(1).match(/.{2}/g)||[]).map(s=>parseInt(s,16));return{b:t[2],g:t[1],r:t[0]}}function ln({r:e,g:t,b:s}){e/=255,t/=255,s/=255;const i=Math.max(e,t,s),o=i-Math.min(e,t,s),a=o?(i===e?(t-s)/o+(t<s?6:0):i===t?2+(s-e)/o:4+(e-t)/o)*60:0,r=i?o/i*100:0,l=i*100;return{h:a,s:r,v:l}}function Ya({h:e,s:t,v:s}){t/=100,s/=100;const i=~~(e/60),o=e/60-i,a=s*(1-t),r=s*(1-t*o),l=s*(1-t*(1-o)),c=i%6,d=Math.round([s,r,a,a,l,s][c]*255),u=Math.round([l,s,s,r,a,a][c]*255);return{b:Math.round([a,a,l,s,s,r][c]*255),g:u,r:d}}function gs({b:e,g:t,r:s}){return"#"+[s,t,e].map(i=>i.toString(16).padStart(2,"0")).join("")}function nt(e,t){let s=hs("#121212"),i=fs(s),o=ln(i);return e==="hex"?(s=hs(t),i=fs(s),o=ln(i)):e==="rgb"?(i=t,s=gs(i),o=ln(i)):e==="hsv"&&(o=t,i=Ya(o),s=gs(i)),{hex:s,hsv:o,rgb:i}}function cn(e){const t=e.getShape();return{columns:t.toX-t.fromX+1,rows:t.toY-t.fromY+1}}function Ga(e){const t=e.getNodes(),s=[];let i=null,o=null,a=0;for(let r=0;r<t.length;r++){const l=t[r];if(L.$isTableCellNode(l)){const c=l.getParentOrThrow();if(ei(L.$isTableRowNode(c),"Expected CellNode to have a RowNode parent"),i!==c){if(o!==null&&a!==o)return!1;i!==null&&(o=a),i=c,a=0}const d=l.__colSpan;for(let u=0;u<d;u++)s[a+u]===void 0&&(s[a+u]=0),s[a+u]+=l.__rowSpan;a+=d}}return(o===null||a===o)&&s.every(r=>r===s[0])}function Ja(){const e=g.$getSelection();if(g.$isRangeSelection(e)&&!e.isCollapsed()||g.DEPRECATED_$isGridSelection(e)&&!e.anchor.is(e.focus)||!g.$isRangeSelection(e)&&!g.DEPRECATED_$isGridSelection(e))return!1;const[t]=g.DEPRECATED_$getNodeTriplet(e.anchor);return t.__colSpan>1||t.__rowSpan>1}function xs(e){if(e.getChildrenSize()!==1)return!1;const t=e.getFirstChildOrThrow();return!(!g.$isParagraphNode(t)||!t.isEmpty())}function Ka(e){const t=e.getLastDescendant();g.$isTextNode(t)?t.select():g.$isElementNode(t)?t.selectEnd():t!==null&&t.selectNext()}function bs(e){return e.getEditorState().read(()=>{const t=g.$getSelection();if(g.$isRangeSelection(t)||g.DEPRECATED_$isGridSelection(t)){const[s]=g.DEPRECATED_$getNodeTriplet(t.anchor);if(L.$isTableCellNode(s))return s.getBackgroundColor()}return null})}function Xa({onClose:e,tableCellNode:t,setIsMenuOpen:s,contextRef:i,cellMerge:o,showColorPickerModal:a}){const[r]=te.useLexicalComposerContext(),l=h.useRef(null),[c,d]=h.useState(t),[u,p]=h.useState({columns:1,rows:1}),[m,f]=h.useState(!1),[b,w]=h.useState(!1),[x,y]=h.useState(()=>bs(r)||"");h.useEffect(()=>r.registerMutationListener(L.TableCellNode,P=>{P.get(c.getKey())==="updated"&&(r.getEditorState().read(()=>{d(c.getLatest())}),y(bs(r)||""))}),[r,c]),h.useEffect(()=>{r.getEditorState().read(()=>{const P=g.$getSelection();if(g.DEPRECATED_$isGridSelection(P)){const F=cn(P);p(cn(P)),f(Ga(P)&&(F.columns>1||F.rows>1))}w(Ja())})},[r]),h.useEffect(()=>{const P=i.current,F=l.current,G=r.getRootElement();if(P!=null&&F!=null&&G!=null){const Y=G.getBoundingClientRect(),M=P.getBoundingClientRect();F.style.opacity="1";const D=F.getBoundingClientRect(),I=5;let z=M.right+I;if(z+D.width>window.innerWidth||z+D.width>Y.right){const V=M.left-D.width-I;z=(V<0?I:V)+window.pageXOffset}F.style.left=`${z+window.pageXOffset}px`;let U=M.top;if(U+D.height>window.innerHeight){const V=M.bottom-D.height;U=(V<0?I:V)+window.pageYOffset}F.style.top=`${U+ +window.pageYOffset}px`}},[i,l,r]),h.useEffect(()=>{function P(F){l.current!=null&&i.current!=null&&!l.current.contains(F.target)&&!i.current.contains(F.target)&&s(!1)}return window.addEventListener("click",P),()=>window.removeEventListener("click",P)},[s,i]);const v=h.useCallback(()=>{r.update(()=>{if(c.isAttached()){const F=L.$getTableNodeFromLexicalNodeOrThrow(c),G=r.getElementByKey(F.getKey());if(!G)throw new Error("Expected to find tableElement in DOM");const Y=L.getTableSelectionFromTableElement(G);Y!==null&&Y.clearHighlight(),F.markDirty(),d(c.getLatest())}g.$getRoot().selectStart()})},[r,c]),S=()=>{r.update(()=>{const P=g.$getSelection();if(g.DEPRECATED_$isGridSelection(P)){const{columns:F,rows:G}=cn(P),Y=P.getNodes();let M=null;for(let D=0;D<Y.length;D++){const I=Y[D];if(g.DEPRECATED_$isGridCellNode(I))if(M===null){I.setColSpan(F).setRowSpan(G),M=I;const z=xs(I);let U;z&&g.$isParagraphNode(U=I.getFirstChild())&&U.remove()}else g.DEPRECATED_$isGridCellNode(M)&&(xs(I)||M.append(...I.getChildren()),I.remove())}M!==null&&(M.getChildrenSize()===0&&M.append(g.$createParagraphNode()),Ka(M)),e()}})},_=()=>{r.update(()=>{L.$unmergeCell()})},j=h.useCallback(P=>{r.update(()=>{L.$insertTableRow__EXPERIMENTAL(P),e()})},[r,e]),N=h.useCallback(P=>{r.update(()=>{for(let F=0;F<u.columns;F++)L.$insertTableColumn__EXPERIMENTAL(P);e()})},[r,e,u.columns]),E=h.useCallback(()=>{r.update(()=>{L.$deleteTableRow__EXPERIMENTAL(),e()})},[r,e]),k=h.useCallback(()=>{r.update(()=>{L.$getTableNodeFromLexicalNodeOrThrow(c).remove(),v(),e()})},[r,c,v,e]),C=h.useCallback(()=>{r.update(()=>{L.$deleteTableColumn__EXPERIMENTAL(),e()})},[r,e]),$=h.useCallback(()=>{r.update(()=>{const P=L.$getTableNodeFromLexicalNodeOrThrow(c),F=L.$getTableRowIndexFromTableCellNode(c),G=P.getChildren();if(F>=G.length||F<0)throw new Error("Expected table cell to be inside of table row.");const Y=G[F];if(!L.$isTableRowNode(Y))throw new Error("Expected table row");Y.getChildren().forEach(M=>{if(!L.$isTableCellNode(M))throw new Error("Expected table cell");M.toggleHeaderStyle(L.TableCellHeaderStates.ROW)}),v(),e()})},[r,c,v,e]),A=h.useCallback(()=>{r.update(()=>{const P=L.$getTableNodeFromLexicalNodeOrThrow(c),F=L.$getTableColumnIndexFromTableCellNode(c),G=P.getChildren();for(let Y=0;Y<G.length;Y++){const M=G[Y];if(!L.$isTableRowNode(M))throw new Error("Expected table row");const D=M.getChildren();if(F>=D.length||F<0)throw new Error("Expected table cell to be inside of table row.");const I=D[F];if(!L.$isTableCellNode(I))throw new Error("Expected table cell");I.toggleHeaderStyle(L.TableCellHeaderStates.COLUMN)}v(),e()})},[r,c,v,e]),B=h.useCallback(P=>{r.update(()=>{const F=g.$getSelection();if(g.$isRangeSelection(F)||g.DEPRECATED_$isGridSelection(F)){const[G]=g.DEPRECATED_$getNodeTriplet(F.anchor);L.$isTableCellNode(G)&&G.setBackgroundColor(P)}})},[r]);let T=null;return o&&(m?T=n.jsx("button",{className:"item",onClick:()=>S(),"data-test-id":"table-merge-cells",children:"Merge cells"}):b&&(T=n.jsx("button",{className:"item",onClick:()=>_(),"data-test-id":"table-unmerge-cells",children:"Unmerge cells"}))),$e.createPortal(n.jsxs("div",{className:"dropdown",ref:l,onClick:P=>{P.stopPropagation()},children:[T,n.jsx("button",{className:"item",onClick:()=>a("Cell background color",()=>n.jsx(di,{color:x,onChange:B})),"data-test-id":"table-background-color",children:n.jsx("span",{className:"text",children:"Background color"})}),n.jsx("hr",{}),n.jsx("button",{className:"item",onClick:()=>j(!1),"data-test-id":"table-insert-row-above",children:n.jsxs("span",{className:"text",children:["Insert"," ",u.rows===1?"row":`${u.rows} rows`," ","above"]})}),n.jsx("button",{className:"item",onClick:()=>j(!0),"data-test-id":"table-insert-row-below",children:n.jsxs("span",{className:"text",children:["Insert"," ",u.rows===1?"row":`${u.rows} rows`," ","below"]})}),n.jsx("hr",{}),n.jsx("button",{className:"item",onClick:()=>N(!1),"data-test-id":"table-insert-column-before",children:n.jsxs("span",{className:"text",children:["Insert"," ",u.columns===1?"column":`${u.columns} columns`," ","left"]})}),n.jsx("button",{className:"item",onClick:()=>N(!0),"data-test-id":"table-insert-column-after",children:n.jsxs("span",{className:"text",children:["Insert"," ",u.columns===1?"column":`${u.columns} columns`," ","right"]})}),n.jsx("hr",{}),n.jsx("button",{className:"item",onClick:()=>C(),"data-test-id":"table-delete-columns",children:n.jsx("span",{className:"text",children:"Delete column"})}),n.jsx("button",{className:"item",onClick:()=>E(),"data-test-id":"table-delete-rows",children:n.jsx("span",{className:"text",children:"Delete row"})}),n.jsx("button",{className:"item",onClick:()=>k(),"data-test-id":"table-delete",children:n.jsx("span",{className:"text",children:"Delete table"})}),n.jsx("hr",{}),n.jsx("button",{className:"item",onClick:()=>$(),children:n.jsxs("span",{className:"text",children:[(c.__headerState&L.TableCellHeaderStates.ROW)===L.TableCellHeaderStates.ROW?"Remove":"Add"," ","row header"]})}),n.jsx("button",{className:"item",onClick:()=>A(),children:n.jsxs("span",{className:"text",children:[(c.__headerState&L.TableCellHeaderStates.COLUMN)===L.TableCellHeaderStates.COLUMN?"Remove":"Add"," ","column header"]})})]}),document.body)}function Za({anchorElem:e,cellMerge:t}){const[s]=te.useLexicalComposerContext(),i=h.useRef(null),o=h.useRef(null),[a,r]=h.useState(!1),[l,c]=h.useState(null),[d,u]=Ct(),p=h.useCallback(()=>{const f=i.current,b=g.$getSelection(),w=window.getSelection(),x=document.activeElement;if(b==null||f==null){c(null);return}const y=s.getRootElement();if(g.$isRangeSelection(b)&&y!==null&&w!==null&&y.contains(w.anchorNode)){const v=L.$getTableCellNodeFromLexicalNode(b.anchor.getNode());if(v==null){c(null);return}if(s.getElementByKey(v.getKey())==null){c(null);return}c(v)}else x||c(null)},[s]);h.useEffect(()=>s.registerUpdateListener(()=>{s.getEditorState().read(()=>{p()})})),h.useEffect(()=>{const f=i.current;if(f!=null&&l!=null){const b=s.getElementByKey(l.getKey());if(b!=null){const w=b.getBoundingClientRect(),x=f.getBoundingClientRect(),y=e.getBoundingClientRect(),v=w.top-y.top+4,S=w.right-x.width-10-y.left;f.style.opacity="1",f.style.transform=`translate(${S}px, ${v}px)`}else f.style.opacity="0",f.style.transform="translate(-10000px, -10000px)"}},[i,l,s,e]);const m=h.useRef(l);return h.useEffect(()=>{m.current!==l&&r(!1),m.current=l},[m,l]),n.jsx("div",{className:"table-cell-action-button-container",ref:i,children:l!=null&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"table-cell-action-button chevron-down",onClick:f=>{f.stopPropagation(),r(!a)},ref:o,children:n.jsx("i",{className:"chevron-down"})}),d,a&&n.jsx(Xa,{contextRef:o,setIsMenuOpen:r,onClose:()=>r(!1),tableCellNode:l,cellMerge:t,showColorPickerModal:u})]})})}function Qa({anchorElem:e=document.body,cellMerge:t=!1}){const s=Os();return $e.createPortal(s?n.jsx(Za,{anchorElem:e,cellMerge:t}):null,e)}const el=33,tl=50;function nl({editor:e}){const t=h.useRef(null),s=h.useRef(null),i=h.useRef(null),o=h.useRef(null),[a,r]=h.useState(null),[l,c]=h.useState(null),[d,u]=h.useState(!1),[p,m]=h.useState(null);h.useEffect(()=>e.registerCommand(g.SELECTION_CHANGE_COMMAND,j=>{const N=g.$getSelection(),E=L.$isTableSelection(N);return d!==E&&u(E),!1},g.COMMAND_PRIORITY_HIGH));const f=h.useCallback(()=>{c(null),t.current=null,m(null),o.current=null,i.current=null},[]);h.useEffect(()=>{const j=N=>{setTimeout(()=>{const E=N.target;if(p){r({x:N.clientX,y:N.clientY});return}if(!(s.current&&s.current.contains(E))&&t.current!==E){t.current=E;const k=L.getDOMCellFromTarget(E);k&&l!==k?e.update(()=>{const C=g.$getNearestNodeFromDOMNode(k.elem);if(!C)throw new Error("TableCellResizer: Table cell node not found.");const $=L.$getTableNodeFromLexicalNodeOrThrow(C),A=e.getElementByKey($.getKey());if(!A)throw new Error("TableCellResizer: Table element not found.");t.current=E,i.current=A.getBoundingClientRect(),c(k)}):k==null&&f()}},0)};return document.addEventListener("mousemove",j),()=>{document.removeEventListener("mousemove",j)}},[l,p,e,f]);const b=j=>j==="bottom",w=h.useCallback(j=>{if(!l)throw new Error("TableCellResizer: Expected active cell.");e.update(()=>{const N=g.$getNearestNodeFromDOMNode(l.elem);if(!L.$isTableCellNode(N))throw new Error("TableCellResizer: Table cell node not found.");const E=L.$getTableNodeFromLexicalNodeOrThrow(N),k=L.$getTableRowIndexFromTableCellNode(N),C=E.getChildren();if(k>=C.length||k<0)throw new Error("Expected table cell to be inside of table row.");const $=C[k];if(!L.$isTableRowNode($))throw new Error("Expected table row");$.setHeight(j)})},[l,e]),x=h.useCallback(j=>{if(!l)throw new Error("TableCellResizer: Expected active cell.");e.update(()=>{const N=g.$getNearestNodeFromDOMNode(l.elem);if(!L.$isTableCellNode(N))throw new Error("TableCellResizer: Table cell node not found.");const E=L.$getTableNodeFromLexicalNodeOrThrow(N),k=L.$getTableColumnIndexFromTableCellNode(N),C=E.getChildren();for(let $=0;$<C.length;$++){const A=C[$];if(!L.$isTableRowNode(A))throw new Error("Expected table row");const B=A.getChildren(),F=B.map(Y=>Y.getColSpan()).reduce((Y,M)=>{const D=Y[Y.length-1]??0;return Y.push(D+M),Y},[]).findIndex(Y=>Y>k);if(F>=B.length||F<0)throw new Error("Expected table cell to be inside of table row.");const G=B[F];if(!L.$isTableCellNode(G))throw new Error("Expected table cell");G.setWidth(j)}})},[l,e]),y=h.useCallback(j=>{const N=E=>{if(E.preventDefault(),E.stopPropagation(),!l)throw new Error("TableCellResizer: Expected active cell.");if(o.current){const{x:k,y:C}=o.current;if(l===null)return;if(b(j)){const $=l.elem.getBoundingClientRect().height,A=Math.abs(E.clientY-C),B=j==="bottom"&&C>E.clientY;w(Math.max(B?$-A:A+$,el))}else{const $=getComputedStyle(l.elem);let A=l.elem.clientWidth;A-=parseFloat($.paddingLeft)+parseFloat($.paddingRight);const B=Math.abs(E.clientX-k),T=j==="right"&&k>E.clientX;x(Math.max(T?A-B:B+A,tl))}f(),document.removeEventListener("mouseup",N)}};return N},[l,f,x,w]),v=h.useCallback(j=>N=>{if(N.preventDefault(),N.stopPropagation(),!l)throw new Error("TableCellResizer: Expected active cell.");o.current={x:N.clientX,y:N.clientY},r(o.current),m(j),document.addEventListener("mouseup",y(j))},[l,y]),_=h.useCallback(()=>{if(l){const{height:j,width:N,top:E,left:k}=l.elem.getBoundingClientRect(),C={bottom:{backgroundColor:"none",cursor:"row-resize",height:"10px",left:`${window.pageXOffset+k}px`,top:`${window.pageYOffset+E+j}px`,width:`${N}px`},right:{backgroundColor:"none",cursor:"col-resize",height:`${j}px`,left:`${window.pageXOffset+k+N}px`,top:`${window.pageYOffset+E}px`,width:"10px"}},$=i.current;return p&&a&&$&&(b(p)?(C[p].left=`${window.pageXOffset+$.left}px`,C[p].top=`${window.pageYOffset+a.y}px`,C[p].height="3px",C[p].width=`${$.width}px`):(C[p].top=`${window.pageYOffset+$.top}px`,C[p].left=`${window.pageXOffset+a.x}px`,C[p].width="3px",C[p].height=`${$.height}px`),C[p].backgroundColor="#adf"),C}return{bottom:null,left:null,right:null,top:null}},[l,p,a])();return n.jsx("div",{ref:s,children:l!=null&&!d&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"TableCellResizer__resizer TableCellResizer__ui",style:_.right||void 0,onMouseDown:v("right")}),n.jsx("div",{className:"TableCellResizer__resizer TableCellResizer__ui",style:_.bottom||void 0,onMouseDown:v("bottom")})]})})}function sl(){const[e]=te.useLexicalComposerContext(),t=Os();return h.useMemo(()=>t?$e.createPortal(n.jsx(nl,{editor:e}),document.body):null,[e,t])}const Bt=624,ui=9;function il(e){if(e==="h2")return"heading2";if(e==="h3")return"heading3"}function ol(e){const t=e==null?void 0:e.getClientRects()[0].y;return t>=Bt&&t<=Bt+ui}function It(e){return(e==null?void 0:e.getClientRects()[0].y)<Bt}function dn(e){return(e==null?void 0:e.getClientRects()[0].y)>=Bt+ui}function rl({tableOfContents:e}){const[t,s]=h.useState(""),i=h.useRef(0),[o]=te.useLexicalComposerContext();function a(r,l){o.getEditorState().read(()=>{const c=o.getElementByKey(r);c!==null&&(c.scrollIntoView(),s(r),i.current=l)})}return h.useEffect(()=>{function r(){if(e.length!==0&&i.current<e.length-1){let u=o.getElementByKey(e[i.current][0]);if(u!==null){if(dn(u)){for(;u!==null&&dn(u)&&i.current>0;){const m=o.getElementByKey(e[i.current-1][0]);m!==null&&(It(m)||dn(m))&&i.current--,u=m}const p=e[i.current][0];s(p)}else if(It(u)){for(;u!==null&&It(u)&&i.current<e.length-1;){const m=o.getElementByKey(e[i.current+1][0]);m!==null&&(ol(m)||It(m))&&i.current++,u=m}const p=e[i.current][0];s(p)}}}else i.current=0}let l;function c(u,p){clearTimeout(l),l=setTimeout(u,p)}function d(){c(r,10)}return document.addEventListener("scroll",d),()=>document.removeEventListener("scroll",d)},[e,o]),n.jsx("div",{className:"table-of-contents",children:n.jsx("ul",{className:"headings",children:e.map(([r,l,c],d)=>d===0?n.jsxs("div",{className:"normal-heading-wrapper",children:[n.jsx("div",{className:"first-heading",onClick:()=>a(r,d),role:"button",tabIndex:0,children:(""+l).length>20?l.substring(0,20)+"...":l}),n.jsx("br",{})]},r):n.jsx("div",{className:`normal-heading-wrapper ${t===r?"selected-heading-wrapper":""}`,children:n.jsx("div",{onClick:()=>a(r,d),role:"button",className:il(c),tabIndex:0,children:n.jsx("li",{className:`normal-heading ${t===r?"selected-heading":""}
                    `,children:(""+l).length>27?l.substring(0,27)+"...":l})})},r))})})}function al(){return n.jsx(qi,{children:e=>n.jsx(rl,{tableOfContents:e})})}const ll=Nt&&"documentMode"in document?document.documentMode:null,ys=Nt&&/Mac|iPod|iPhone|iPad/.test(navigator.platform);Nt&&"InputEvent"in window&&!ll&&"getTargetRanges"in new window.InputEvent("input");const pi=h.createContext(null),ws=4;function X({children:e,className:t,onClick:s,title:i}){const o=h.useRef(null),a=h.useContext(pi);if(a===null)throw new Error("DropDownItem must be used within a DropDown");const{registerItem:r}=a;return h.useEffect(()=>{o&&o.current&&r(o)},[o,r]),n.jsx("button",{className:t,onClick:s,ref:o,title:i,type:"button",children:e})}function cl({children:e,dropDownRef:t,onClose:s}){const[i,o]=h.useState(),[a,r]=h.useState(),l=h.useCallback(u=>{o(p=>p?[...p,u]:[u])},[o]),c=u=>{if(!i)return;const p=u.key;["Escape","ArrowUp","ArrowDown","Tab"].includes(p)&&u.preventDefault(),p==="Escape"||p==="Tab"?s():p==="ArrowUp"?r(m=>{if(!m)return i[0];const f=i.indexOf(m)-1;return i[f===-1?i.length-1:f]}):p==="ArrowDown"&&r(m=>m?i[i.indexOf(m)+1]:i[0])},d=h.useMemo(()=>({registerItem:l}),[l]);return h.useEffect(()=>{i&&!a&&r(i[0]),a&&a.current&&a.current.focus()},[i,a]),n.jsx(pi.Provider,{value:d,children:n.jsx("div",{className:"dropdown",ref:t,onKeyDown:c,children:e})})}function Ve({disabled:e=!1,buttonLabel:t,buttonAriaLabel:s,buttonClassName:i,buttonIconClassName:o,children:a,stopCloseOnClickSelf:r}){const l=h.useRef(null),c=h.useRef(null),[d,u]=h.useState(!1),p=()=>{u(!1),c&&c.current&&c.current.focus()};return h.useEffect(()=>{const m=c.current,f=l.current;if(d&&m!==null&&f!==null){const{top:b,left:w}=m.getBoundingClientRect();f.style.top=`${b+m.offsetHeight+ws}px`,f.style.left=`${Math.min(w,window.innerWidth-f.offsetWidth-20)}px`}},[l,c,d]),h.useEffect(()=>{const m=c.current;if(m!==null&&d){const f=b=>{const w=b.target;r&&l.current&&l.current.contains(w)||m.contains(w)||u(!1)};return document.addEventListener("click",f),()=>{document.removeEventListener("click",f)}}},[l,c,d,r]),h.useEffect(()=>{const m=()=>{if(d){const f=c.current,b=l.current;if(f!==null&&b!==null){const{top:w}=f.getBoundingClientRect(),x=w+f.offsetHeight+ws;x!==b.getBoundingClientRect().top&&(b.style.top=`${x}px`)}}};return document.addEventListener("scroll",m),()=>{document.removeEventListener("scroll",m)}},[c,l,d]),n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",disabled:e,"aria-label":s||t,className:i,onClick:()=>u(!d),ref:c,children:[o&&n.jsx("span",{className:o}),t&&n.jsx("span",{className:"text dropdown-button-text",children:t}),n.jsx("i",{className:"chevron-down"})]}),d&&$e.createPortal(n.jsx(cl,{dropDownRef:l,onClose:p,children:a}),document.body)]})}function vs({disabled:e=!1,stopCloseOnClickSelf:t=!0,color:s,onChange:i,...o}){return n.jsx(Ve,{...o,disabled:e,stopCloseOnClickSelf:t,children:n.jsx(di,{color:s,onChange:i})})}const yn={bullet:"Bulleted List",check:"Check List",code:"Code Block",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",number:"Numbered List",paragraph:"Normal",quote:"Quote"};function dl(){const e=[];for(const[t,s]of Object.entries(he.CODE_LANGUAGE_FRIENDLY_NAME_MAP))e.push([t,s]);return e}const ul=dl(),pt={center:{icon:"center-align",iconRTL:"right-align",name:"Center Align"},end:{icon:"right-align",iconRTL:"left-align",name:"End Align"},justify:{icon:"justify-align",iconRTL:"justify-align",name:"Justify Align"},left:{icon:"left-align",iconRTL:"left-align",name:"Left Align"},right:{icon:"right-align",iconRTL:"left-align",name:"Right Align"},start:{icon:"left-align",iconRTL:"right-align",name:"Start Align"}};function be(e){return e?"active dropdown-item-active":""}function pl({editor:e,blockType:t,rootType:s,disabled:i=!1}){const o=()=>{e.update(()=>{const p=g.$getSelection();g.$isRangeSelection(p)&&de.$setBlocksType(p,()=>g.$createParagraphNode())})},a=p=>{t!==p&&e.update(()=>{const m=g.$getSelection();de.$setBlocksType(m,()=>Ce.$createHeadingNode(p))})},r=()=>{t!=="bullet"?e.dispatchCommand(me.INSERT_UNORDERED_LIST_COMMAND,void 0):o()},l=()=>{t!=="check"?e.dispatchCommand(me.INSERT_CHECK_LIST_COMMAND,void 0):o()},c=()=>{t!=="number"?e.dispatchCommand(me.INSERT_ORDERED_LIST_COMMAND,void 0):o()},d=()=>{t!=="quote"&&e.update(()=>{const p=g.$getSelection();de.$setBlocksType(p,()=>Ce.$createQuoteNode())})},u=()=>{t!=="code"&&e.update(()=>{let p=g.$getSelection();if(p!==null)if(p.isCollapsed())de.$setBlocksType(p,()=>he.$createCodeNode());else{const m=p.getTextContent(),f=he.$createCodeNode();p.insertNodes([f]),p=g.$getSelection(),g.$isRangeSelection(p)&&p.insertRawText(m)}})};return n.jsxs(Ve,{disabled:i,buttonClassName:"toolbar-item block-controls",buttonIconClassName:"icon block-type "+t,buttonLabel:yn[t],buttonAriaLabel:"Formatting options for text style",children:[n.jsxs(X,{className:"item "+be(t==="paragraph"),onClick:o,children:[n.jsx("i",{className:"icon paragraph"}),n.jsx("span",{className:"text",children:"Normal"})]}),n.jsxs(X,{className:"item "+be(t==="h1"),onClick:()=>a("h1"),children:[n.jsx("i",{className:"icon h1"}),n.jsx("span",{className:"text",children:"Heading 1"})]}),n.jsxs(X,{className:"item "+be(t==="h2"),onClick:()=>a("h2"),children:[n.jsx("i",{className:"icon h2"}),n.jsx("span",{className:"text",children:"Heading 2"})]}),n.jsxs(X,{className:"item "+be(t==="h3"),onClick:()=>a("h3"),children:[n.jsx("i",{className:"icon h3"}),n.jsx("span",{className:"text",children:"Heading 3"})]}),n.jsxs(X,{className:"item "+be(t==="h4"),onClick:()=>a("h4"),children:[n.jsx("i",{className:"icon h4"}),n.jsx("span",{className:"text",children:"Heading 4"})]}),n.jsxs(X,{className:"item "+be(t==="bullet"),onClick:r,children:[n.jsx("i",{className:"icon bullet-list"}),n.jsx("span",{className:"text",children:"Bullet List"})]}),n.jsxs(X,{className:"item "+be(t==="number"),onClick:c,children:[n.jsx("i",{className:"icon numbered-list"}),n.jsx("span",{className:"text",children:"Numbered List"})]}),n.jsxs(X,{className:"item "+be(t==="check"),onClick:l,children:[n.jsx("i",{className:"icon check-list"}),n.jsx("span",{className:"text",children:"Check List"})]}),n.jsxs(X,{className:"item "+be(t==="quote"),onClick:d,children:[n.jsx("i",{className:"icon quote"}),n.jsx("span",{className:"text",children:"Quote"})]}),n.jsxs(X,{className:"item "+be(t==="code"),onClick:u,children:[n.jsx("i",{className:"icon code"}),n.jsx("span",{className:"text",children:"Code Block"})]})]})}function st(){return n.jsx("div",{className:"divider"})}function ml({editor:e,value:t,isRTL:s,disabled:i=!1}){const o=pt[t||"left"];return n.jsxs(Ve,{disabled:i,buttonLabel:o.name,buttonIconClassName:`icon ${s?o.iconRTL:o.icon}`,buttonClassName:"toolbar-item spaced alignment",buttonAriaLabel:"Formatting options for text alignment",children:[n.jsxs(X,{onClick:()=>{e.dispatchCommand(g.FORMAT_ELEMENT_COMMAND,"left")},className:"item",children:[n.jsx("i",{className:"icon left-align"}),n.jsx("span",{className:"text",children:"Left Align"})]}),n.jsxs(X,{onClick:()=>{e.dispatchCommand(g.FORMAT_ELEMENT_COMMAND,"center")},className:"item",children:[n.jsx("i",{className:"icon center-align"}),n.jsx("span",{className:"text",children:"Center Align"})]}),n.jsxs(X,{onClick:()=>{e.dispatchCommand(g.FORMAT_ELEMENT_COMMAND,"right")},className:"item",children:[n.jsx("i",{className:"icon right-align"}),n.jsx("span",{className:"text",children:"Right Align"})]}),n.jsxs(X,{onClick:()=>{e.dispatchCommand(g.FORMAT_ELEMENT_COMMAND,"justify")},className:"item",children:[n.jsx("i",{className:"icon justify-align"}),n.jsx("span",{className:"text",children:"Justify Align"})]}),n.jsxs(X,{onClick:()=>{e.dispatchCommand(g.FORMAT_ELEMENT_COMMAND,"start")},className:"item",children:[n.jsx("i",{className:`icon ${s?pt.start.iconRTL:pt.start.icon}`}),n.jsx("span",{className:"text",children:"Start Align"})]}),n.jsxs(X,{onClick:()=>{e.dispatchCommand(g.FORMAT_ELEMENT_COMMAND,"end")},className:"item",children:[n.jsx("i",{className:`icon ${s?pt.end.iconRTL:pt.end.icon}`}),n.jsx("span",{className:"text",children:"End Align"})]}),n.jsx(st,{}),n.jsxs(X,{onClick:()=>{e.dispatchCommand(g.OUTDENT_CONTENT_COMMAND,void 0)},className:"item",children:[n.jsx("i",{className:"icon "+(s?"indent":"outdent")}),n.jsx("span",{className:"text",children:"Outdent"})]}),n.jsxs(X,{onClick:()=>{e.dispatchCommand(g.INDENT_CONTENT_COMMAND,void 0)},className:"item",children:[n.jsx("i",{className:"icon "+(s?"outdent":"indent")}),n.jsx("span",{className:"text",children:"Indent"})]})]})}function hl({setIsLinkEditMode:e}){const[t]=te.useLexicalComposerContext(),[s,i]=h.useState(t),[o,a]=h.useState("paragraph"),[r,l]=h.useState("root"),[c,d]=h.useState(null),[u,p]=h.useState("15px"),[m,f]=h.useState("#000"),[b,w]=h.useState("#dfe6ef"),[x,y]=h.useState("Arial"),[v,S]=h.useState("left"),[_,j]=h.useState(!1),[N,E]=h.useState(!1),[k,C]=h.useState(!1),[$,A]=h.useState(!1),[B,T]=h.useState(!1),[P,F]=h.useState(!1),[G,Y]=h.useState(!1),[M,D]=h.useState(!1),[I,z]=h.useState(!1),[U,V]=h.useState(!1),[Z,R]=Ct(),[q,K]=h.useState(!1),[ge,et]=h.useState(""),[ne,St]=h.useState(()=>t.isEditable()),tt=h.useCallback(()=>{const H=g.$getSelection();if(g.$isRangeSelection(H)){const Q=H.anchor.getNode();let ie=Q.getKey()==="root"?Q:ee.$findMatchingParent(Q,ve=>{const _e=ve.getParent();return _e!==null&&g.$isRootOrShadowRoot(_e)});ie===null&&(ie=Q.getTopLevelElementOrThrow());const le=ie.getKey(),J=s.getElementByKey(le);E(H.hasFormat("bold")),C(H.hasFormat("italic")),A(H.hasFormat("underline")),T(H.hasFormat("strikethrough")),F(H.hasFormat("subscript")),Y(H.hasFormat("superscript")),D(H.hasFormat("code")),K(de.$isParentElementRTL(H));const we=wt(H),ke=we.getParent();ae.$isLinkNode(ke)||ae.$isLinkNode(we)?j(!0):j(!1);const ze=ee.$findMatchingParent(we,L.$isTableNode);if(L.$isTableNode(ze)?l("table"):l("root"),J!==null)if(d(le),me.$isListNode(ie)){const ve=ee.$getNearestNodeOfType(Q,me.ListNode),_e=ve?ve.getListType():ie.getListType();a(_e)}else{const ve=Ce.$isHeadingNode(ie)?ie.getTag():ie.getType();if(ve in yn&&a(ve),he.$isCodeNode(ie)){const _e=ie.getLanguage();et(_e?he.CODE_LANGUAGE_MAP[_e]||_e:"");return}}p(de.$getSelectionStyleValueForProperty(H,"font-size","15px")),f(de.$getSelectionStyleValueForProperty(H,"color","#000")),w(de.$getSelectionStyleValueForProperty(H,"background-color","#dfe6ef")),y(de.$getSelectionStyleValueForProperty(H,"font-family","Arial")),S((g.$isElementNode(we)?we.getFormatType():ke==null?void 0:ke.getFormatType())||"left")}},[s]);h.useEffect(()=>t.registerCommand(g.SELECTION_CHANGE_COMMAND,(H,Q)=>(tt(),i(Q),!1),g.COMMAND_PRIORITY_CRITICAL),[t,tt]),h.useEffect(()=>(ne!==t.isEditable()&&St(t.isEditable()),ee.mergeRegister(t.registerEditableListener(H=>{St(H)}),s.registerUpdateListener(({editorState:H})=>{H.read(()=>{tt()})}),s.registerCommand(g.CAN_UNDO_COMMAND,H=>(z(H),!1),g.COMMAND_PRIORITY_CRITICAL),s.registerCommand(g.CAN_REDO_COMMAND,H=>(V(H),!1),g.COMMAND_PRIORITY_CRITICAL))),[tt,s,t]),h.useEffect(()=>s.registerCommand(g.KEY_MODIFIER_COMMAND,H=>{const Q=H,{code:ie,ctrlKey:le,metaKey:J}=Q;return ie==="KeyK"&&(le||J)?(Q.preventDefault(),e(!_),s.dispatchCommand(ae.TOGGLE_LINK_COMMAND,Ft("https://"))):!1},g.COMMAND_PRIORITY_NORMAL),[s,_,e]);const Se=h.useCallback((H,Q)=>{s.update(()=>{const ie=g.$getSelection();ie!==null&&de.$patchStyleText(ie,H)},Q?{tag:"historic"}:{})},[s]),Qt=h.useCallback(()=>{s.update(()=>{const H=g.$getSelection();if(g.$isRangeSelection(H)){const Q=H.anchor,ie=H.focus,le=H.getNodes();if(Q.key===ie.key&&Q.offset===ie.offset)return;le.forEach((J,we)=>{g.$isTextNode(J)?(we===0&&Q.offset!==0&&(J=J.splitText(Q.offset)[1]||J),we===le.length-1&&(J=J.splitText(ie.offset)[0]||J),J.__style!==""&&J.setStyle(""),J.__format!==0&&(J.setFormat(0),ee.$getNearestBlockElementAncestorOrThrow(J).setFormat(""))):Ce.$isHeadingNode(J)||Ce.$isQuoteNode(J)?J.replace(g.$createParagraphNode(),!0):_n.$isDecoratorBlockNode(J)&&J.setFormat("")})}})},[s]),kt=h.useCallback(H=>{Se({color:H})},[Se]),$t=h.useCallback(H=>{Se({"background-color":H}),Se({padding:"4px 12px"}),Se({border:"1px solid"}),Se({"border-color":"#60a5fa"}),Se({"border-radius":"8px"})},[Se]);h.useCallback(()=>{_?t.dispatchCommand(ae.TOGGLE_LINK_COMMAND,null):t.dispatchCommand(ae.TOGGLE_LINK_COMMAND,Ft("https://"))},[t,_]);const Mt=h.useCallback(H=>{s.update(()=>{if(c!==null){const Q=g.$getNodeByKey(c);he.$isCodeNode(Q)&&Q.setLanguage(H)}})},[s,c]);return ne?n.jsxs("div",{className:"toolbar",children:[n.jsx("button",{disabled:!I||!ne,onClick:()=>{s.dispatchCommand(g.UNDO_COMMAND,void 0)},title:ys?"Undo (⌘Z)":"Undo (Ctrl+Z)",type:"button",className:"toolbar-item spaced","aria-label":"Undo",children:n.jsx("i",{className:"format undo"})}),n.jsx("button",{disabled:!U||!ne,onClick:()=>{s.dispatchCommand(g.REDO_COMMAND,void 0)},title:ys?"Redo (⌘Y)":"Redo (Ctrl+Y)",type:"button",className:"toolbar-item","aria-label":"Redo",children:n.jsx("i",{className:"format redo"})}),n.jsx(st,{}),o in yn&&s===t&&n.jsxs(n.Fragment,{children:[n.jsx(pl,{disabled:!ne,blockType:o,rootType:r,editor:t}),n.jsx(st,{})]}),o==="code"?n.jsx(Ve,{disabled:!ne,buttonClassName:"toolbar-item code-language",buttonLabel:he.getLanguageFriendlyName(ge),buttonAriaLabel:"Select language",children:ul.map(([H,Q])=>n.jsx(X,{className:`item ${be(H===ge)}`,onClick:()=>Mt(H),children:n.jsx("span",{className:"text",children:Q})},H))}):n.jsxs(n.Fragment,{children:[n.jsx(vs,{disabled:!ne,buttonClassName:"toolbar-item color-picker",buttonAriaLabel:"Formatting text color",buttonIconClassName:"icon font-color",color:m,onChange:kt,title:"text color"}),n.jsx(vs,{disabled:!ne,buttonClassName:"toolbar-item color-picker",buttonAriaLabel:"Formatting background color",buttonIconClassName:"icon bg-color",color:b,onChange:$t,title:"bg color"}),n.jsxs(Ve,{disabled:!ne,buttonClassName:"toolbar-item spaced",buttonLabel:"",buttonAriaLabel:"Formatting options for additional text styles",buttonIconClassName:"icon dropdown-more",children:[n.jsxs(X,{onClick:()=>{s.dispatchCommand(g.FORMAT_TEXT_COMMAND,"strikethrough")},className:"item "+be(B),title:"Strikethrough","aria-label":"Format text with a strikethrough",children:[n.jsx("i",{className:"icon strikethrough"}),n.jsx("span",{className:"text",children:"Strikethrough"})]}),n.jsxs(X,{onClick:()=>{s.dispatchCommand(g.FORMAT_TEXT_COMMAND,"subscript")},className:"item "+be(P),title:"Subscript","aria-label":"Format text with a subscript",children:[n.jsx("i",{className:"icon subscript"}),n.jsx("span",{className:"text",children:"Subscript"})]}),n.jsxs(X,{onClick:()=>{s.dispatchCommand(g.FORMAT_TEXT_COMMAND,"superscript")},className:"item "+be(G),title:"Superscript","aria-label":"Format text with a superscript",children:[n.jsx("i",{className:"icon superscript"}),n.jsx("span",{className:"text",children:"Superscript"})]}),n.jsxs(X,{onClick:Qt,className:"item",title:"Clear text formatting","aria-label":"Clear all text formatting",children:[n.jsx("i",{className:"icon clear"}),n.jsx("span",{className:"text",children:"Clear Formatting"})]})]}),n.jsx(st,{}),r==="table"&&n.jsxs(n.Fragment,{children:[n.jsx(Ve,{disabled:!ne,buttonClassName:"toolbar-item spaced",buttonLabel:"Table",buttonAriaLabel:"Open table toolkit",buttonIconClassName:"icon table secondary",children:n.jsx(X,{onClick:()=>{},className:"item",children:n.jsx("span",{className:"text",children:"TODO"})})}),n.jsx(st,{})]}),n.jsxs(Ve,{disabled:!ne,buttonClassName:"toolbar-item spaced",buttonLabel:"Insert",buttonAriaLabel:"Insert specialized editor node",buttonIconClassName:"icon plus",children:[n.jsxs(X,{onClick:()=>{s.dispatchCommand(ot.INSERT_HORIZONTAL_RULE_COMMAND,void 0)},className:"item",children:[n.jsx("i",{className:"icon horizontal-rule"}),n.jsx("span",{className:"text",children:"Horizontal Rule"})]}),n.jsxs(X,{onClick:()=>{R("Insert Image",H=>n.jsx(Xs,{activeEditor:s,onClose:H}))},className:"item",children:[n.jsx("i",{className:"icon image"}),n.jsx("span",{className:"text",children:"Image"})]}),n.jsxs(X,{onClick:()=>{R("Insert Table",H=>n.jsx(ri,{activeEditor:s,onClose:H}))},className:"item",children:[n.jsx("i",{className:"icon table"}),n.jsx("span",{className:"text",children:"Table"})]}),n.jsxs(X,{onClick:()=>{R("Insert Table",H=>n.jsx(na,{activeEditor:s,onClose:H}))},className:"item",children:[n.jsx("i",{className:"icon table"}),n.jsx("span",{className:"text",children:"Table (Experimental)"})]}),n.jsxs(X,{onClick:()=>{t.dispatchCommand(Rn,void 0)},className:"item",children:[n.jsx("i",{className:"icon caret-right"}),n.jsx("span",{className:"text",children:"Collapsible container"})]})]})]}),n.jsx(st,{}),n.jsx(ml,{disabled:!ne,value:v,editor:t,isRTL:q}),Z]}):n.jsx("div",{className:"toolbar"})}function fl(){const[e]=te.useLexicalComposerContext();return n.jsx(Yi.TreeView,{viewClassName:"tree-view-output",treeTypeButtonClassName:"debug-treetype-button",timeTravelPanelClassName:"debug-timetravel-panel",timeTravelButtonClassName:"debug-timetravel-button",timeTravelPanelSliderClassName:"debug-timetravel-panel-slider",timeTravelPanelButtonClassName:"debug-timetravel-panel-button",editor:e})}const mi={blockCursor:"block pointer-events-none absolute content-['']  after:absolute after:-top-[2px] after:w-[20px] after:border-t-[1px_solid_black]",characterLimit:"inline !bg-[#ffbbbb]",code:"bg-[rgb(240,_242,_245)] font-[Menlo,_Consolas,_Monaco,_monospace] block pl-[52px] pr-[8px] py-[8px] leading-[1.53] text-[13px] m-0 mt-[8px] mb-[8px] [tab-size:2] relative after:content-[attr(data-gutter)] after:absolute after:bg-[#eee] after:left-[0] after:top-[0] after:border-r-[1px_solid_#ccc] after:p-[8px] after:text-[#777] after:whitespace-pre-wrap after:text-right after:min-w-[25px]",codeHighlight:{atrule:"text-[#07a]",attr:"text-[#07a]",boolean:"text-[#905]",builtin:"text-[#690]",cdata:"text-[slategray]",char:"text-[#690]",class:"text-[#dd4a68]","class-name":"text-[#dd4a68]",comment:"text-[slategray]",constant:"text-[#905]",deleted:"text-[#905]",doctype:"text-[slategray]",entity:"text-[#9a6e3a]",function:"text-[#dd4a68]",important:"text-[#e90]",inserted:"text-[#690]",keyword:"text-[#07a]",namespace:"text-[#e90]",number:"text-[#905]",operator:"text-[#9a6e3a]",prolog:"text-[slategray]",property:"text-[#905]",punctuation:"text-[#999]",regex:"text-[#e90]",selector:"text-[#690]",string:"text-[#690]",symbol:"text-[#905]",tag:"text-[#905]",url:"text-[#9a6e3a]",variable:"text-[#e90]"},embedBlock:{base:"select-none",focus:"outline-[2px_solid_rgb(60,_132,_244)]"},hashtag:"bg-[rgba(88,_144,_255,_0.15)] border-b-[1px_solid_rgba(88,_144,_255,_0.3)]",heading:{h1:"font-semibold text-2xl scroll-mt-36 font-display",h2:"font-medium text-xl scroll-mt-36 font-display",h3:"font-medium text-lg scroll-mt-36 font-display",h4:"font-medium scroll-mt-36 font-display",h5:"scroll-mt-36 font-display",h6:"scroll-mt-36 font-display"},image:"editor-image",indent:"PlaygroundEditorTheme__indent",inlineImage:"inline-editor-image",link:"PlaygroundEditorTheme__link",list:{listitem:"PlaygroundEditorTheme__listItem",listitemChecked:"PlaygroundEditorTheme__listItemChecked",listitemUnchecked:"PlaygroundEditorTheme__listItemUnchecked",nested:{listitem:"PlaygroundEditorTheme__nestedListItem"},olDepth:["PlaygroundEditorTheme__ol1 list-decimal","PlaygroundEditorTheme__ol2","PlaygroundEditorTheme__ol3","PlaygroundEditorTheme__ol4","PlaygroundEditorTheme__ol5"],ul:"PlaygroundEditorTheme__ul"},ltr:"PlaygroundEditorTheme__ltr",mark:"PlaygroundEditorTheme__mark",markOverlap:"PlaygroundEditorTheme__markOverlap",paragraph:"PlaygroundEditorTheme__paragraph",quote:"PlaygroundEditorTheme__quote",rtl:"PlaygroundEditorTheme__rtl",table:"PlaygroundEditorTheme__table",tableAddColumns:"PlaygroundEditorTheme__tableAddColumns",tableAddRows:"PlaygroundEditorTheme__tableAddRows",tableCell:"PlaygroundEditorTheme__tableCell",tableCellActionButton:"PlaygroundEditorTheme__tableCellActionButton",tableCellActionButtonContainer:"PlaygroundEditorTheme__tableCellActionButtonContainer",tableCellEditing:"PlaygroundEditorTheme__tableCellEditing",tableCellHeader:"PlaygroundEditorTheme__tableCellHeader",tableCellPrimarySelected:"PlaygroundEditorTheme__tableCellPrimarySelected",tableCellResizer:"PlaygroundEditorTheme__tableCellResizer",tableCellSelected:"PlaygroundEditorTheme__tableCellSelected",tableCellSortedIndicator:"PlaygroundEditorTheme__tableCellSortedIndicator",tableResizeRuler:"PlaygroundEditorTheme__tableCellResizeRuler",tableSelected:"PlaygroundEditorTheme__tableSelected",text:{bold:"PlaygroundEditorTheme__textBold",code:"PlaygroundEditorTheme__textCode",italic:"PlaygroundEditorTheme__textItalic",strikethrough:"PlaygroundEditorTheme__textStrikethrough",subscript:"PlaygroundEditorTheme__textSubscript",superscript:"PlaygroundEditorTheme__textSuperscript",underline:"PlaygroundEditorTheme__textUnderline",underlineStrikethrough:"PlaygroundEditorTheme__textUnderlineStrikethrough"}};function un({className:e}){return n.jsx(Gi.ContentEditable,{className:e||"border-none relative [tab-size:1] outline-none pt-[8px] px-[8px] lg:px-[28px] pb-[14px]"})}function gl({children:e,className:t}){return n.jsx("div",{className:t||"text-[15px] text-[#999] overflow-hidden absolute overflow-ellipsis top-[8px] left-[8px] lg:left-[28px] right-[28px] select-none whitespace-nowrap inline-block pointer-events-none",children:e})}function xl(e){const{historyState:t}=Fo(),{isAutocomplete:s,isMaxLength:i,isCharLimit:o,isCharLimitUtf8:a,isRichText:r=!0,showTreeView:l,showTableOfContents:c,showActionBar:d,placeholderText:u="",editable:p=!0,bgColor:m}=e,f=n.jsx(gl,{children:u}),[b,w]=h.useState(null),[x,y]=h.useState(!1),[v,S]=h.useState(!1),_=N=>{N!==null&&w(N)},j={namespace:"Playground",nodes:[...Qo],onError:N=>{throw N},theme:mi};return h.useEffect(()=>{const N=()=>{const E=Nt&&window.matchMedia("(max-width: 1025px)").matches;E!==v&&S(E)};return window.addEventListener("resize",N),()=>{window.removeEventListener("resize",N)}},[v]),n.jsxs(n.Fragment,{children:[r&&p&&n.jsx(hl,{}),n.jsxs("div",{className:`${p?"editor-container":"view-container"} ${l?"tree-view":""} ${r?"":"plain-text"}`,style:{backgroundColor:m},children:[i&&n.jsx(Ha,{maxLength:30}),n.jsx(la,{}),n.jsx(Ji.ClearEditorPlugin,{}),n.jsx(aa,{}),n.jsx(kr,{}),n.jsx(La,{}),n.jsx(gr,{}),n.jsx(Ar,{}),r?n.jsxs(n.Fragment,{children:[n.jsx(en.HistoryPlugin,{externalHistoryState:t}),n.jsx(Yn.RichTextPlugin,{contentEditable:n.jsx("div",{className:p?"editor-scroller":"view-scroller",children:n.jsx("div",{className:"editor",ref:_,children:n.jsx(un,{})})}),placeholder:f,ErrorBoundary:tn}),n.jsx(Or,{}),n.jsx(Ki.ListPlugin,{}),n.jsx(Xi.CheckListPlugin,{}),n.jsx(Ba,{maxDepth:7}),n.jsx(Zi.TablePlugin,{}),n.jsx(sl,{}),n.jsxs(sa,{cellEditorConfig:j,children:[n.jsx(Qi.AutoFocusPlugin,{}),n.jsx(Yn.RichTextPlugin,{contentEditable:n.jsx(un,{className:"min-h-[20px] border-[0px] resize-none cursor-text block relative [tab-size:1] outline-[0px] p-[10px] select-text text-[14px] leading-[1.4em] w-[calc(100%_-_20px)] whitespace-pre-wrap"}),placeholder:null,ErrorBoundary:tn}),n.jsx(en.HistoryPlugin,{}),n.jsx(cs,{}),n.jsx(es,{}),n.jsx(ls,{})]}),n.jsx(Wr,{}),n.jsx(cs,{}),n.jsx(Cr,{}),n.jsx(es,{}),n.jsx(eo.HorizontalRulePlugin,{}),n.jsx(Va,{}),n.jsx(to.TabIndentationPlugin,{}),n.jsx(Fr,{}),b&&!v&&n.jsxs(n.Fragment,{children:[n.jsx(Na,{anchorElem:b}),n.jsx(ka,{anchorElem:b,isLinkEditMode:x,setIsLinkEditMode:y}),n.jsx(Qa,{anchorElem:b,cellMerge:!0}),n.jsx(ls,{anchorElem:b,showComments:!0})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(no.PlainTextPlugin,{contentEditable:n.jsx(un,{}),placeholder:f,ErrorBoundary:tn}),n.jsx(en.HistoryPlugin,{externalHistoryState:t})]}),(o||a)&&n.jsx(so.CharacterLimitPlugin,{charset:o?"UTF-16":"UTF-8",maxLength:5}),s&&n.jsx(Vo,{}),n.jsx("div",{children:c&&n.jsx(al,{})}),d&&n.jsx(yr,{isRichText:r})]}),l&&n.jsx(fl,{})]})}const bl=[Ce.HeadingNode,me.ListNode,me.ListItemNode,Ce.QuoteNode,he.CodeNode,Qe,L.TableNode,L.TableCellNode,L.TableRowNode,he.CodeHighlightNode,ae.AutoLinkNode,ae.LinkNode,io.OverflowNode,He,ct,Ye,ot.HorizontalRuleNode,_t,oo.MarkNode,Ge,Je,Ke];function hi({value:e,onChange:t,bgColor:s,editable:i=!1,id:o}){var r,l,c,d;const a={editorState:(r=JSON.parse(e||"{}"))!=null&&r.root&&((d=(c=(l=JSON.parse(e||"{}"))==null?void 0:l.root)==null?void 0:c.children)!=null&&d.length)?e:null,namespace:"dms-lexical",nodes:[...bl],editable:i,readOnly:i,onError:u=>{throw u},theme:mi};return n.jsx(ro.LexicalComposer,{initialConfig:a,children:n.jsxs("div",{className:"editor-shell",children:[n.jsx(xl,{editable:i,bgColor:s}),n.jsx(ao.OnChangePlugin,{onChange:t})]})},o)}function yl(e){try{JSON.parse(e)}catch{return!1}return!0}function fi(e){return e&&typeof e=="object"?JSON.stringify(e):yl(e)?e:null}const wl=({value:e,onChange:t,...s})=>n.jsx("div",{className:"editor-shell",children:n.jsx(hi,{value:fi(e),onChange:i=>{t(i)},editable:!0,...s})}),vl=({value:e,...t})=>n.jsx("div",{className:"editor-shell tracking-wide leading-7",children:n.jsx(hi,{value:fi(e),editable:!1,...t})}),Nl={EditComp:wl,ViewComp:vl},Cl=({value:e="",onChange:t,className:s,placeholder:i,options:o=[]})=>{var l,c;const a=fe(),r=e&&!o.find(d=>(d.value||d)===e);return n.jsxs(n.Fragment,{children:[r?n.jsxs("div",{className:(l=a==null?void 0:a.select)==null?void 0:l.error,children:["Invalid Value: ",JSON.stringify(e)," "]}):null,n.jsxs("select",{className:s||((c=a==null?void 0:a.select)==null?void 0:c.input)||"w-full border p-2",value:e,onChange:d=>t(d.target.value),children:[n.jsx("option",{value:"",children:i}),o.map((d,u)=>n.jsx("option",{value:d.value||d,children:d.label||d},u))]})]})},jl=({className:e,value:t,options:s=[]})=>{var a;if(!t)return!1;const i=fe(),o=s.find(r=>(r.value||r)===t)||t;return n.jsx("div",{className:e||((a=i==null?void 0:i.text)==null?void 0:a.view),children:(o==null?void 0:o.label)||o})},_l={EditComp:Cl,ViewComp:jl},El="flex px-2 py-1 w-full text-sm font-light border focus:border-blue-300 bg-white hover:bg-gray-100 transition ease-in",Tl="focus:outline-none w-full",Sl="flex px-2 py-1 mx-1 bg-gray-100 hover:bg-gray-300 rounded-md transition ease-in",kl="fa fa-x px-1 text-xs text-red-300 hover:text-red-500 self-center transition ease-in",$l="p-2 shadow-lg z-10",Ml="px-2 py-1 hover:bg-gray-300 hover:cursor-pointer transition ease-in",Il=({token:e,value:t,onChange:s,theme:i})=>{var o,a;return n.jsxs("div",{className:((o=i==null?void 0:i.multiselect)==null?void 0:o.tokenWrapper)||Sl,children:[n.jsx("div",{children:e.label||e}),n.jsx("i",{className:((a=i==null?void 0:i.multiselect)==null?void 0:a.removeIcon)||kl,onClick:r=>s(t.filter(l=>(l.value||l)!==(e.value||e)))})]})},Al=({options:e,isSearching:t,setIsSearching:s,searchKeyword:i,value:o,onChange:a,theme:r})=>{var c;const l=o.map(d=>d.value||d);return n.jsx("div",{className:`${t?"block":"hidden"} ${((c=r==null?void 0:r.multiselect)==null?void 0:c.menuWrapper)||$l}`,children:e.filter(d=>!l.includes(d.value||d)&&(d.label||d).includes(i)).map((d,u)=>{var p;return n.jsx("div",{className:((p=r==null?void 0:r.multiselect)==null?void 0:p.menuItem)||Ml,onClick:m=>{a([...o,d]),s(!1)},children:d.label||d},`option-${u}`)})})};function Rl(e){const[t,s]=h.useState(e),i=h.useRef(null),o=r=>{(r.key==="Escape"||r.key==="Tab")&&s(!1)},a=r=>{i.current&&!i.current.contains(r.target)&&s(!1)};return h.useEffect(()=>(document.addEventListener("keydown",o,!0),document.addEventListener("click",a,!0),()=>{document.removeEventListener("keydown",o,!0),document.removeEventListener("click",a,!0)})),{ref:i,isSearching:t,setIsSearching:s}}const Ol=({value:e=[],onChange:t,className:s,placeholder:i,options:o=[]})=>{var f,b,w;const[a,r]=h.useState(""),l=Array.isArray(e)?e:[e],c=fe(),{ref:d,isSearching:u,setIsSearching:p}=Rl(!1),m=l.filter(x=>{var y;return(x.value||x)&&!((y=o.filter(v=>(v.value||v)===(x.value||x)))!=null&&y.length)});return n.jsxs("div",{ref:d,children:[m.length?n.jsxs("div",{className:(f=c==null?void 0:c.multiselect)==null?void 0:f.error,children:["Invalid Values: ",JSON.stringify(m)]}):null,n.jsxs("div",{className:s||((b=c==null?void 0:c.multiselect)==null?void 0:b.inputWrapper)||El,children:[l.map((x,y)=>n.jsx(Il,{token:x,value:l,onChange:t,theme:c},y)),n.jsx("input",{placeholder:i,className:((w=c==null?void 0:c.multiselect)==null?void 0:w.input)||Tl,onChange:x=>r(x.target.value),onFocus:()=>p(!0)},"input")]}),n.jsx(Al,{isSearching:u,setIsSearching:p,searchKeyword:a,value:l,onChange:t,options:o,theme:c})]})},Dl=({className:e,value:t,options:s=[]})=>{var r;if(!t)return!1;const i=fe(),o=(Array.isArray(t)?t:[t]).map(l=>l.value||l),a=s.filter(l=>o.includes(l.value||l)).map(l=>l.label||l).join(", ");return n.jsx("div",{className:e||((r=i==null?void 0:i.text)==null?void 0:r.view),children:a||JSON.stringify(o)})},Ll={EditComp:Ol,ViewComp:Dl},Pl=({value:e="",onChange:t,options:s=[],inline:i})=>{var r;const o=fe(),a=e&&!s.find(l=>l===e);return n.jsxs(n.Fragment,{children:[a?n.jsxs("div",{className:(r=o==null?void 0:o.radio)==null?void 0:r.error,children:["Invalid Value: ",JSON.stringify(e)]}):null,n.jsx("div",{className:`flex ${i?"flex-row":"flex-col"}`,children:s.map((l,c)=>{var d,u,p;return n.jsxs("div",{className:((d=o==null?void 0:o.radio)==null?void 0:d.wrapper)||"p-1 flex",children:[n.jsx("input",{id:l,className:((u=o==null?void 0:o.radio)==null?void 0:u.input)||"self-center p-1",type:"radio",value:l,checked:e===l,onChange:m=>t(m.target.value)}),n.jsxs("label",{htmlFor:l,className:((p=o==null?void 0:o.radio)==null?void 0:p.label)||"text-sm font-light p-1 self-center",children:[" ",l," "]})]},c)})})]})},Fl=({className:e,value:t})=>{var i;if(!t)return!1;const s=fe();return n.jsx("div",{className:e||((i=s==null?void 0:s.text)==null?void 0:i.view),children:t})},Bl={EditComp:Pl,ViewComp:Fl},Xe={text:nn,datetime:nn,textarea:ko,boolean:Io,"dms-format":Oo,lexical:Nl,select:_l,multiselect:Ll,radio:Bl,default:nn};function Hl(e,t){Xe[e]=t}function zl(e){const{type:t="default",isArray:s=!1,attributes:i}=e;let o=W(Xe,`[${t}]`,Xe.default),a=o.ViewComp;if(s){let r=e.DisplayComp?e.DisplayComp.ViewComp:Ps.ViewComp;a=l=>n.jsx(r,{Component:o,...l,attr:e})}return a}function Wl(e){const{type:t="default",isArray:s=!1,attributes:i}=e;let o=W(Xe,`[${t}]`,Xe.default),a=o.EditComp;if(s){let r=e.DisplayComp?e.DisplayComp.EditComp:Ps.EditComp;a=l=>n.jsx(r,{Component:o,...l,attr:e})}return a}function Et(e,t={},s=""){const i=gi(e),o=(t==null?void 0:t.accessor)||"key",a=e.attributes.filter(l=>s!=="edit"||typeof l.editable>"u"||!!l.editable).reduce((l,c)=>(c.format&&i[c.format]?l[c[o]]={...c,attributes:Et(i[c.format])}:l[c[o]]=c,l),{}),r=Object.keys(a);return Object.keys(a).filter(l=>r.includes(l)).forEach(l=>{a[l].ViewComp=zl(W(a,`${l}`,{})),a[l].EditComp=Wl(W(a,`${l}`,{}))}),a}function gi(e,t={}){if(!e)return t;const s=oe(e);return s.registerFormats&&s.registerFormats.forEach(i=>gi(i,t)),t[`${s.app}+${s.type}`]=s,t}const Ul=(e,t="update")=>{let s=new FormData;return s.append("data",JSON.stringify(e)),s.append("requestType",t),s};function Vl({Component:e,format:t,options:s,params:i,user:o,...a}){const{falcor:r}=bt.useFalcor(),l=Et(t,s,"edit"),c=Le(),{pathname:d}=Me(),{data:u=[]}=En()||[];let p=lo();const{defaultSort:m=_=>_}=t,[f,b]=O.useState(m(u).filter(_=>wn(_,i,t))[0]||{});h.useEffect(()=>{let _=u.filter(j=>wn(j,i,t))[0];Be(f,_)||b(_||{})},[u,i]);const w=async({data:_,config:j={format:t},requestType:N=""})=>{await vt(r,j,_,N),c(null,{action:d})},x=async _=>await Ze(r,_),y=(_,j,N)=>{b(N?{...f,...N}:{...f,[_]:j})},v=()=>{c(Ul(f),{method:"post",action:d})},S=O.useMemo(()=>e,[]);return n.jsx(S,{...a,format:t,attributes:l,item:f,dataItems:u,params:i,apiUpdate:w,apiLoad:x,updateAttribute:y,setItem:b,options:s,status:p,user:o,submit:v})}function ql({Component:e,format:t,options:s,user:i,...o}){const{falcor:a}=bt.useFalcor(),r=Et(t,s),{data:l=[]}=En()||{},c=async({data:p,config:m={format:t},requestType:f=""})=>{await vt(a,m,p,f),submit(null,{action:pathname})},d=async p=>await Ze(a,p),u=O.useMemo(()=>e,[]);return n.jsx(u,{...o,format:t,attributes:r,dataItems:l,apiUpdate:c,apiLoad:d,options:s,user:i},s==null?void 0:s.path)}function Yl({Component:e,format:t,options:s,params:i,user:o,...a}){let r=Et(t,s);const{data:l=[]}=En()||{},{defaultSort:c=p=>p}=t,d=c(l).filter(p=>wn(p,i,t))[0]||l[0],u=O.useMemo(()=>e,[]);return n.jsx(u,{...a,format:t,attributes:r,item:d,dataItems:l,options:s,user:o})}function Gl({Component:e,format:t,options:s,user:i,...o}){let a=Et(t,s);return n.jsx(e,{...o,format:t,attributes:a,dataItems:[],options:s,user:i})}const xi={edit:Vl,error:Gl,list:ql,view:Yl};function Jl(e){return n.jsx("div",{children:"404 - Config not found"})}function Ht({item:e,attributes:t,next:s,nextDisabled:i,prev:o,prevDisabled:a,sectionId:r,preferredTheme:l}){var d,u,p;const c=l||fe();return e?n.jsxs("div",{className:W(c,"card.wrapper",""),children:[Object.keys(t).filter(m=>!r||t[m].section===r).map((m,f)=>{var w,x;let b=t[m].ViewComp;return n.jsxs("div",{className:W(c,"card.row",""),children:[n.jsx("div",{className:W(c,"card.rowLabel",""),children:((w=t[m])==null?void 0:w.display_name)||((x=t[m])==null?void 0:x.label)||m}),n.jsx("div",{className:W(c,"card.rowContent",""),children:n.jsx(b,{value:e[m],...t[m]})})]},f)}),(o||s)&&r&&n.jsxs("div",{className:(d=c==null?void 0:c.card)==null?void 0:d.btnWrapper,children:[o&&r&&n.jsx("button",{className:(u=c==null?void 0:c.card)==null?void 0:u.backBtn,disabled:a,onClick:()=>o(),children:" Back "}),s&&r&&n.jsx("button",{className:(p=c==null?void 0:c.card)==null?void 0:p.continueBtn,disabled:i,onClick:()=>s(),children:" Continue "})]})]},e.id):n.jsx("div",{})}function Kl({dataItems:e=[],attributes:t}){return fe(),n.jsxs("div",{className:"border border-pink-300",children:["Landing",e.map((s,i)=>n.jsx(Ht,{item:s,attributes:t},i))]})}function Ns(e,t){var s=/:(\w+)/g;return e.replace(s,function(i,o){return t[o]||":"+o})}const Cs={data:function({data:t,column:s,className:i,key:o}){return n.jsxs("td",{className:i,children:[" ",W(t,[s.path],"").toString()," "]},o)},date:function({data:t,column:s,className:i,key:o}){return n.jsxs("td",{className:i,children:[" ",new Date(t[s.path]).toLocaleString()," "]},o)},link:function({data:t,column:s,className:i,key:o}){return n.jsx("td",{className:i,children:n.jsx(De,{to:Ns(s.to,t),children:Ns(s.text,t)})},o)}};function Xl({data:e,column:t,className:s}){let i=W(Cs,[t.type],Cs.data);return n.jsx(i,{data:e,column:t,className:s})}function Zl({dataItems:e=[],attributes:t={},options:s={}}){var a,r,l;const i=fe();let{columns:o=[]}=s;return o.length===0?n.jsx("div",{children:" No columns specified. "}):n.jsx("div",{className:"",children:n.jsxs("table",{className:`${(a=i==null?void 0:i.table)==null?void 0:a.table}`,children:[n.jsx("thead",{className:`${(r=i==null?void 0:i.table)==null?void 0:r.thead}`,children:n.jsx("tr",{children:o.map((c,d)=>{var u;return n.jsx("th",{className:`${(u=i==null?void 0:i.table)==null?void 0:u.th}`,children:c.name},d)})})}),n.jsx("tbody",{className:`${(l=i==null?void 0:i.table)==null?void 0:l.tbody}`,children:e.map(c=>n.jsx("tr",{children:o.map((d,u)=>{var p;return n.jsx(Xl,{className:`${(p=i==null?void 0:i.table)==null?void 0:p.td}`,data:c,column:d},`${d.name}-${u}`)})},c.id))})]})})}function bi({item:e={},attributes:t,updateAttribute:s,status:i,submit:o,next:a,nextDisabled:r,prev:l,prevDisabled:c,sectionId:d,...u}){var m,f,b,w;const p=fe();return n.jsxs("div",{className:W(p,"card.wrapper",""),children:[i?n.jsx("div",{children:JSON.stringify(i)}):"",Object.keys(t).filter(x=>!d||t[x].section===d).map((x,y)=>{var S,_,j,N;let v=t[x].EditComp;return n.jsxs("div",{className:W(p,"card.row",""),children:[n.jsxs("div",{className:W(p,"card.rowHeader",""),children:[n.jsx("div",{className:W(p,"card.rowLabel",""),children:((S=t[x])==null?void 0:S.display_name)||((_=t[x])==null?void 0:_.label)||x}),((j=t[x])==null?void 0:j.prompt)&&n.jsx("i",{title:(N=t[x])==null?void 0:N.prompt,className:W(p,"card.infoIcon","fad fa-info")})]}),n.jsx("div",{className:W(p,"card.rowContent",""),children:n.jsx(v,{value:e==null?void 0:e[x],onChange:E=>s(x,E),...t[x]},`${x}-${y}`)})]},`${x}-${y}`)}),n.jsxs("div",{className:(m=p==null?void 0:p.card)==null?void 0:m.btnWrapper,children:[l&&d&&n.jsx("button",{className:(f=p==null?void 0:p.card)==null?void 0:f.backBtn,disabled:c,onClick:()=>l(),children:" Back "}),a&&d&&n.jsx("button",{className:(b=p==null?void 0:p.card)==null?void 0:b.continueBtn,disabled:r,onClick:()=>a(),children:" Continue "}),n.jsx("button",{className:(w=p==null?void 0:p.card)==null?void 0:w.submitBtn,onClick:()=>o(),children:" Save"})]})]},e.id)}const Ql=({theme:e={},tabs:t=[],activeIndex:s=0,setActiveIndex:i=null})=>{if(!t)return null;const[o,a]=O.useState(s);return O.useEffect(()=>{a(s)},[s]),n.jsx("div",{className:`${e.tabpanelWrapper}`,children:n.jsx("div",{className:`${e.tabWrapper}`,children:t.map(({icon:r,title:l,subtitle:c},d)=>n.jsxs("div",{onClick:u=>i?i(d):a(d),className:`${d===o?e.tabActive:e.tab}`,children:[n.jsx("span",{className:`${r} ${e.icon}`}),n.jsxs("span",{className:`${e.tabTitle}`,children:[" ",l," "]}),n.jsxs("span",{className:`${e.tabSubtitle}`,children:[" ",c," "]})]},d))})})};function ec({item:e,updateAttribute:t,attributes:s,status:i,submit:o,format:a,...r}){var u,p,m;const[l,c]=h.useState(a!=null&&a.sections?0:void 0),d=fe();return n.jsxs(n.Fragment,{children:[n.jsx(Ql,{tabs:a==null?void 0:a.sections,activeIndex:l,setActiveIndex:c,theme:d.form}),n.jsx(bi,{item:e,status:i,attributes:s,sectionId:(p=(u=a==null?void 0:a.sections)==null?void 0:u[l])==null?void 0:p.id,updateAttribute:t,submit:o,next:()=>c(l+1),nextDisabled:l===((m=a==null?void 0:a.sections)==null?void 0:m.length)-1,prev:()=>c(l-1),prevDisabled:l===0})]})}function tc({item:e,updateAttribute:t,attributes:s,status:i,submit:o,format:a,...r}){var c;const l=fe();return n.jsx("div",{className:(c=l==null?void 0:l.form)==null?void 0:c.sectionsWrapper,children:a!=null&&a.sections?((a==null?void 0:a.sections)||[]).map(d=>{var u,p,m,f,b;return n.jsxs("div",{className:(u=l==null?void 0:l.form)==null?void 0:u.sections,children:[n.jsxs("div",{className:(p=l==null?void 0:l.form)==null?void 0:p.tab,children:[n.jsx("span",{className:`${d.icon} ${(m=l==null?void 0:l.form)==null?void 0:m.icon}`}),n.jsxs("span",{className:`${(f=l==null?void 0:l.form)==null?void 0:f.tabTitle}`,children:[" ",d.title," "]}),n.jsxs("span",{className:`${(b=l==null?void 0:l.form)==null?void 0:b.tabSubtitle}`,children:[" ",d.subtitle," "]})]}),n.jsx(Ht,{preferredTheme:l==null?void 0:l.form,item:e,status:i,attributes:s,sectionId:d==null?void 0:d.id})]},d==null?void 0:d.id)}):n.jsx(Ht,{preferredTheme:l==null?void 0:l.form,item:e,status:i,attributes:s})})}function nc({config:e}){return n.jsxs("div",{children:[" Invalid DMS Config :",n.jsx("pre",{style:{background:"#dedede"},children:JSON.stringify(e,null,3)})]})}function sc({path:e}){return n.jsxs("div",{children:[" These aren't the droids you are looking for",n.jsx("div",{className:"text-5xl",children:"404"}),n.jsxs("div",{children:["/",e]})]})}const Dn={devinfo:Jl,"dms-landing":Kl,"dms-table":Zl,"dms-card":Ht,"dms-edit":bi,"dms-form-edit":ec,"dms-form-view":tc,InvalidConfig:nc,NoRouteMatch:sc},ic=Dn.devinfo,oc=xi.error;let rc=0;function yi(e,t){let i=(co(e.map(o=>({path:o.path})),{pathname:t})||[]).reduce((o,a)=>(o[a.route.path]=a,o),{});return e.filter((o,a)=>{let r=(i==null?void 0:i[o.path])||!1;return r&&(o.params=r.params),r})}function wi(e,t,s,i,o=0){return yi(e,t).map(r=>{const l=typeof r.type=="function"?r.type:Dn[r.type]||ic,c=xi[r.action]||oc;let d=[];return r.children&&(d=wi(r.children,t,s,i,o+1)),n.jsx(c,{Component:l,format:s,...r,children:d,user:i},rc++)})}function Ln(e=[],t="/",s=0){let i=oe(yi(e,t)),o=i.reduce((a,r)=>{let l=Ln(r.children,t,s+1);return l.length?[...a,...l]:a},[]);return[...i,...o]}function ac(e){return e&&e.attributes&&e.attributes.length>0}function wn(e,t,s){var a;let i=((a=s==null?void 0:s.attributes)==null?void 0:a.reduce((r,l)=>(l.matchWildcard&&(r=l.key),r),""))||"",o=!1;return Object.keys(t).forEach(r=>{e[r]==t[r]||e[i]&&e[i]===t["*"]?o=!0:o=!1}),t.id==e.id?!0:o}const lc=(e,t,s,i)=>{var m,f,b,w,x,y,v,S,_,j,N,E;const{app:o,type:a}=t;let r=((m=e==null?void 0:e.filter)==null?void 0:m.attributes)||[],l=r.length>0?r.map(k=>`data ->> '${k}'`):["data"],c=typeof((f=e==null?void 0:e.filter)==null?void 0:f.fromIndex)=="function"?(b=e==null?void 0:e.filter)==null?void 0:b.fromIndex(s):+((x=e.params)==null?void 0:x[(w=e==null?void 0:e.filter)==null?void 0:w.fromIndex])||0,d=typeof((y=e==null?void 0:e.filter)==null?void 0:y.toIndex)=="function"?(v=e==null?void 0:e.filter)==null?void 0:v.toIndex(s):+((_=e.params)==null?void 0:_[(S=e==null?void 0:e.filter)==null?void 0:S.toIndex])||i-1,u=((j=e==null?void 0:e.filter)==null?void 0:j.options)||"{}",p=((N=e==null?void 0:e.filter)==null?void 0:N.tags)||[];if(((E=e==null?void 0:e.filter)==null?void 0:E.type)==="new")return[];switch(e.action){case"list":return["dms","data",`${o}+${a}`,u!=="{}"?"opts":!1,u!=="{}"?u:!1,"byIndex",{from:c,to:d},["id","app","type",...l]].filter(k=>k);case"view":case"edit":{const k=vi(e,t);return k||["dms","data",`${o}+${a}`,"byIndex",{from:c,to:d},["id","updated_at","created_at","app","type",...l]]}case"load":return["dms","data",`${o}+${a}`,"options",u,"byIndex",{from:c,to:d},[...r.length>0?r:["data"]]];case"search":return["dms","search",`${o}+${a}`,"byTag",p];case"searchTags":return["dms","search",`${o}+${a}`,"tags"];default:return[]}};function vi(e,t){var u,p;const{app:s,type:i,defaultSearch:o,attributes:a=[]}=t;let r=((u=e==null?void 0:e.filter)==null?void 0:u.attributes)||[],l=r.length>0?r.map(m=>`data ->> '${m}'`):["data"];const c=(a==null?void 0:a.reduce((m,f)=>(f.matchWildcard&&(m=f.key),m),""))||"";let d=(p=e.params)==null?void 0:p.id;return d?["dms","data","byId",d,["id","updated_at","created_at","app","type",...l]]:c?["dms","data",`${s}+${i}`,"searchOne",[JSON.stringify({wildKey:`data ->> '${c}'`,params:e.params["*"]||"",defaultSearch:o})],["id","updated_at","created_at","app","type",...l]]:null}async function cc(e,t,s,i,o,a,r,l){var m;const c=Array.isArray(t)?t.map(f=>+f):t;let d=[],u=Object.values(W(e,["dms","data","byId"],{})).filter(f=>f.id&&f.app===i&&f.type===o);for(const f in u){let b=oe(u[f]),w=((m=b==null?void 0:b.data)==null?void 0:m.value)||{};Object.keys(b).filter(x=>x!=="data").forEach(x=>{if(x.includes("data ->> ")){let y=x.split("->>")[1].trim().replace(/[']/g,"");w[y]=b[x]}else w[x]=b[x]}),d.push(w)}r!=null&&r.defaultSort&&(d=r.defaultSort(d));let p=0;for(const f in d)(c==="loadAll"||c.includes(+d[f].id)||p===0)&&await Ni(d[f],a,r,l),p++;return d}async function Ni(e,t,s,i){var r,l,c,d,u;let o=Object.keys(e).filter(p=>Object.keys(t).includes(p)),a=Object.keys(t).reduce((p,m)=>{var b,w;let f=(w=(b=s==null?void 0:s.registerFormats)==null?void 0:b.filter(x=>x.type===t[m].format.split("+")[1]))==null?void 0:w[0];return f&&(p[m]=f),p},{});for(const p of o){const m=[],f=Object.values(((r=a==null?void 0:a[p])==null?void 0:r.attributes)||{}).filter(b=>b.type==="dms-format").reduce((b,w)=>(b[w.key]=w,b),{});if(typeof(e==null?void 0:e[p])=="string"&&(e[p]=JSON.parse(e[p])),typeof((l=e==null?void 0:e[p])==null?void 0:l[Symbol.iterator])=="function")for(let b of e[p])b.id&&m.push(["dms","data","byId",b.id,"data"]);else(c=e[p])!=null&&c.id&&m.push(["dms","data","byId",(d=e[p])==null?void 0:d.id,"data"]);if(m.length>0){let b=await i.get(...m);if(typeof((u=e==null?void 0:e[p])==null?void 0:u[Symbol.iterator])=="function"){let w=0;for(let x of e[p])if(x.id){let y=W(b,["json","dms","data","byId",x.id,"data"]);Object.keys(f).length>0&&await Ni(y,f,a[p],i),e[p][w]={...x,...y},w+=1}}else{let w=W(b,["json","dms","data","byId",e[p].id,"data"]);e[p]={...e[p],...w}}}}}async function dc(e,t,s){var o,a,r,l,c;let i={};for(const d of Object.keys(e)){i[d]=[];let[u,p]=t[d].format.split("+");const m=Array.isArray(e[d])?e[d]:[e[d]];for(const f of m){let b=oe(f),w=(b==null?void 0:b.id)||!1;if(w){let x=W(s.getCache(["dms","data","byId",w,"data"]),["dms","data","byId",w,"data","value"],{});delete b.ref,delete b.id,x!=null&&x.ref&&delete x.ref,x!=null&&x.id&&delete x.id,Be(x,b)||(console.log("update",w),await s.call(["dms","data","edit"],[w,b]),console.log("invalidate",w,f),await s.invalidate(["dms","data","byId",w])),i[d].push({ref:`${u}+${p}`,id:w})}else{console.log("create dms-format",`${u}+${p}`);const x=await s.call(["dms","data","create"],[u,p,b]);let y=((l=Object.keys(((r=(a=(o=x==null?void 0:x.json)==null?void 0:o.dms)==null?void 0:a.data)==null?void 0:r.byId)||{}).filter(v=>v!=="$__path"))==null?void 0:l[0])||-1;console.log(y),y!==-1&&i[d].push({ref:`${u}+${p}`,id:y})}}i[d]=Array.isArray(e[d])?i[d]:((c=i[d])==null?void 0:c[0])||""}return i}let uc={};async function Ze(e,t,s="/"){var _,j,N,E,k,C,$,A,B,T,P,F,G,Y,M,D,I,z,U,V,Z;t.formatFn&&(t.format=await t.formatFn());const{format:i}=t,{app:o,type:a,attributes:r={}}=i,l=Ln(t.children,s),c=Object.values(r).filter(R=>R.type==="dms-format").reduce((R,q)=>(R[q.key]=q,R),{});let d=["dms","data",`${o}+${a}`,"length"];if(l.find(R=>["list","load"].includes(R.action))){const R=(j=(_=l.find(q=>["list","load"].includes(q.action)))==null?void 0:_.filter)==null?void 0:j.options;R&&(d=["dms","data",`${o}+${a}`,"options",R,"length"])}const u=W(await e.get(d),["json",...d],0),p=["dms","data",`${o}+${a}`,"byIndex"],m=l.map(R=>lc(R,i,s,u)).filter(R=>R==null?void 0:R.length);m.length>0&&await e.get(...m);let f=e.getCache();if(l.find(R=>R.action==="search")){const R=m[0].filter((q,K)=>K<=m[0].indexOf("byTag"));return W(f,R,{})}if(l.find(R=>R.action==="searchTags")){const R=m[0].filter((q,K)=>K<=m[0].indexOf("tags"));return W(f,R,{})}if(l.find(R=>R.action==="load")){const R=m[0].filter((q,K)=>K<=m[0].indexOf("byIndex"));return Object.values(W(f,R,{}))}const b=l.filter(R=>R.action!=="load").map(R=>vi(R,i)).filter(R=>R==null?void 0:R.length).map(R=>{let q=W(f,R.slice(0,-1),!1);return(q==null?void 0:q.$type)==="ref"?+q.value[3]:+(q==null?void 0:q.id)}).filter(R=>R);let w=(E=(N=l[0])==null?void 0:N.params)==null?void 0:E.id,x=typeof((C=(k=l==null?void 0:l[0])==null?void 0:k.filter)==null?void 0:C.fromIndex)=="function"?(A=($=l==null?void 0:l[0])==null?void 0:$.filter)==null?void 0:A.fromIndex(s):+((F=(B=l==null?void 0:l[0])==null?void 0:B.params)==null?void 0:F[(P=(T=l==null?void 0:l[0])==null?void 0:T.filter)==null?void 0:P.fromIndex]),y=typeof((Y=(G=l==null?void 0:l[0])==null?void 0:G.filter)==null?void 0:Y.toIndex)=="function"?(D=(M=l==null?void 0:l[0])==null?void 0:M.filter)==null?void 0:D.toIndex(s):+((V=(I=l==null?void 0:l[0])==null?void 0:I.params)==null?void 0:V[(U=(z=l==null?void 0:l[0])==null?void 0:z.filter)==null?void 0:U.toIndex]);const v=!w&&x&&y&&Object.keys(W(f,[...p],{})).filter(R=>+R>=+x&&+R<=+y-1).map(R=>W(f,[...p,R,"value",3])).filter(R=>R);b.push(...v||[]);const S=await cc(f,b,v==null?void 0:v.length,o,a,c,i,e);return(Z=l==null?void 0:l[0])!=null&&Z.lazyLoad&&uc[`${o}+${a}`],S}async function vt(e,t,s={},i){var m,f,b,w;const{app:o,type:a}=t.format,{id:r}=s,l=Object.keys(s).filter(x=>!["id","updated_at","created_at"].includes(x)),c=Object.values(((m=t==null?void 0:t.format)==null?void 0:m.attributes)||{}).filter(x=>x.type==="dms-format").reduce((x,y)=>(x[y.key]=y,x),{}),u=l.filter(x=>Object.keys(c).includes(x)).reduce((x,y)=>(x[y]=s[y],delete s[y],x),{});let p=await dc(u,c,e);if(s={...s,...p},i==="delete"&&r)return await e.call(["dms","data","delete"],[o,a,r]),await e.invalidate(["dms","data",`${o}+${a}`,"length"]),{response:`Deleted item ${r}`};if(i==="updateType"&&r)return s.type?(await e.call(["dms","type","edit"],[r,s.type]),await e.invalidate(["dms","data","byId",r]),{message:"Update successful."}):{message:"No type found."};if(r&&l.length>0)return console.time(`falcor update data ${r}`),console.log("update",r,s),await e.call(["dms","data","edit"],[r,s]),await e.invalidate(["dms","data","byId",r]),console.timeEnd(`falcor update data ${r}`),{message:"Update successful."};if(l.length>0){const x=await e.call(["dms","data","create"],[o,a,s]);return await e.invalidate(["dms","data",`${o}+${a}`,"length"]),{response:"Item created.",id:Object.keys(((w=(b=(f=x==null?void 0:x.json)==null?void 0:f.dms)==null?void 0:b.data)==null?void 0:w.byId)||{})[0]}}return{message:"Not sure how I got here."}}const{InvalidConfig:pc,NoRouteMatch:mc}=Dn,hc=e=>{const{config:t,path:s="",theme:i=Sn,user:o}=e,a=Yt();if(O.useEffect(()=>{if(t.check){let l=Ln(t.children,s,t.format);t.check(e,l,a)}},[s]),!t.children||!ac(t.format))return n.jsx(pc,{config:t});const r=O.useMemo(()=>wi(t.children,s,t.format,o),[s]);return r?O.useMemo(()=>n.jsx(n.Fragment,{children:r}),[r]):n.jsx(mc,{path:s})};function fc(e,t=i=>i,s=Sn){const{API_HOST:i="https://graph.availabs.org",baseUrl:o=""}=e,a=`${o}/`,r=bt.falcorGraph(i);async function l({request:u,params:p}){return{data:await Ze(r,e,`/${p["*"]||""}`)}}async function c({request:u,params:p}){const m=await u.formData();return vt(r,e,JSON.parse(m.get("data")),m.get("requestType"),p["*"])}function d(){const u=uo(),p=t(hc);return O.useMemo(()=>n.jsx(bt.FalcorProvider,{falcor:r,children:n.jsx(p,{path:`/${u["*"]||""}`,config:e,theme:s})}),[u["*"]])}return{path:`${a}*`,Component:u=>n.jsx(d,{...u}),loader:l,action:c}}const gc={email:"user",authLevel:5};function js({children:e,theme:t,baseUrl:s="",user:i=gc,pgEnv:o,...a}){const{falcor:r,falcorCache:l}=bt.useFalcor();return n.jsx(se.Provider,{value:{baseUrl:s,user:i,theme:t,falcor:r,falcorCache:l,pgEnv:o},children:e})}function _s({icon:e,className:t}){return n.jsx("div",{className:`${t} flex justify-center items-center`,children:n.jsx("span",{className:e})})}const Xt=({i:e=0,children:t,icon:s,to:i,onClick:o,className:a=null,type:r="side",active:l=!1,subMenus:c=[],themeOptions:d,subMenuActivate:u="onClick",subMenuOpen:p=!1})=>{const{theme:m}=O.useContext(se),f=m[r==="side"?"sidenav":"topnav"](d),b=Yt(),w=O.useMemo(()=>Array.isArray(i)?i:[i],[i]),x=O.useMemo(()=>{const $=c.reduce((A,B)=>(Array.isArray(B.path)?A.push(...B.path):B.path&&A.push(B.path),A),[]);return[...w,...$]},[w,c]),y=!!po({path:`${x[0]}/*`||"",end:!0}),v=r==="side"?f.navitemSide:f.navitemTop,S=r==="side"?f.navitemSideActive:f.navitemTopActive,_=y||l,j=_?S:v,[N,E]=O.useState(p||y),[k,C]=O.useState(!1);return h.useEffect(()=>{E(y)},[y,N,i]),n.jsx("div",{className:r==="side"?f.subMenuParentWrapper:null,onMouseOutCapture:()=>u==="onHover"&&E(!1)||u!=="onHover"&&C(!1)&&E(!1),onMouseMove:()=>u==="onHover"&&E(!0)||u!=="onHover"&&C(!0)&&E(!0),children:n.jsx("div",{className:`${a||j}`,onClick:$=>{if($.stopPropagation(),o)return o(w[0]);w[0]&&b(w[0])},children:n.jsxs("div",{className:"flex",children:[n.jsxs("div",{className:"flex-1 flex",children:[s?n.jsx(_s,{icon:s,className:r==="side"?_?f.menuIconSideActive:f.menuIconSide:_?f.menuIconTopActive:f.menuIconTop}):null,n.jsx("div",{className:f.navItemContent,children:t})]}),n.jsx("div",{onClick:()=>{u==="onClick"&&E(!N)},children:c.length?n.jsx(_s,{icon:N?f.indicatorIconOpen:f.indicatorIcon}):null}),c.length?n.jsx(xc,{i:e,showSubMenu:N,subMenuActivate:u,active:y,hovering:k,subMenus:c,type:r,themeOptions:d,className:a}):""]})})})},xc=({i:e,showSubMenu:t,subMenus:s,type:i,hovering:o,subMenuActivate:a,active:r,themeOptions:l})=>{const{theme:c}=O.useContext(se),d=c[i==="side"?"sidenav":"topnav"](l),u=!r&&a!=="onHover"&&o;return(!t||!s.length)&&!u?null:n.jsx("div",{className:i==="side"?d.subMenuWrapper:u&&e===0?d.subMenuWrapperInactiveFlyout:u&&e>0?d.subMenuWrapperInactiveFlyoutBelow:d.subMenuWrapperTop,children:n.jsx("div",{className:`
							${u&&d.subMenuWrapperInactiveFlyoutDirection}
							${!u&&d.subMenuWrapperChild}
					flex ${i==="side"||u?"flex-col":"flex-row"}
				`,children:s.map((p,m)=>n.jsx(Xt,{i:m+1,to:p.path,icon:p.icon,type:i,className:p.className,onClick:p.onClick,themeOptions:l,subMenus:p.subMenus,children:p.name},m))})})},Ci=({open:e,toggle:t,menuItems:s=[],rightMenu:i=null,themeOptions:o={}})=>{const{theme:a}=O.useContext(se),r=a.topnav(o);return n.jsxs("div",{className:`${e?"md:hidden":"hidden"} ${r.topnavMobileContainer}`,id:"mobile-menu",children:[n.jsx("div",{className:"",children:s.map((l,c)=>n.jsx(Xt,{type:"top",to:l.path,icon:l.icon,themeOptions:o,subMenus:W(l,"subMenus",[]),children:l.name},c))}),n.jsx("div",{className:"",children:i})]})},bc=({open:e,toggle:t,menuItems:s=[],rightMenu:i=null,leftMenu:o=null,subMenuActivate:a,themeOptions:r={}})=>{const{theme:l}=O.useContext(se);let c=l.topnav(r);return n.jsx("div",{className:`${c.topnavWrapper}`,children:n.jsxs("div",{className:`${c.topnavContent} justify-between`,children:[n.jsx("div",{children:o}),n.jsx("div",{className:`${c.topnavMenu}`,children:s.map((d,u)=>n.jsx(Xt,{type:"top",to:d.path,icon:d.icon,subMenuActivate:a,themeOptions:r,subMenus:W(d,"subMenus",[]),children:d.name},u))}),n.jsxs("div",{className:"flex items-center justify-center h-full",children:[n.jsx("div",{className:`${c.topmenuRightNavContainer}`,children:i}),n.jsxs("button",{type:"button",className:`${c.mobileButton}`,onClick:()=>t(!e),children:[n.jsx("span",{className:"sr-only",children:"Open main menu"}),n.jsx("div",{className:"flex justify-center items-center text-2xl",children:n.jsx("span",{className:e?c.menuCloseIcon:c.menuOpenIcon})})]})]})]})})},yc=({...e})=>{const[t,s]=h.useState(!1);return n.jsxs("nav",{children:[n.jsx(bc,{open:t,toggle:s,...e}),n.jsx(Ci,{open:t,...e})]})},ji=({i:e,item:t,themeOptions:s,subMenuActivate:i})=>n.jsx(Xt,{to:t.path,icon:t.icon,className:t.className,onClick:t.onClick,themeOptions:s,subMenuActivate:i,subMenus:W(t,"subMenus",[]),children:t.name},e),wc=({open:e,toggle:t,logo:s=null,topMenu:i,menuItems:o=[],bottomMenu:a,themeOptions:r={},subMenuActivate:l,subMenuStyle:c,...d})=>{const{theme:u}=O.useContext(se),p=u.sidenav(r);return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"md:hidden",onClick:()=>t(!e),children:n.jsx("span",{className:e?p.menuIconOpen:p.menuIconClosed})}),n.jsxs("div",{style:{display:e?"block":"none"},className:"md:hidden",children:[n.jsx("div",{className:"fixed inset-0 z-20 transition-opacity ease-linear duration-300",children:n.jsx("div",{className:"absolute inset-0 opacity-75"})}),n.jsx("div",{className:`fixed inset-0 flex z-40 ${p.contentBgAccent}`,children:n.jsxs("div",{className:`flex-1 flex flex-col max-w-xs w-full transform ease-in-out duration-300 ${p.contentBg}`,children:[n.jsx("div",{className:"absolute top-0 right-0 -mr-14 p-1",children:n.jsx("button",{onClick:()=>t(!e),className:"flex items-center justify-center h-12 w-12 rounded-full focus:outline-none focus:bg-gray-600 os-icon os-icon-x"})}),n.jsxs("div",{className:"flex-1 h-0 pt-2 pb-4 overflow-y-auto overflow-x-hidden",children:[n.jsx("div",{className:"px-6 pt-4 pb-8 logo-text gray-900",children:n.jsx(De,{to:"/",className:`flex-shrink-0 flex items-center ${p.text}`,children:s})}),n.jsx("div",{children:i}),n.jsx("nav",{className:"flex-1",children:o.map((m,f)=>n.jsx("div",{className:m.sectionClass,children:ji({i:f,page:m,themeOptions:r,subMenuActivate:l})},f))}),n.jsx("div",{children:a})]})]})})]})]})},vc=({menuItems:e=[],logo:t=null,topMenu:s,bottomMenu:i,toggle:o,open:a,mobile:r,themeOptions:l={},subMenuActivate:c,subMenuStyle:d,...u})=>{const{theme:p}=O.useContext(se),m=p.sidenav(l);return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:`${m.sidenavWrapper}`,children:[s,n.jsx("nav",{className:`${m.itemsWrapper}`,children:e.map((f,b)=>ji({i:b,item:f,themeOptions:l,subMenuActivate:c}))}),i]}),r==="side"?"":n.jsx("div",{className:`${m.topnavWrapper} md:hidden`,children:n.jsxs("div",{className:`${m.topnavContent} justify-between`,children:[n.jsx("div",{children:s}),n.jsxs("div",{className:"flex items-center justify-center h-full",children:[n.jsx("div",{className:`${m.topmenuRightNavContainer}`,children:i}),n.jsxs("button",{type:"button",className:m.mobileButton,onClick:()=>o(!a),children:[n.jsx("span",{className:"sr-only",children:"Open main menu"}),n.jsx("div",{className:"flex justify-center items-center text-2xl",children:n.jsx("span",{className:a?m.menuCloseIcon:m.menuOpenIcon})})]})]})]})})]})},Zt=e=>{const[t,s]=h.useState(!1);return n.jsxs(n.Fragment,{children:[n.jsx(vc,{...e,open:t,toggle:s}),e.mobile==="side"?n.jsx(wc,{open:t,toggle:s,...e}):n.jsx(Ci,{open:t,...e,themeOptions:{}})]})};let Nc={none:"",micro:"mr-14",mini:"mr-20",miniPad:"mr-0",compact:"mr-44",full:"mr-64"},Cc={none:"",micro:"w-14",mini:"w-20",miniPad:"w-0",compact:"w-44",full:"w-64"};const jc=()=>n.jsx("div",{className:"h-12"}),Tt=({children:e,menus:t,sideNav:s={},topNav:i={},title:o})=>{O.useContext(se);const a={size:s.size||"none",color:s.color||"white",menuItems:s.menuItems||t,logo:(s==null?void 0:s.logo)||jc},r={position:i.position||"block",size:i.size||"compact",menu:i.menu||"left",subMenuStyle:i.subMenuStyle||"row",menuItems:(i.menuItems||[]).filter(c=>!c.hideInNav),logo:i.logo||n.jsxs("div",{className:"flex items-center justify-center h-12",children:[n.jsx("div",{to:"/",className:`${["none"].includes(a.size)?"":"md:hidden"}`}),o]}),rightMenu:i.rightMenu||n.jsx("div",{})},l=a.logo;return n.jsxs("div",{className:"flex",children:[a.size==="none"?"":n.jsx("div",{className:`hidden md:block ${Nc[a.size]}`,children:n.jsx("div",{className:`fixed h-screen ${Cc[a.size]}`,children:n.jsx(Zt,{topMenu:n.jsx(l,{sideNav:a}),themeOptions:a,menuItems:a.menuItems})})}),n.jsxs("div",{className:"flex-1 flex items-start flex-col items-stretch w-full min-h-screen",children:[r.size==="none"?"":n.jsx(n.Fragment,{children:n.jsx("div",{className:`${r.position==="fixed"?"sticky top-0 z-20 w-full ":""}`,children:n.jsx(yc,{themeOptions:r,leftMenu:r.logo,menuItems:r.menuItems,rightMenu:r.rightMenu})})}),n.jsx("div",{id:"content",className:"flex-1",children:e})]})]})};function zt(e,t,s="",i){let o=t.filter(a=>e.id&&a.parent===e.id).sort((a,r)=>a.index-r.index);return o.length===0?!1:o.map((a,r)=>{let l={id:a.id,path:`${i?`${s}/edit`:s}/${a.url_slug||a.id}`,name:a.title};return zt(l,t)&&(l.subMenus=zt(a,t,s,i)),l})}function _c(e,t){const s=window.location.pathname.replace(t,"").replace("/","").replace("edit/","");return s===""?e.find(i=>i.index===0&&i.parent===""):e.find((i,o)=>i.url_slug===s||i.id===s)}function _i(e,t){var a,r;const s=_c(e,t),i=e.filter(l=>l.parent===(s==null?void 0:s.id)).length;return(s?(r=(a=s.url_slug)==null?void 0:a.split("/"))==null?void 0:r.length:1)+(i?1:0)}function Ei(e,t="",s=!1){return e.sort((i,o)=>i.index-o.index).filter(i=>!i.parent).filter(i=>s||i.published!=="draft").map((i,o)=>{let a={id:i.id,path:`${s?`${t}/edit`:t}/${i.url_slug||i.id}`,name:`${i.title} ${i.published==="draft"?"*":""}`,hideInNav:i.hide_in_nav};return zt(a,e,t,s)&&(a.subMenus=zt(i,e,t,s)),a})}const pe=(e,t="update")=>{let s=new FormData;return s.append("data",JSON.stringify(e)),s.append("requestType",t),s},Ec=(e,t)=>e.parent?`${t.filter(i=>i.id===e.parent)[0].url_slug}/`:"",it=(e,t)=>{let s=`${Ec(e,t)}${Ti(e.title)}`;return e.url_slug&&e.url_slug===s||!t.map(i=>i.url_slug).includes(s)?s:`${s}_${e.index}`},Ti=e=>e&&e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map(t=>t.toLowerCase()).join("_"),Tc={1:" pt-2 pb-1 uppercase text-sm text-blue-400 hover:underline cursor-pointer border-r-2 mr-4",2:"pl-2 pt-2 pb-1 uppercase text-sm text-slate-400 hover:underline cursor-pointer border-r-2 mr-4",3:"pl-4 pt-2 pb-1 text-sm text-slate-400 hover:underline cursor-pointer border-r-2 mr-4",4:"pl-6 pt-2 pb-1 text-sm text-slate-400 hover:underline cursor-pointer border-r-2 mr-4"},Sc=e=>{var t;return e?typeof e=="object"?e:(t=JSON.parse(e))==null?void 0:t.text:{}};function Pn(e,t=!1){const s=e;return{menuItems:((s==null?void 0:s.sections)||[]).reduce((o,{title:a,element:r,level:l="1",...c})=>{var u,p,m;if(!r||!a||l==="0")return o;const d=r["element-type"]==="lexical"||!r["element-type"]?(m=(p=(u=Sc(r["element-data"]))==null?void 0:u.root)==null?void 0:p.children)==null?void 0:m.reduce((f,{type:b,tag:w,children:x,...y})=>{var S,_,j,N;const v=b==="heading"&&((_=(S=x[0])==null?void 0:S.text)!=null&&_.length)?[{name:(j=x[0])==null?void 0:j.text,onClick:E=>{const k=[...window.document.querySelectorAll(w)].find(C=>{var $,A;return(($=C==null?void 0:C.children[0])==null?void 0:$.innerHTML)===((A=x[0])==null?void 0:A.text)});k==null||k.scrollIntoView({behavior:"smooth"})},className:`pl-2 pr-4 pb-1 text-sm text-slate-400 hover:text-slate-700 cursor-pointer border-r-2 mr-4
                            ${((N=[...window.document.querySelectorAll(w)].find(E=>{var k,C;return((k=E==null?void 0:E.children[0])==null?void 0:k.innerHTML)===((C=x[0])==null?void 0:C.text)}))==null?void 0:N.offsetParent)===null?"text-blue-200":""}`}]:[];return[...f,...v]},[]):[];return[...o,{name:a,onClick:f=>{const b=window.document.getElementById(`#${a==null?void 0:a.replace(/ /g,"_")}`);b==null||b.scrollIntoView({behavior:"smooth"})},className:Tc[l]},...d||[]]},[]),themeOptions:{size:"full",color:"transparent"}}}function kc({item:e,dataItems:t,attributes:s,logo:i,rightMenu:o}){var b,w,x;e||(e={});const{baseUrl:a,theme:r,user:l}=O.useContext(se),c=O.useMemo(()=>s.sections.ViewComp,[]),d=O.useMemo(()=>Ei(t,a,!1),[t]),u=(e==null?void 0:e.index)==="999"?1:_i(t,a),p=Pn(e),m=(w=(b=e.sections)==null?void 0:b.filter(y=>y.is_header))==null?void 0:w[0],f=(x=e.sections)==null?void 0:x.filter(y=>!y.is_header&&!y.is_footer);return n.jsxs("div",{id:"page_view",children:[(e==null?void 0:e.header)==="above"&&n.jsx(c,{item:e,value:[m],...s.sections}),n.jsx(Tt,{topNav:{menuItems:d,position:"fixed",logo:i,rightMenu:o},sideNav:e.sideNav?e.sideNav:p,children:n.jsxs("div",{className:`${r.page.wrapper1} ${r.navPadding[u]}`,children:[(e==null?void 0:e.header)==="below"&&n.jsx(c,{item:e,value:[m],...s.sections}),n.jsxs("div",{className:`${r.page.wrapper2}`,children:[(e==null?void 0:e.sidebar)==="show"&&n.jsx(Mc,{inPageNav:p}),n.jsxs("div",{className:r.page.wrapper3,children:[(e==null?void 0:e.header)==="inpage"&&n.jsx(c,{item:e,value:[m],...s.sections}),(l==null?void 0:l.authLevel)>=5&&n.jsx($c,{item:e,baseUrl:a}),n.jsx(c,{item:e,value:f,...s.sections})]})]})]})}),(e==null?void 0:e.footer)&&n.jsx("div",{className:"h-[300px] bg-slate-100"})]})}function $c({baseUrl:e,item:t}){return n.jsx(De,{className:"z-30 absolute right-[10px] top-[5px]",to:`${e}/edit/${t.url_slug}`,children:n.jsx("i",{className:"fad fa-edit fa-fw flex-shrink-0 text-lg text-slate-400 hover:text-blue-500"})})}function Mc({inPageNav:e}){return n.jsx("div",{className:"w-64 hidden xl:block",children:n.jsx("div",{className:"w-64 sticky top-20 hidden xl:block h-screen",children:n.jsx("div",{className:"h-[calc(100%_-_5rem)] overflow-y-auto overflow-x-hidden font-display",children:n.jsx(Zt,{...e})})})})}const Ic=({label:e,types:t,type:s,setType:i,multi:o=!1,size:a="small",disabled:r,disabledTitle:l,autoSelect:c=!0})=>(h.useEffect(()=>{var p,m;const d=((p=t[0])==null?void 0:p.value)||t[0];if(!d||!c||r)return;const u=o?[d]:d;(!s||Array.isArray(s)&&!((m=s.filter(f=>f))!=null&&m.length))&&i(u)},[t]),n.jsxs("div",{className:"my-1 flex flex-rows flex-wrap",title:r?l:null,children:[e&&n.jsx("div",{className:"p-2 pl-0 w-1/4",children:e}),n.jsx("span",{className:`
              
                space-x-1 rounded-lg bg-slate-100 py-0.5
                flex flex-row flex-wrap
                shadow-sm 
                ${a==="large"?"w-full":"w-fit"}`,children:t.map((d,u)=>{const p=(d==null?void 0:d.value)||d,m=o&&Array.isArray(s)?s:o&&!Array.isArray(s)?[s]:!o&&Array.isArray(s)?s[0]:s,f=o&&(m==null?void 0:m.includes(p))||!o&&m===p;return n.jsx("button",{type:"button",className:`
                            ${u!==0&&"-ml-px"} 
                            ${r&&"pointer-events-none"}
                            rounded-lg py-[0.4375rem] break-none
                            ${f?"text-gray-900 bg-white shadow":"text-gray-700"} hover:text-blue-500
                            min-w-[60px] min-h-[30px] uppercase
                            relative items-center px-2 text-xs items-center justify-center text-center 
                            focus:z-10`,onClick:()=>{const b=o&&(m!=null&&m.includes(p))?m.filter(w=>w!==p):o&&!(m!=null&&m.includes(p))?[...m,p]:p;i(b)},children:(d==null?void 0:d.label)||d},u)})})]}));function rt({options:e=[],onChange:t,value:s,nameAccessor:i=r=>(r==null?void 0:r.name)||r,valueAccessor:o,className:a}){const[r,l]=h.useState(""),c=r===""?e:e.filter(d=>(i(d)+"").toLowerCase().replace(/\s+/g,"").startsWith(r.toLowerCase().replace(/\s+/g,"")));return n.jsx("div",{className:"w-full",children:n.jsx(dt,{value:s,onChange:t,children:n.jsxs("div",{className:"relative mt-1",children:[n.jsxs("div",{className:a||"relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-blue-300 sm:text-sm",children:[n.jsx(dt.Input,{className:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",displayValue:d=>i(d)||d,onChange:d=>l(d.target.value)}),n.jsx(dt.Button,{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:n.jsx("div",{className:"h-5 w-5 text-gray-400 flex items-center justify-center","aria-hidden":"true",children:n.jsx("div",{class:"fa fa-chevron-down"})})})]}),n.jsx(je,{as:h.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",afterLeave:()=>l(""),children:n.jsx(dt.Options,{className:"z-50 absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:c.length===0&&r!==""?n.jsx("div",{className:"relative cursor-default select-none py-2 px-4 text-gray-700",children:"Nothing found."}):c.filter((d,u)=>u<60).map((d,u)=>n.jsx(dt.Option,{className:({active:p})=>`relative cursor-default select-none py-2 pl-10 pr-4 ${p?"bg-blue-600 text-white":"text-gray-900"}`,value:d,children:({selected:p,active:m})=>n.jsxs(n.Fragment,{children:[n.jsx("span",{className:`block truncate ${p?"font-medium":"font-normal"}`,children:i(d)||d}),p?n.jsx("span",{className:`absolute inset-y-0 left-0 flex items-center pl-3 ${m?"text-white":"text-blue-600"}`,children:n.jsx("div",{className:"h-5 w-5 flex items-center justify-center","aria-hidden":"true",children:n.jsx("div",{className:"fa fa-check"})})}):null]})},u))})})]})})})}const re="hazmit_dama",Si=e=>Object.entries(e||{}).reduce((t,s)=>{const[i,o]=s;return typeof o.value<"u"?t[i]=o.value:t[i]=o,t},{}),Ac=({source_id:e,value:t,onChange:s})=>{const{falcor:i,falcorCache:o}=O.useContext(se);h.useEffect(()=>{async function r(){const l=["dama",re,"sources","byId",e,"views","length"],c=await i.get(l);await i.get(["dama",re,"sources","byId",e,"views","byIndex",{from:0,to:W(c.json,l,0)-1},"attributes",["view_id","version"]])}r()},[i,re]);const a=h.useMemo(()=>Object.values(W(o,["dama",re,"sources","byId",e,"views","byIndex"],{})).map(r=>Si(W(o,r.value,{attributes:{}}).attributes)),[o,e,re]);return h.useEffect(()=>{var r;!t&&((r=a==null?void 0:a[0])!=null&&r.view_id)&&s(a==null?void 0:a[0])},[a]),n.jsx(rt,{options:["",...a],value:t,nameAccessor:r=>r==null?void 0:r.version,onChange:r=>s(r)})},Rc=({value:e,onChange:t})=>{const{falcor:s,falcorCache:i}=O.useContext(se);h.useEffect(()=>{async function a(){const r=["dama",re,"sources","length"],l=await s.get(r);await s.get(["dama",re,"sources","byIndex",{from:0,to:W(l.json,r,0)-1},"attributes",["source_id","name","metadata"]])}a()},[s,re]);const o=h.useMemo(()=>Object.values(W(i,["dama",re,"sources","byIndex"],{})).map(a=>Si(W(i,a.value,{attributes:{}}).attributes)),[i,re]);return n.jsx(rt,{options:["",...o],value:e,onChange:a=>t(a)})};function Oc({item:e={}}){const{baseUrl:t}=O.useContext(se),[s,i]=h.useState(!1);return n.jsxs("div",{className:"grid grid-cols-4 px-2 py-3 border-b hover:bg-blue-50",children:[n.jsx("div",{children:n.jsxs(De,{to:`${t}/templates/edit/${e.id}`,children:[n.jsx("div",{className:"px-2 font-medium text-lg text-slate-700",children:e.title}),n.jsx("div",{className:"px-2 text-xs text-slate-400",children:e.id})]})}),n.jsx("div",{}),n.jsx("div",{}),n.jsxs("div",{className:"text-right flex items-center flex-row justify-end px-2 ",children:[n.jsx(De,{to:`${t}/templates/pages/${e.id}`,className:"fa-thin fa-memo px-2 py-1 mx-2 text-bold cursor-pointer",title:"pages"}),n.jsx("i",{className:"fa fa-trash text-red-300 hover:text-red-500 cursor-pointer",onClick:()=>i(!s)}),n.jsx(Pc,{item:e,open:s,setOpen:i})]})]})}function Dc({children:e,dataItems:t,edit:s,baseUrl:i="",logo:o,rightMenu:a,sideNav:r=[],...l}){const{path:c}=Me(),[d,u]=h.useState(!1),p=[{path:`${i}/templates`,name:"Templates"}];return n.jsx(Tt,{topNav:{menuItems:p,position:"fixed",logo:o,rightMenu:a},sideNav:r,children:n.jsx("div",{className:"py-6 h-full",children:n.jsxs("div",{className:"bg-white h-full shadow border max-w-6xl mx-auto px-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"text-2xl p-3 font-thin flex-1",children:"Templates"}),c===`${i}/templates`?n.jsx("div",{className:"px-1",children:n.jsx(De,{to:`${i}`,className:"inline-flex w-36 justify-center rounded-lg cursor-pointer text-sm font-semibold py-1 px-4 bg-blue-600 text-white hover:bg-blue-500 shadow-lg border border-b-4 border-blue-800 hover:border-blue-700 active:border-b-2 active:mb-[2px] active:shadow-none",children:" Templates "})}):n.jsx("div",{className:"px-1",children:n.jsx("div",{onClick:()=>u(!d),className:"inline-flex w-36 justify-center rounded-lg cursor-pointer text-sm font-semibold py-1 px-4 bg-blue-600 text-white hover:bg-blue-500 shadow-lg border border-b-4 border-blue-800 hover:border-blue-700 active:border-b-2 active:mb-[2px] active:shadow-none",children:" New Template"})})]}),n.jsx("div",{className:"px-6 pt-8",children:n.jsx("div",{className:"shadow rounded border",children:t.filter(m=>m.template_id=="-99").map(m=>n.jsx(Oc,{item:m},m.id))})}),n.jsx(Lc,{open:d,setOpen:u})]})})})}function Lc({open:e,setOpen:t}){const s=h.useRef(null),i=Le(),{pathname:o="/edit"}=Me(),[a,r]=h.useState(!1),[l,c]=h.useState("");return n.jsxs(Hn,{open:e,setOpen:t,initialFocus:s,children:[n.jsxs("div",{className:"sm:flex sm:items-start",children:[n.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:n.jsx("i",{className:"fa fa-plus text-blue-400"})}),n.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full px-2",children:[n.jsx(ye.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:"New Template"}),n.jsx("div",{className:"mt-2 w-full",children:n.jsx("input",{className:"w-full px-2 py-1 text font-medium text-slate-500 focus:outline-none border-slate-300 border-b-2 focus:border-blue-500",value:l,onChange:d=>c(d.target.value),placeholder:"Template Title"})})]})]}),n.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[n.jsxs("button",{type:"button",disabled:a||l.length<3,className:"inline-flex w-full justify-center rounded-md disabled:bg-slate-300 bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 sm:ml-3 sm:w-auto",onClick:async()=>{const d={title:l,url_slug:Ti(l),template_id:-99,hide_in_nav:!0,index:999};r(!0),await i(pe(d),{method:"post",action:o}),r(!1),t(!1)},children:["Creat",a?"ing...":"e"]}),n.jsx("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>t(!1),ref:s,children:"Cancel"})]})]})}function Pc({item:e,open:t,setOpen:s}){const i=h.useRef(null),o=Le(),{pathname:a="/edit"}=Me(),[r,l]=h.useState(!1);return n.jsxs(Hn,{open:t,setOpen:s,initialFocus:i,children:[n.jsxs("div",{className:"sm:flex sm:items-start",children:[n.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:n.jsx("i",{className:"fa fa-exlamation-triangle"})}),n.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[n.jsxs(ye.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:["Delete Page ",e.title," ",e.id]}),n.jsx("div",{className:"mt-2",children:n.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this Template? All of the page data will be permanently removed from our servers forever. This action cannot be undone."})})]})]}),n.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[n.jsxs("button",{type:"button",disabled:r,className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:async()=>{l(!0),await o(pe(e,"delete"),{method:"post",action:a}),l(!1),s(!1)},children:["Delet",r?"ing...":"e"]}),n.jsx("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>s(!1),ref:i,children:"Cancel"})]})]})}const ki=e=>typeof(e==null?void 0:e.value)=="object"?ki(e.value):(e==null?void 0:e.value)||e,Fc={"docs-play":"Playground","docs-page":"Live","docs-draft":"Draft","docs-ctp":"CTP Live"},Es={"docs-play":"/playground","docs-page":"","docs-ctp":"","docs-draft":"/drafts"},Wt=({app:e,type:t,filter:s,action:i="load",tags:o,attributes:a=[{key:"id",label:"id"},{key:"app",label:"app"},{key:"type",label:"type"},{key:"data",label:"data"},{key:"updated_at",label:"updated_at"}]})=>({format:{app:e,type:t,attributes:a},children:[{type:()=>{},action:i,filter:{options:JSON.stringify({filter:s}),tags:o,attributes:a.map(r=>r.key)},path:"/"}]}),Bc=e=>Object.keys(e).find(t=>t.toLowerCase().includes("name")||t.toLowerCase().includes("title")),Hc=(e,t,s)=>e==="geoid"?(s==null?void 0:s.county)||(s==null?void 0:s.name)||t:(s==null?void 0:s[Bc(s)])||t,zc=({item:e,params:t,logo:s,rightMenu:i,baseUrl:o=""})=>{var v,S,_,j;const[a,r]=h.useState(10),{falcor:l,falcorCache:c}=O.useContext(se),{id:d}=t,u=(S=(v=e.data_controls)==null?void 0:v.view)==null?void 0:S.view_id,p=(j=(_=e.data_controls)==null?void 0:_.id_column)==null?void 0:j.name,m=[e.type],f=[{path:`${o}/templates`,name:"Templates"}];if(!d)return null;const[b,w]=h.useState([]);h.useEffect(()=>{(async function(){const N=await m.reduce(async(E,k)=>{const C=await E,$=await Ze(l,Wt({app:"dms-site",type:k,filter:{"data->>'template_id'":[d]}}),"/");return[...C,...$]},Promise.resolve([]));w(N)})()},[d]),h.useEffect(()=>{u&&async function(){l.get(["dama",re,"viewsbyId",u,"data","length"])}()},[d,u]);const x=O.useMemo(()=>W(c,["dama",re,"viewsbyId",u,"data","length"],0),[d,re,u,c]);h.useEffect(()=>{u&&async function(){l.get(["dama",re,"viewsbyId",u,"databyIndex",{from:0,to:x-1},Object.keys(e.data_controls.active_row||{})])}()},[d,re,u,c]);const y=O.useMemo(()=>Object.values(W(c,["dama",re,"viewsbyId",u,"databyIndex"],{})).map(N=>W(c,[...N.value],"")),[d,p,u,c]);return b.map(({type:N,data:E,updated_at:k})=>{var $,A,B;const C=y.find(T=>T[p]===E.value.id_column_value);return{title:Hc(p,E.value.id_column_value,C)||E.value.title,location:Fc[N],view:`${Es[N]}/${($=E==null?void 0:E.value)==null?void 0:$.url_slug}`,edit:`${Es[N]}/edit/${(A=E==null?void 0:E.value)==null?void 0:A.url_slug}`,updated:ki(k),status:((B=E==null?void 0:E.value)==null?void 0:B.num_errors)>0?"error":"success"}}),n.jsx(Tt,{topNav:{menuItems:f,position:"fixed",logo:s,rightMenu:i},sideNav:[],children:n.jsx("div",{className:"h-full flex-1 flex flex-col text-gray-900 bg-slate-100",children:n.jsx("div",{className:"py-6 h-full",children:n.jsxs("div",{className:"bg-white h-full shadow border max-w-6xl mx-auto px-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-2xl pt-3 font-thin flex-1",children:[n.jsx("span",{className:"font-semibold",children:e.title})," / Generated Pages"]}),n.jsxs("label",{className:"text-sm font-thin flex-1 italic",children:["Showing ",b==null?void 0:b.length," generated / ",x," available items"]})]}),n.jsxs("div",{className:"text-xs",children:[n.jsx("label",{children:"show"}),n.jsx("select",{className:"p-2 m-2 h-fit",value:a,onChange:N=>r(N.target.value),children:[10,25,50,75,100].map(N=>n.jsx("option",{value:N,children:N},N))}),n.jsx("label",{children:"rows"})]})]}),n.jsx("div",{className:"px-6 pt-8",children:n.jsx("div",{className:"shadow rounded border"})})]})})})})},Fn=(e,t={})=>{let s=t;try{s=JSON.parse(e)}catch{}return s},Wc=(e,t,s)=>{t&&s([])},$i=(e,t,s)=>{var o;let i=(o=e[0])==null?void 0:o.key;t(e),s&&s(i)},Uc=({props:e,selected:t,setSelected:s,onChange:i})=>n.jsxs("div",{className:"w-fit inline-block ml-2",children:[e.label,n.jsx("button",{className:"hover:text-red-300 animate ml-1 p-1 rounded-md rbt-token-remove-button",onClick:o=>{const a=t.filter(r=>r.key!==e.key);$i(a,s,i)},children:n.jsx("i",{className:"fa fa-close"})})]}),Vc=({results:e,menuProps:t,labelKey:s,filter:i,filters:o,setFilter:a,onChange:r,...l})=>n.jsxs(ho,{className:"bg-slate-100 overflow-hidden z-10 rounded-md",...t,children:[n.jsx("div",{className:"flex flex-row flex-wrap items-center justify-start gap-1 p-1 bg-slate-200 text-xs font-bold",children:o.map(({icon:c,label:d,value:u,filterText:p})=>{const m=i===p,f=b=>u?r(u):a(m?null:p);return n.jsxs("button",{title:`Filter by: ${p}`,className:`py-1 px-2 my-0.5 
                                    ${m?"bg-slate-300 hover:bg-blue-300":"bg-slate-100 hover:bg-blue-100"} 
                                     rounded-md`,onClick:f,children:[n.jsx("i",{className:`${c} pr-2 pl-1`}),d]},p)})}),e.map((c,d)=>n.jsx(fo,{className:"block hover:bg-slate-200 text-xl tracking-wide pl-1",option:c,position:d,children:c.label}))]}),qc=({className:e,value:t,onChange:s,options:i=[],filters:o=[],showAll:a=!1,placeholder:r="Search..."})=>{const[l,c]=h.useState([]),[d,u]=h.useState(""),[p,m]=h.useState(i);return h.useEffect(()=>{if(!t)return;const f=i.filter(b=>b.key===t);c(f)},[t]),h.useEffect(()=>{m(i.filter(f=>{var b;return!d||((b=f==null?void 0:f.label)==null?void 0:b.toLowerCase().includes(d.toLowerCase()))}))},[i,d]),n.jsx("div",{className:"flex justify-between",children:n.jsxs("div",{className:`flex flex row ${e} w-full shrink my-1 bg-white p-1 pl-3 rounded-l-md`,children:[n.jsx("i",{className:"fa fa-search font-light text-xl bg-white rounded-r-md"}),n.jsx(mo,{className:"w-full",onSearch:Wc,minLength:0,id:"search",placeholder:r,options:p,labelKey:f=>`${f==null?void 0:f.label}`,defaultSelected:l,onChange:f=>$i(f,c,s),selected:l,inputProps:{className:"w-full flex flex-row flex-wrap p-2"},renderMenu:(f,b,w)=>Vc({results:f,menuProps:b,labelKey:w,filters:o,filter:d,setFilter:u,onChange:s}),renderToken:f=>n.jsx(Uc,{props:f,selected:l,setSelected:c,onChange:s})},"search")]})})};function Mi({position:e="above",bgImg:t="",logo:s="",title:i="Title",bgClass:o="",subTitle:a="subTitle",note:r="note"}){return n.jsxs("div",{className:`h-[300px] bg-cover bg-center w-full flex ${o}`,style:{backgroundImage:`url("${t}")`},children:[n.jsx("div",{className:"p-2",children:s&&n.jsx("img",{src:s,alt:"NYS Logo"})}),n.jsxs("div",{className:"flex-1 flex flex-col  items-center p-4",children:[n.jsx("div",{className:"flex-1"}),n.jsx("div",{className:"text-3xl sm:text-7xl font-bold text-[#f2a91a] text-right w-full text-display",children:i&&n.jsx("div",{children:i})}),n.jsx("div",{className:"text-lg tracking-wider pt-2 sm:text-3xl font-bold text-slate-200 text-right w-full uppercase",children:a&&n.jsx("div",{children:a})}),n.jsx("div",{className:"text-lg tracking-wider sm:text-xl font-bold text-slate-200 text-right w-full uppercase",children:r&&n.jsx("div",{children:r})}),n.jsx("div",{className:"flex-1"})]})]})}const Yc=({position:e="above",bgImg:t="/img/header.png",logo:s="/img/nygov-logo.png",bgClass:i="",title:o="MitigateNY",subTitle:a="New York State Hazard Mitigation Plan",note:r="2023 Update"})=>new Promise((l,c)=>{l({position:e,bgImg:t,bgClass:i,logo:s,title:o,subTitle:a,note:r})}),Ii=({value:e,onChange:t,size:s})=>{let i=h.useMemo(()=>e&&Ri(e)?JSON.parse(e):{},[e]);h.useState(!0),h.useState("");const[o,a]=h.useState({bgImg:i.bgImg||"",logo:i.logo||"",title:i.title||"Title",subTitle:i.subTitle||"subTitle",note:i.note||"note",bgClass:i.bgClass||""});return h.useEffect(()=>{e!==JSON.stringify(o)&&t(JSON.stringify(o))},[o]),n.jsx("div",{className:"w-full",children:n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"border rounded-md border-blue-500 bg-blue-50 p-2 m-1",children:[n.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[n.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"Title:"}),n.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:n.jsx("input",{type:"text",value:o.title,onChange:r=>a({...o,title:r.target.value})})})]}),n.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[n.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"subTitle:"}),n.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:n.jsx("input",{type:"text",value:o.subTitle,onChange:r=>a({...o,subTitle:r.target.value})})})]}),n.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[n.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"Note:"}),n.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:n.jsx("input",{type:"text",value:o.note,onChange:r=>a({...o,note:r.target.value})})})]}),n.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[n.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"Bg Class:"}),n.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:n.jsx("input",{type:"text",value:o.bgClass,onChange:r=>a({...o,bgClass:r.target.value})})})]}),n.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[n.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"bgImg:"}),n.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:n.jsx("input",{type:"text",value:o.bgImg,onChange:r=>a({...o,bgImg:r.target.value})})})]}),n.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[n.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"logo:"}),n.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:n.jsx("input",{type:"text",value:o.logo,onChange:r=>a({...o,logo:r.target.value})})})]})]}),n.jsx(Mi,{...o})]})})},Gc=({value:e})=>{if(!e)return"";let t=typeof e=="object"?e["element-data"]:JSON.parse(e);return n.jsx(Mi,{...t})};Ii.settings={hasControls:!0,name:"ElementEdit"};const Jc={name:"Header: Default",type:"Header",variables:[{name:"bgImg",default:"/img/header.png"},{name:"logo",default:"/img/nygov-logo.png"},{name:"title",default:"MitigateNY"},{name:"subTitle",default:"New York State Hazard Mitigation Plan"},{name:"bgClass",default:""},{name:"note",default:"2023 Update"}],getData:Yc,EditComp:Ii,ViewComp:Gc},Kc=e=>{try{return JSON.parse(e)}catch{return{}}},Xc=({title:e,className:t,color:s,setColor:i})=>n.jsxs("div",{className:t,children:[n.jsx("label",{className:"shrink-0 pr-2 w-1/4",children:e}),n.jsx("input",{id:"background",list:"colors",className:"rounded-md shrink",type:"color",value:s,onChange:o=>i(o.target.value)}),n.jsx("datalist",{id:"colors",children:["#1e3a8a","#1e40af","#1d4ed8","#2563eb","#3b82f6","#60a5fa","#93c5fd","#bfdbfe","#dbeafe","#eff6ff","#713f12","#854d0e","#a16207","#ca8a04","#eab308","#facc15","#fde047","#fef08a","#fef9c3","#fefce8"].map(o=>n.jsx("option",{children:o},o))})]}),Ai=({value:e,onChange:t})=>{const s=Kc(e),i={text:"",size:"4xl",color:"000000"},[o,a]=h.useState((s==null?void 0:s.bgColor)||"#fff"),[r,l]=h.useState((s==null?void 0:s.text)||e||i);h.useEffect(()=>{t(JSON.stringify({bgColor:o,text:r}))},[o,r]);const c=Xe.lexical.EditComp;return n.jsx("div",{className:"w-full",children:n.jsxs("div",{className:"relative",children:[n.jsx(Xc,{title:"Background: ",className:"w-full px-2 py-1 flex flex-row text-sm items-center border border-dashed",color:o,setColor:a}),n.jsx(c,{value:r,onChange:l,bgColor:o})]})})};Ai.settings={hasControls:!0,name:"ElementEdit"};const Zc=({value:e})=>{var o,a,r,l,c,d,u,p;if(!e)return"";let t=typeof e=="object"?e["element-data"]:JSON.parse(e);const s=(t==null?void 0:t.text)||e;if(!s||((a=(o=s==null?void 0:s.root)==null?void 0:o.children)==null?void 0:a.length)===1&&((d=(c=(l=(r=s==null?void 0:s.root)==null?void 0:r.children)==null?void 0:l[0])==null?void 0:c.children)==null?void 0:d.length)===0||((p=(u=s==null?void 0:s.root)==null?void 0:u.children)==null?void 0:p.length)===0)return null;const i=Xe.lexical.ViewComp;return n.jsx("div",{children:n.jsx(i,{value:s,bgColor:t==null?void 0:t.bgColor})})},Qc={name:"Rich Text",EditComp:Ai,ViewComp:Zc},ed={lexical:Qc,"Header: Default Header":Jc};let Ne=ed;const Ri=e=>{try{JSON.parse(e)}catch{return!1}return!0},td={card:"fa-thin fa-credit-card",table:"fa-thin fa-table",graph:"fa-thin fa-chart-column",map:"fa-thin fa-map",lexical:"fa-thin fa-text"};function nd(e){const{value:t,onChange:s,size:i}=e,o=(r,l)=>{Be(t,{...t,[r]:l})||s({...t,[r]:l})};h.useEffect(()=>{t!=null&&t["element-type"]||s({...t,"element-type":"lexical"})},[]);let a=(Ne[W(t,"element-type","lexical")]||Ne.lexical).EditComp;return n.jsxs("div",{className:"w-full",children:[n.jsx("div",{className:"relative my-1",children:n.jsx(qc,{className:"flex-row-reverse",placeholder:"Search for a Component...",options:Object.keys(Ne).filter(r=>!Ne[r].hideInSelector).map(r=>({key:r,label:Ne[r].name||r})),value:t==null?void 0:t["element-type"],onChange:async r=>{if(r==="paste")return navigator.clipboard.readText().then(l=>{const c=Ri(l)&&JSON.parse(l||"{}");return(c==null?void 0:c["element-type"])&&s({...t,...c})});o("element-type",r)},filters:[{icon:"fa-thin fa-paste",label:"Paste",value:"paste"},...[...new Set(Object.keys(Ne).filter(r=>!Ne[r].hideInSelector).map(r=>(Ne[r].name||r).split(":")[0]))].map(r=>({icon:`${td[r.toLowerCase()]||r.toLowerCase()}`,label:r,filterText:r}))]})}),n.jsx("div",{children:n.jsx(a,{value:(t==null?void 0:t["element-data"])||"",onChange:r=>o("element-data",r),size:i})})]})}function sd({value:e}){let t=Ne[W(e,"element-type","lexical")]?Ne[W(e,"element-type","lexical")].ViewComp:()=>n.jsxs("div",{children:[" Component ",e["element-type"]," Not Registered "]});return n.jsx(t,{value:(e==null?void 0:e["element-data"])||""})}const id={EditComp:nd,ViewComp:sd},pn=async({item:e,url:t,destination:s,id_column:i,dataRows:o,falcor:a,setLoadingStatus:r,locationNameMap:l,setGeneratedPages:c,urlSuffixCol:d="geoid"})=>{r("Generating Pages...",o);const u=o.sort((f,b)=>f!=null&&f.state_fips?+b[i.name]-+f[i.name]:!0).map(f=>f[i.name]);let p=0;const m=[];await mn(u,async(f,b)=>{var j,N,E,k;const w=await l.reduce(async(C,$)=>(await C,(await Ze(a,Wt({app:"dms-site",type:$,filter:{"data->>'template_id'":[e.id],"data->>'id_column_value'":[f]}}),"/"))[0]),Promise.resolve([]));console.log("existing page",f,w);const x=((E=(N=(j=w==null?void 0:w.data)==null?void 0:j.value)==null?void 0:N.sections)==null?void 0:E.map(C=>C.id))||[];r(`${w?"Updating":"Generating"} page ${++p}/${u==null?void 0:u.length}`);const y=await x.reduce(async(C,$)=>{const A=await C,B=await Ze(a,Wt({app:"dms-site",type:"cms-section",filter:{id:[$]}}),"/");return[...A,...B]},Promise.resolve([])),v=e.data_controls,S=o.find(C=>C[i.name]===f)||{};let _=await mn(e.sections.map(C=>C.id),async C=>{var M,D,I,z;let $=e.sections.find(U=>U.id===C)||{},A=Fn((M=$==null?void 0:$.element)==null?void 0:M["element-data"])||{},B=((D=$==null?void 0:$.element)==null?void 0:D["element-type"])||"",T=Ne[B]||{},P=((T==null?void 0:T.variables)||[]).reduce((U,V)=>(U[V.name]=V.name===i.name?f:A[V.name],U),{}),F=Object.keys(((I=v==null?void 0:v.sectionControls)==null?void 0:I[C])||{}).reduce((U,V)=>{var R,q,K,ge,et,ne;const Z=((K=(q=(R=v==null?void 0:v.sectionControls)==null?void 0:R[C])==null?void 0:q[V])==null?void 0:K.name)||((et=(ge=v==null?void 0:v.sectionControls)==null?void 0:ge[C])==null?void 0:et[V]);return U[V]=Z===i.name?f:S[Z]||((ne=v==null?void 0:v.active_row)==null?void 0:ne[Z])||null,U},{}),G=(z=A.additionalVariables)==null?void 0:z.map(U=>{var R,q;const V=U.name,Z=(q=(R=v==null?void 0:v.sectionControls)==null?void 0:R[C])==null?void 0:q[V];return U.defaultValue=S==null?void 0:S[Z],U}),Y={...P,...F,additionalVariables:G};try{return T!=null&&T.getData?T.getData(Y,a).then(U=>({section_id:C,data:U,type:B})):{section_id:C,data:A,type:B}}catch(U){return{section_id:C,data:A,err:U,type:B}}},{concurrency:5});if(_.length>0){const C=e.sections.map(I=>_.find(z=>z.section_id===I.id)||I).filter(I=>I).map(({section_id:I,data:z,err:U,type:V})=>{var K;let Z=e.sections.find(ge=>ge.id===I)||{},R=y.find(ge=>ge.data.value.element["template-section-id"]===I)||{},q=((K=R==null?void 0:R.data)==null?void 0:K.value)||{element:{}};return R!=null&&R.id&&(q.id=R==null?void 0:R.id),q.title=Z.title,q.level=Z.level,q.size=Z.size,q.tags=Z.tags,q.status=U?JSON.stringify(U,Object.getOwnPropertyNames(U)):"success",q.element["element-data"]=JSON.stringify(z),q.element["element-type"]=V,q.element["template-section-id"]=I,q}),$="dms-site",A=s||e.type,T={format:{app:$,type:"cms-section"}},P={format:{app:$,type:A}},F=await mn(C.map(I=>vt(T,I)),I=>I,{concurrency:5}),Y=d==="county"&&(I=>I.toLowerCase().replace(" county","").replace(".","").replace(/ /g,"_"))((S==null?void 0:S.county)||(S==null?void 0:S.name))||f,M={...w&&{id:w.id},...((k=w==null?void 0:w.data)==null?void 0:k.value)||{},id_column_value:f,template_id:e.id,sidebar:e.sidebar,header:e.header,footer:e.footer,full_width:e.full_width,hide_in_nav:"true",index:999,url_slug:`${t||i.name}/${Y}`,title:`${i.name} ${f} Template`,num_errors:C.filter(I=>I.status!=="success").length,sections:[...C.map((I,z)=>{var U;return{id:I.id||((U=F[z])==null?void 0:U.id),ref:"dms-site+cms-section"}}),...y.filter(I=>!I.data.value.element["template-section-id"]).map((I,z)=>({id:I.id,ref:"dms-site+cms-section"}))],draft_sections:[...C.map((I,z)=>{var U;return{id:I.id||((U=F[z])==null?void 0:U.id),ref:"dms-site+cms-section"}}),...y.filter(I=>!I.data.value.element["template-section-id"]).map((I,z)=>({id:I.id,ref:"dms-site+cms-section"}))]},D=await vt(P,M);m.push({id:D==null?void 0:D.id,num_errors:M.num_errors,id_column_value:M.id_column_value})}},{concurrency:5}),c(m),r(void 0)};function mn(e,t,s={}){let i=s.concurrency||1/0,o=0;const a=[],r=[],l=e[Symbol.iterator]();for(;i-- >0;){const d=c();if(d)r.push(d);else break}return Promise.all(r).then(()=>a);function c(){const d=l.next();if(d.done)return null;const u=o++,p=t(d.value,u);return Promise.resolve(p).then(m=>(a[u]=m,c()))}}const Oi=({submit:e,item:t,onChange:s,loadingStatus:i,setLoadingStatus:o=()=>{}})=>{var B;const{falcor:a,falcorCache:r}=O.useContext(se),[l,c]=h.useState([]),[d,u]=h.useState(!1),[p,m]=h.useState("geoid"),{url:f,destination:b=t.type,source:w,view:x,view_id:y,id_column:v,active_row:S}=t==null?void 0:t.data_controls,_=[b];O.useEffect(()=>{x.view_id&&a.get(["dama",re,"viewsbyId",x.view_id,"data","length"])},[re,x.view_id]);const j=O.useMemo(()=>W(r,["dama",re,"viewsbyId",x.view_id,"data","length"],0),[re,x.view_id,r]),N=O.useMemo(()=>{let T=W(w,["metadata","columns"],W(w,"metadata",[]));return Array.isArray(T)||(T=[]),T.filter(P=>!["geom","wkb_geometry","ogc_fid"].includes(P==null?void 0:P.name))},[w]);O.useEffect(()=>{x!=null&&x.view_id&&(v!=null&&v.name)&&j&&a.get(["dama",re,"viewsbyId",x.view_id,"databyIndex",{from:0,to:j-1},N.map(T=>T.name)])},[v,x.view_id,j]);const E=O.useMemo(()=>Object.values(W(r,["dama",re,"viewsbyId",x.view_id,"databyIndex"],{})).map(T=>W(r,[...T.value],"")),[v,x.view_id,r]);O.useEffect(()=>{(async function(){o("Loading Pages...");const T=await _.reduce(async(P,F)=>{const G=await P,Y=[{key:"id",label:"id"},{key:"data->>'id_column_value' as id_column_value",label:"id_column_value"},{key:"data->>'num_errors' as num_errors",label:"num_errors"}];let M=await Ze(a,Wt({app:"dms-site",type:F,filter:{"data->>'template_id'":[t.id]},attributes:Y}),"/");return M=M.map(D=>Y.reduce((I,z)=>(I[z.label]=D[z.key],I),{})),[...G,...M]},Promise.resolve([]));c(T),o(void 0)})()},[t.id,(B=t.data_controls)==null?void 0:B.sectionControls]);const k=h.useMemo(()=>l.filter(T=>typeof+T.num_errors=="number"&&+T.num_errors>0).map(T=>T.id_column_value.toString()),[l]),C=h.useMemo(()=>l.filter(T=>T.id_column_value&&typeof T.id_column_value!="object").map(T=>T.id_column_value.toString()),[l]),$=h.useMemo(()=>E.filter(T=>!C.includes(T[v.name])),[C,E,v.name]),A=h.useMemo(()=>E.filter(T=>k.includes(T[v.name])),[k,E,v.name]);return n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-xs uppercase font-bold text-slate-400 ml-4",children:" url suffix "}),n.jsx(rt,{className:"ml-2.5 relative w-full cursor-default overflow-hidden bg-transparent border-b-2 border-slate-300 text-slate-500 text-left sm:text-sm",options:N.map(T=>T.name),value:p,nameAccessor:T=>T==null?void 0:T.name,valueAccessor:T=>T==null?void 0:T.name,onChange:T=>m(T)}),n.jsx(rt,{options:["",...N],value:v,nameAccessor:T=>T==null?void 0:T.name,valueAccessor:T=>T==null?void 0:T.name,onChange:T=>s("id_column",T)}),v!=null&&v.name?n.jsx(rt,{options:E,value:S,nameAccessor:T=>(v==null?void 0:v.name)==="geoid"&&((T==null?void 0:T.county)||(T==null?void 0:T.name))||(T==null?void 0:T[v==null?void 0:v.name]),onChange:T=>s("active_row",{active_row:T})}):"",n.jsx("div",{className:"flex items-center pt-2",children:l!=null&&l.length||E!=null&&E.length?n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("div",{className:"flex flex-row",children:[n.jsx("button",{className:`inline-flex w-36 justify-center rounded-lg cursor-pointer text-sm font-semibold 
                                            py-2 px-2 text-white shadow-lg border active:border-b-2 active:mb-[2px] active:shadow-none 
                                            ${i?"bg-gray-500 border-b-2 border-gray-800 cursor-not-allowed":"bg-blue-500 hover:bg-blue-400 border-b-4 border-blue-800 hover:border-blue-700"}`,disabled:i,onClick:T=>pn({item:t,url:f,destination:b,id_column:v,dataRows:E,falcor:a,setLoadingStatus:o,locationNameMap:_,setGeneratedPages:c,urlSuffixCol:p}),children:i||(l!=null&&l.length?"Update Pages":"Generate Pages")}),n.jsx("button",{disabled:i,className:`inline-flex rounded-lg cursor-pointer text-white text-bold px-2 py-2.5 shadow-lg
                                border active:border-b-2 active:mb-[2px] active:shadow-none 
                                ${i?"bg-gray-500 border-b-2 border-gray-800 cursor-not-allowed":"bg-blue-500 hover:bg-blue-400 border-b-4 border-blue-800 hover:border-blue-700"}`,onClick:()=>u(!d),children:n.jsx("i",{className:d?"fa fa-caret-up":"fa fa-caret-down"})})]}),n.jsxs("div",{className:d?"flex flex-col":"hidden",children:[n.jsx("button",{className:`inline-flex w-36 justify-center rounded-lg text-sm font-semibold 
                                            py-2 px-2 text-white shadow-lg border active:border-b-2 active:mb-[2px] active:shadow-none' 
                                            ${i||!($!=null&&$.length)?"bg-gray-500 border-b-2 border-gray-800 cursor-not-allowed":"bg-blue-500 hover:bg-blue-400 border-b-4 border-blue-800 hover:border-blue-700 cursor-pointer"}`,disabled:i||!($!=null&&$.length),onClick:T=>(u(!1),pn({item:t,url:f,destination:b,id_column:v,dataRows:$,falcor:a,setLoadingStatus:o,locationNameMap:_,setGeneratedPages:c,urlSuffixCol:p})),children:i||`Generate missing pages (${$==null?void 0:$.length})`}),n.jsx("button",{className:`inline-flex w-36 justify-center rounded-lg text-sm font-semibold 
                                            py-2 px-2 text-white shadow-lg border active:border-b-2 active:mb-[2px] active:shadow-none' 
                                            ${i||!(A!=null&&A.length)?"bg-gray-500 border-b-2 border-gray-800 cursor-not-allowed":"bg-blue-500 hover:bg-blue-400 border-b-4 border-blue-800 hover:border-blue-700 cursor-pointer"}`,disabled:i||!(A!=null&&A.length),onClick:T=>(u(!1),pn({item:t,url:f,destination:b,id_column:v,dataRows:A,falcor:a,setLoadingStatus:o,locationNameMap:_,setGeneratedPages:c,urlSuffixCol:p})),children:i||`Update errored pages (${A==null?void 0:A.length})`})]})]}):n.jsx("button",{className:"mt-4 p-2 rounded-lg text-white bg-gray-500 border border-b-2 border-gray-800 cursor-not-allowed",disabled:!0,children:"No template data available."})})]})},od=()=>n.jsx("div",{children:"Path..."}),rd=({section:e,source:t,sectionControl:s={},updateSectionControl:i})=>{var d,u;let o=Fn((d=e==null?void 0:e.element)==null?void 0:d["element-data"])||{},a=((u=e==null?void 0:e.element)==null?void 0:u["element-type"])||"",r=Ne[a]||{},l=[...(r==null?void 0:r.variables)||[],...(o==null?void 0:o.additionalVariables)||[]];const c=O.useMemo(()=>{let p=W(t,["metadata","columns"],W(t,"metadata",[]));return Array.isArray(p)||(p=[]),p.map(m=>m.name)},[t]);return n.jsxs("div",{className:"p-4 border rounded mb-1",children:[n.jsxs("div",{children:["Title: ",e==null?void 0:e.title," ",e==null?void 0:e.id]}),n.jsx("div",{children:a}),n.jsx("div",{children:l.filter(p=>!p.hidden).map(p=>n.jsxs("div",{className:"flex",children:[n.jsxs("div",{className:"flex-1 items-center",children:[n.jsx("div",{children:p.name}),n.jsx("div",{className:"text-xs",children:typeof o[p.name]=="object"?JSON.stringify(o[p.name]):o[p.name]})]}),n.jsx("div",{className:"flex-1 flex items-center",children:n.jsx(rt,{options:["",...c],value:s[p.name]||"",onChange:m=>{i({...s,[p.name]:m})}})})]},p.name))})]})},ad=({sections:e=[],sectionControls:t,source:s,onChange:i})=>n.jsx("div",{children:e.map(o=>n.jsx(rd,{section:o,source:s,sectionControl:(t==null?void 0:t[o.id])||{},updateSectionControl:a=>{i({...t,[o.id]:a})}},o.id))}),ld=({item:e,dataControls:t={},setDataControls:s,baseUrl:i,loadingStatus:o,setLoadingStatus:a})=>{var l,c,d,u,p;const r=(m,f)=>{s({...t,[m]:f})};return n.jsxs("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:[n.jsx("span",{className:"text-sm text-gray-500 p-1",children:"Select Template Source:"}),n.jsx(Rc,{value:t==null?void 0:t.source,onChange:m=>{r("source",m)}}),(l=t==null?void 0:t.source)!=null&&l.source_id?n.jsx(Ac,{source_id:(c=t==null?void 0:t.source)==null?void 0:c.source_id,value:(d=t.view)==null?void 0:d.view_id,onChange:m=>{r("view",m)}}):"",(u=t==null?void 0:t.source)!=null&&u.source_id&&((p=t==null?void 0:t.view)!=null&&p.view_id)?n.jsxs("div",{children:[n.jsx(Oi,{item:e,source:t==null?void 0:t.source,view:t==null?void 0:t.view,id_column:t==null?void 0:t.id_column,active_row:t==null?void 0:t.active_row,onChange:(m,f)=>{m==="id_column"&&(r("id_column",f),s({...t,id_column:f,active_row:{}})),m==="active_row"&&s({...t,...f})},loadingStatus:o,setLoadingStatus:a,baseUrl:i}),n.jsx(od,{}),n.jsx(ad,{sections:e.sections,sectionControls:t.sectionControls,source:t==null?void 0:t.source,onChange:m=>{r("sectionControls",{...t.sectionControls,...m})}})]}):"",n.jsx("div",{children:n.jsx("pre",{children:JSON.stringify(t,null,3)})})]})};function cd(e){const{open:t,setOpen:s}=e;return n.jsx(je.Root,{show:t,as:h.Fragment,children:n.jsx(ye,{as:"div",className:"relative z-20 ",onClose:()=>{s(!1),console.log("onclose")},children:n.jsx("div",{className:"fixed inset-x-0 bottom-0 top-12  overflow-hidden",children:n.jsx("div",{className:"absolute inset-0 overflow-hidden",children:n.jsx("div",{className:"pointer-events-none fixed inset-y-0 top-12 right-0 flex max-w-full pl-10",children:n.jsx(je.Child,{as:h.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:n.jsx(ye.Panel,{className:"pointer-events-auto w-screen max-w-md",children:n.jsxs("div",{className:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl",children:[n.jsx("div",{className:"px-4 sm:px-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsx(ye.Title,{className:"text-base font-semibold leading-6 text-gray-900",children:"Data Controls"}),n.jsx("div",{className:"ml-3 flex h-7 items-center",children:n.jsxs("button",{type:"button",className:"relative rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none",onClick:()=>s(!1),children:[n.jsx("span",{className:"absolute -inset-2.5"}),n.jsx("span",{className:"sr-only",children:"Close panel"}),n.jsx("i",{className:"h-6 w-6 text-lg fa fa-close","aria-hidden":"true"})]})})]})}),n.jsx(ld,{...e})]})})})})})})})})}function Ee(e){return typeof e=="object"&&!("toString"in e)?Object.prototype.toString.call(e).slice(8,-1):e}function Te(e,t){if(!e)throw new Error(t())}var vn=Object.prototype.hasOwnProperty,dd=Array.prototype.splice,ud=Object.prototype.toString;function qe(e){return ud.call(e).slice(8,-1)}var Nn=Object.assign||function(e,t){return Bn(t).forEach(function(s){vn.call(t,s)&&(e[s]=t[s])}),e},Bn=typeof Object.getOwnPropertySymbols=="function"?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function Pe(e){return Array.isArray(e)?Nn(e.constructor(e.length),e):qe(e)==="Map"?new Map(e):qe(e)==="Set"?new Set(e):e&&typeof e=="object"?Nn(Object.create(Object.getPrototypeOf(e)),e):e}var pd=function(){function e(){this.commands=Nn({},md),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(t,s){return t===s},this.update.newContext=function(){return new e().update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(t){this.update.isEquals=t},enumerable:!1,configurable:!0}),e.prototype.extend=function(t,s){this.commands[t]=s},e.prototype.update=function(t,s){var i=this,o=typeof s=="function"?{$apply:s}:s;Array.isArray(t)&&Array.isArray(o)||Te(!Array.isArray(o),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),Te(typeof o=="object"&&o!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+"following commands: ".concat(Object.keys(i.commands).join(", "),".")});var a=t;return Bn(o).forEach(r=>{if(vn.call(this.commands,r)){var l=t===a;a=i.commands[r](o[r],a,o,t),l&&i.isEquals(a,t)&&(a=t)}else{var c=qe(t)==="Map"?i.update(t.get(r),o[r]):i.update(t[r],o[r]),d=qe(a)==="Map"?a.get(r):a[r];(!i.isEquals(c,d)||typeof c>"u"&&!vn.call(t,r))&&(a===t&&(a=Pe(t)),qe(a)==="Map"?a.set(r,c):a[r]=c)}}),a},e}(),md={$push:function(e,t,s){return Ts(t,s,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,s){return Ts(t,s,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,s,i){return fd(t,s),e.forEach(function(o){Di(o),t===i&&o.length&&(t=Pe(i)),dd.apply(t,o)}),t},$set:function(e,t,s){return xd(s),e},$toggle:function(e,t){ht(e,"$toggle");var s=e.length?Pe(t):t;return e.forEach(function(i){s[i]=!t[i]}),s},$unset:function(e,t,s,i){return ht(e,"$unset"),e.forEach(function(o){Object.hasOwnProperty.call(t,o)&&(t===i&&(t=Pe(i)),delete t[o])}),t},$add:function(e,t,s,i){return Ss(t,"$add"),ht(e,"$add"),qe(t)==="Map"?e.forEach(function(o){var a=o[0],r=o[1];t===i&&t.get(a)!==r&&(t=Pe(i)),t.set(a,r)}):e.forEach(function(o){t===i&&!t.has(o)&&(t=Pe(i)),t.add(o)}),t},$remove:function(e,t,s,i){return Ss(t,"$remove"),ht(e,"$remove"),e.forEach(function(o){t===i&&t.has(o)&&(t=Pe(i)),t.delete(o)}),t},$merge:function(e,t,s,i){return bd(t,e),Bn(e).forEach(function(o){e[o]!==t[o]&&(t===i&&(t=Pe(i)),t[o]=e[o])}),t},$apply:function(e,t){return gd(e),e(t)}},hd=new pd;function Ts(e,t,s){Te(Array.isArray(e),function(){return"update(): expected target of ".concat(Ee(s)," to be an array; got ").concat(Ee(e),".")}),ht(t[s],s)}function ht(e,t){Te(Array.isArray(e),function(){return"update(): expected spec of ".concat(Ee(t)," to be an array; got ").concat(Ee(e),". ")+"Did you forget to wrap your parameter in an array?"})}function fd(e,t){Te(Array.isArray(e),function(){return"Expected $splice target to be an array; got ".concat(Ee(e))}),Di(t.$splice)}function Di(e){Te(Array.isArray(e),function(){return"update(): expected spec of $splice to be an array of arrays; got ".concat(Ee(e),". ")+"Did you forget to wrap your parameters in an array?"})}function gd(e){Te(typeof e=="function",function(){return"update(): expected spec of $apply to be a function; got ".concat(Ee(e),".")})}function xd(e){Te(Object.keys(e).length===1,function(){return"Cannot have more than one key in an object with $set"})}function bd(e,t){Te(t&&typeof t=="object",function(){return"update(): $merge expects a spec of type 'object'; got ".concat(Ee(t))}),Te(e&&typeof e=="object",function(){return"update(): $merge expects a target of type 'object'; got ".concat(Ee(e))})}function Ss(e,t){var s=qe(e);Te(s==="Map"||s==="Set",function(){return"update(): ".concat(Ee(t)," expects a target of type Set or Map; got ").concat(Ee(s))})}const ks=hd.update,yd=e=>Object.prototype.toString.call(e).slice(8,-1),wd=e=>yd(e)==="Array",vd=(e,t)=>{for(;e;){if(e.matches&&e.matches(t))return e;e=e.parentNode}return null},Nd=e=>{var t=e.getBoundingClientRect(),s=document.body,i=document.documentElement,o=window.pageYOffset||i.scrollTop||s.scrollTop,a=window.pageXOffset||i.scrollLeft||s.scrollLeft,r=i.clientTop||s.clientTop||0,l=i.clientLeft||s.clientLeft||0,c=t.top+o-r,d=t.left+a-l;return{top:Math.round(c),left:Math.round(d)}},Cd=e=>{let t=0,s=0;for(;e=e.parentNode;)t+=e.scrollTop||0,s+=e.scrollLeft||0;return{top:t,left:s}},jd=(e,t)=>({transform:"translate("+e+"px, "+t+"px)"}),Cn=(e,t)=>e.map(s=>({...s,[t]:s[t]?Cn(s[t],t):[]})),Dt=(e,{idProp:t,childrenProp:s})=>{let i=[];return e.filter(a=>a[s].length).map(a=>(i=i.concat(Dt(a[s],{idProp:t,childrenProp:s})),a[t])).concat(i)};function Ut(){for(var e={}.hasOwnProperty,t=[],s=0;s<arguments.length;s++){var i=arguments[s];if(i){var o=typeof i;if(o==="string"||o==="number")t.push(i);else if(Array.isArray(i)){if(i.length){var a=Ut.apply(null,i);a&&t.push(a)}}else if(o==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){t.push(i.toString());continue}for(var r in i)e.call(i,r)&&i[r]&&t.push(r)}}}return t.join(" ")}function _d({children:e,className:t,...s}){return n.jsx("i",{className:`${nestable-icon}  ${t}`,...s})}const xt=class xt extends h.Component{constructor(){super(...arguments);ue(this,"renderCollapseIcon",({isCollapsed:s})=>n.jsx(_d,{className:Ut("nestable-item-icon",{"icon-plus-gray":s,"icon-minus-gray":!s})}))}render(){const{item:s,isCopy:i,options:o,index:a,depth:r}=this.props,{dragItem:l,renderItem:c,handler:d,idProp:u,childrenProp:p,renderCollapseIcon:m=this.renderCollapseIcon}=o,f=o.isCollapsed(s),b=!i&&l&&l[u]===s[u],w=s[p]&&s[p].length>0;let x={},y={},v;i||(l?x={...x,onMouseEnter:E=>o.onMouseEnter(E,s)}:y={...y,draggable:!0,onDragStart:E=>o.onDragStart(E,s)}),d?v=n.jsx("span",{className:"nestable-item-handler",...y,children:d}):x={...x,...y};const S=w?n.jsx("span",{onClick:()=>o.onToggleCollapse(s),children:m({isCollapsed:f})}):null,_="nestable-item ml-2"+(i?"-copy":""),j={className:Ut(_,_+"-"+s[u],{"is-dragging bg-slate-200 border pl-4":b,[_+"--with-children"]:w,[_+"--children-open"]:w&&!f,[_+"--children-collapsed"]:w&&f})},N=c({collapseIcon:S,depth:r,handler:v,index:a,item:s});return N?n.jsxs("li",{...j,children:[n.jsx("div",{className:"nestable-item-name",...x,children:N}),w&&!f&&n.jsx("ol",{className:"nestable-list border-l ml-4",children:s[p].map((E,k)=>n.jsx(xt,{index:k,depth:r+1,item:E,options:o,isCopy:i},k))})]}):null}};ue(xt,"propTypes",{item:ce.object,isCopy:ce.bool,options:ce.object,index:ce.number,depth:ce.number}),ue(xt,"defaultProps",{depth:0});let Vt=xt;class jn extends h.Component{constructor(s){super(s);ue(this,"collapse",s=>{const{idProp:i,childrenProp:o,collapsed:a}=this.props,{items:r}=this.state;s==="NONE"?this.setState({collapsedGroups:a?Dt(r,{idProp:i,childrenProp:o}):[]}):s==="ALL"?this.setState({collapsedGroups:a?[]:Dt(r,{idProp:i,childrenProp:o})}):wd(s)&&this.setState({collapsedGroups:Dt(r,{idProp:i,childrenProp:o}).filter(l=>s.indexOf(l)>-1^a)})});ue(this,"startTrackMouse",()=>{document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onDragEnd),document.addEventListener("keydown",this.onKeyDown)});ue(this,"stopTrackMouse",()=>{document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onDragEnd),document.removeEventListener("keydown",this.onKeyDown),this.elCopyStyles=null});ue(this,"getItemDepth",s=>{const{childrenProp:i}=this.props;let o=1;if(s[i].length>0){const a=s[i].map(this.getItemDepth);o+=Math.max(...a)}return o});ue(this,"isCollapsed",s=>{const{collapsed:i,idProp:o}=this.props,{collapsedGroups:a}=this.state;return!!(a.indexOf(s[o])>-1^i)});ue(this,"onDragStart",(s,i)=>{s&&(s.preventDefault(),s.stopPropagation()),this.el=vd(s.target,".nestable-item"),this.startTrackMouse(),this.onMouseMove(s),this.setState({dragItem:i,itemsOld:this.state.items})});ue(this,"onDragEnd",(s,i)=>{s&&s.preventDefault(),this.stopTrackMouse(),this.el=null,i?this.dragRevert():this.dragApply()});ue(this,"onMouseMove",s=>{const{group:i,threshold:o}=this.props,{dragItem:a}=this.state,{clientX:r,clientY:l}=s,c=jd(r,l),d=document.querySelector(".nestable-"+i+" .nestable-drag-layer > .nestable-list");if(this.elCopyStyles){this.elCopyStyles={...this.elCopyStyles,...c};for(let p in c)c.hasOwnProperty(p)&&(d.style[p]=c[p]);const u=r-this.mouse.last.x;u>=0&&this.mouse.shift.x>=0||u<=0&&this.mouse.shift.x<=0?this.mouse.shift.x+=u:this.mouse.shift.x=0,this.mouse.last.x=r,Math.abs(this.mouse.shift.x)>o&&(this.mouse.shift.x>0?this.tryIncreaseDepth(a):this.tryDecreaseDepth(a),this.mouse.shift.x=0)}else{const u=Nd(this.el),p=Cd(this.el);this.elCopyStyles={marginTop:u.top-l-p.top,marginLeft:u.left-r-p.left,...c}}});ue(this,"onMouseEnter",(s,i)=>{s&&(s.preventDefault(),s.stopPropagation());const{collapsed:o,idProp:a,childrenProp:r}=this.props,{dragItem:l}=this.state;if(l[a]===i[a])return;const c=this.getPathById(l[a]),d=this.getPathById(i[a]);let u={};if(o&&c.length>1){const p=this.getItemByPath(c.slice(0,-1));p[r].length===1&&(u=this.onToggleCollapse(p,!0))}this.moveItem({dragItem:l,pathFrom:c,pathTo:d},u)});ue(this,"onToggleCollapse",(s,i)=>{const{collapsed:o,idProp:a}=this.props,{collapsedGroups:r}=this.state,c={collapsedGroups:this.isCollapsed(s)^o?r.filter(d=>d!==s[a]):r.concat(s[a])};if(i)return c;this.setState(c)});ue(this,"onKeyDown",s=>{s.which===27&&this.onDragEnd(null,!0)});this.state={items:[],itemsOld:null,dragItem:null,isDirty:!1,collapsedGroups:[]},this.el=null,this.elCopyStyles=null,this.mouse={last:{x:0},shift:{x:0}}}componentDidMount(){let{items:s,childrenProp:i}=this.props;s=Cn(s,i),this.setState({items:s})}componentDidUpdate(s){const{items:i,childrenProp:o}=this.props;if(Be({props:s,state:{}},this.props)){this.stopTrackMouse();let r={};s.collapsed!==this.props.collapsed&&(r.collapsedGroups=[]),this.setState({items:Cn(i,o),dragItem:null,isDirty:!1,...r})}}componentWillUnmount(){this.stopTrackMouse()}moveItem({dragItem:s,pathFrom:i,pathTo:o},a={}){const{childrenProp:r,confirmChange:l}=this.props,c=this.getItemDepth(s);let{items:d}=this.state;const u=this.getRealNextPath(i,o,c);if(u.length===0)return;const p=u.length>o.length?o:o.slice(0,-1),m=this.getItemByPath(p);if(!l({dragItem:s,destinationParent:m}))return;const f=this.getSplicePath(i,{numToRemove:1,childrenProp:r}),b=this.getSplicePath(u,{numToRemove:0,itemsToInsert:[s],childrenProp:r});d=ks(d,f),d=ks(d,b),this.setState({items:d,isDirty:!0,...a})}tryIncreaseDepth(s){const{maxDepth:i,idProp:o,childrenProp:a,collapsed:r}=this.props,l=this.getPathById(s[o]),c=l[l.length-1],d=l.length+this.getItemDepth(s);if(c>0&&d<=i){const u=this.getItemByPath(l.slice(0,-1).concat(c-1));if(!u[a].length||!this.isCollapsed(u)){const p=l.slice(0,-1).concat(c-1).concat(u[a].length);let m={};r&&!u[a].length&&(m=this.onToggleCollapse(u,!0)),this.moveItem({dragItem:s,pathFrom:l,pathTo:p},m)}}}tryDecreaseDepth(s){const{idProp:i,childrenProp:o,collapsed:a}=this.props,r=this.getPathById(s[i]),l=r[r.length-1];if(r.length>1){const c=this.getItemByPath(r.slice(0,-1));if(l+1===c[o].length){let d=r.slice(0,-1);d[d.length-1]+=1;let u={};a&&c[o].length===1&&(u=this.onToggleCollapse(c,!0)),this.moveItem({dragItem:s,pathFrom:r,pathTo:d},u)}}}dragApply(){const{onChange:s,idProp:i}=this.props,{items:o,isDirty:a,dragItem:r}=this.state;if(this.setState({itemsOld:null,dragItem:null,isDirty:!1}),s&&a){const l=this.getPathById(r[i],o);s({items:o,dragItem:r,targetPath:l})}}dragRevert(){const{itemsOld:s}=this.state;this.setState({items:s,itemsOld:null,dragItem:null,isDirty:!1})}getPathById(s,i=this.state.items){const{idProp:o,childrenProp:a}=this.props;let r=[];return i.every((l,c)=>{if(l[o]===s)r.push(c);else if(l[a]){const d=this.getPathById(s,l[a]);d.length&&(r=r.concat(c).concat(d))}return r.length===0}),r}getItemByPath(s,i=this.state.items){const{childrenProp:o}=this.props;let a=null;return s.forEach(r=>{a=(a?a[o]:i)[r]}),a}getSplicePath(s,i={}){const o={},a=i.numToRemove||0,r=i.itemsToInsert||[],l=s.length-1;let c=o;return s.forEach((d,u)=>{if(u===l)c.$splice=[[d,a,...r]];else{const p={};c[d]={[i.childrenProp]:p},c=p}}),o}getRealNextPath(s,i,o){const{childrenProp:a,maxDepth:r}=this.props,l=s.length-1,c=i.length-1,d=i.length+o-1;if(s.length<i.length){let u=!1;return d>r&&i.length?this.getRealNextPath(s,i.slice(0,-1),o):i.map((p,m)=>u?m===c?p+1:p:typeof s[m]!="number"?p:i[m]>s[m]&&m===l?(u=!0,p-1):p)}else if(s.length===i.length&&i[c]>s[c]){const u=this.getItemByPath(i);if(d<r&&u[a]&&u[a].length&&!this.isCollapsed(u))return i.slice(0,-1).concat(i[c]-1).concat(0)}return i}getItemOptions(){const{renderItem:s,renderCollapseIcon:i,handler:o,idProp:a,childrenProp:r}=this.props,{dragItem:l}=this.state;return{dragItem:l,idProp:a,childrenProp:r,renderItem:s,renderCollapseIcon:i,handler:o,onDragStart:this.onDragStart,onMouseEnter:this.onMouseEnter,isCollapsed:this.isCollapsed,onToggleCollapse:this.onToggleCollapse}}renderDragLayer(){const{group:s,idProp:i}=this.props,{dragItem:o}=this.state,a=document.querySelector(".nestable-"+s+" .nestable-item-"+o[i]);let r={};a&&(r.width=a.clientWidth),this.elCopyStyles&&(r={...r,...this.elCopyStyles});const l=this.getItemOptions();return n.jsx("div",{className:"nestable-drag-layer",children:n.jsx("ol",{className:"nestable-list",style:r,children:n.jsx(Vt,{item:o,options:l,isCopy:!0})})})}render(){const{group:s,className:i}=this.props,{items:o,dragItem:a}=this.state,r=this.getItemOptions();return n.jsxs("div",{className:Ut(i,"nestable","nestable-"+s,{"is-drag-active":a}),children:[n.jsx("ol",{className:"nestable-list nestable-group",children:o.map((l,c)=>n.jsx(Vt,{index:c,item:l,options:r},c))}),a&&this.renderDragLayer()]})}}ue(jn,"propTypes",{childrenProp:ce.string,className:ce.string,collapsed:ce.bool,confirmChange:ce.func,group:ce.oneOfType([ce.number,ce.string]),handler:ce.node,idProp:ce.string,items:ce.array,maxDepth:ce.number,onChange:ce.func,renderCollapseIcon:ce.func,renderItem:ce.func,threshold:ce.number}),ue(jn,"defaultProps",{childrenProp:"children",collapsed:!1,confirmChange:()=>!0,group:Math.random().toString(36).slice(2),idProp:"id",items:[],maxDepth:10,onChange:()=>{},renderItem:({item:s})=>String(s),threshold:30});function Ed({item:e,dataItems:t,edit:s,open:i,setOpen:o}){return O.useContext(se),n.jsx(je.Root,{show:i,as:h.Fragment,children:n.jsxs(ye,{as:"div",className:"relative z-20",onClose:o,children:[n.jsx("div",{className:"fixed inset-0"}),n.jsx("div",{className:"fixed inset-0 overflow-hidden",children:n.jsx("div",{className:"absolute inset-0 overflow-hidden",children:n.jsx("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:n.jsx(je.Child,{as:h.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:n.jsx(ye.Panel,{className:"pointer-events-auto w-screen max-w-md",children:n.jsxs("div",{className:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl",children:[n.jsx("div",{className:"px-4 sm:px-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsx(ye.Title,{className:"text-base font-semibold leading-6 text-gray-900",children:"Edit Pages"}),n.jsx("div",{className:"ml-3 flex h-7 items-center",children:n.jsxs("button",{type:"button",className:"relative rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none ",onClick:()=>o(!1),children:[n.jsx("span",{className:"absolute -inset-2.5"}),n.jsx("span",{className:"sr-only",children:"Close panel"}),n.jsx("i",{className:"h-6 w-6 fa fa-close","aria-hidden":"true"})]})})]})}),n.jsx("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:n.jsx(Td,{item:e,dataItems:t,edit:s,open:i,setOpen:o})})]})})})})})})]})})}const gt={nav:{container:e=>"w-full ",navItemContainer:"h-full border-l overflow-y-auto overflow-x-hidden pt-3 scrollbar-xs",navItem:({isActive:e,isPending:t})=>`block px-4 py-2 font-light ${e?"w-[256px] bg-white text-blue-500 border-l border-y":"w-[248px] hover:bg-blue-100 text-slate-600"}`,navItemChild:({isActive:e,isPending:t})=>`block px-4 py-2 font-light ${e?"w-[238px] bg-white text-blue-500 border-l border-y":"w-[230px] hover:bg-blue-100 text-slate-600"}`,addItemButton:"cursor-pointer px-4 py-2 mt-3 hover:bg-blue-100 w-full text-slate-400 border-t border-slate-200"}};function qt(e,t,s,i){let o=t.filter(a=>a.parent===e.id).sort((a,r)=>a.index-r.index);return o.length===0?!1:o.map((a,r)=>{let l={id:a.id,Comp:()=>n.jsx(Ds,{to:`${i?`${s}/edit`:s}/${a.url_slug||a.id}`,className:gt.nav.navItem,children:a.title},r)};return qt(l,t,s,i)&&(l.children=qt(a,t,s,i)),l})}function Td({item:e,dataItems:t,edit:s,open:i,setOpen:o}){const a=Le(),{pathname:r="/edit"}=Me(),{baseUrl:l}=O.useContext(se),c=O.useCallback(p=>{let m=t.reduce((x,y)=>(x[y.id]=y,x),{});function f(x,y="",v){let S=[];return x.forEach((_,j)=>{let N=v[_.id];const E={id:N.id,index:N.index,title:N.title,url_slug:N.url_slug};(N.index!==j||N.parent!==y)&&(E.index=j,E.parent=y,S.push(E)),_.children&&(S=[...S,...f(_.children,_.id,v)])}),S}let b=f(p.items,"",m),w=[...b,...t.filter(x=>!b.map(y=>y.id).includes(x.id))];b.forEach(x=>x.url_slug=it(x,w)),Promise.all(b.map(x=>{a(pe(x),{method:"post",action:r})})).then(x=>{})},[]),d=t.sort((p,m)=>p.index-m.index).filter(p=>!p.parent).map((p,m)=>{let f={id:p.id,index:p.index,Comp:()=>n.jsx(Ds,{to:`${s?`${l}/edit`:l}/${p.url_slug||p.id}`,className:gt.nav.navItem,children:p.title})};return qt(f,t,l)&&(f.children=qt(p,t,l,s)),f}),u=p=>p.map(m=>{let f=m.Comp;return n.jsxs(O.Fragment,{children:[n.jsx(f,{}),m.children?n.jsx("div",{className:"border-l ml-4 pl-2",children:u(m.children)}):""]},m.id)});return n.jsx(n.Fragment,{children:n.jsx("div",{className:gt.nav.container(i),children:n.jsxs("div",{className:gt.nav.navItemContainer,children:[s?n.jsx(jn,{items:d,onChange:c,maxDepth:4,renderItem:({item:p})=>{let m=p.Comp;return n.jsx(m,{})}}):u(d),s&&n.jsx(Sd,{dataItems:t})]})})})}function Sd({dataItems:e}){const t=Le(),{pathname:s="/edit"}=Me(),{baseUrl:i,user:o}=O.useContext(se),r={title:"New Page",index:e.filter(c=>!c.parent).reduce((c,d)=>Math.max(isNaN(d.index)?-1:d.index,c),-1)+1,published:"draft",history:[{type:" created Page.",user:o.email,time:new Date().toString()}]};r.url_slug=it(r,e);const l=()=>{t(pe(r),{method:"post",action:s})};return n.jsx("div",{className:"pr-2",children:n.jsx("div",{onClick:l,className:gt.nav.addItemButton,children:"+ Add Page"})})}function kd({item:e,dataItems:t,historyOpen:s,setHistoryOpen:i}){return O.useContext(se),n.jsx(je.Root,{show:s,as:h.Fragment,children:n.jsxs(ye,{as:"div",className:"relative z-20",onClose:i,children:[n.jsx("div",{className:"fixed inset-0"}),n.jsx("div",{className:"fixed inset-0 overflow-hidden",children:n.jsx("div",{className:"absolute inset-0 overflow-hidden",children:n.jsx("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:n.jsx(je.Child,{as:h.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:n.jsx(ye.Panel,{className:"pointer-events-auto w-screen max-w-md",children:n.jsxs("div",{className:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl",children:[n.jsx("div",{className:"px-4 sm:px-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsx(ye.Title,{className:"text-base font-semibold leading-6 text-gray-900",children:"Edit History"}),n.jsx("div",{className:"ml-3 flex h-7 items-center",children:n.jsxs("button",{type:"button",className:"relative rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none",onClick:()=>i(!1),children:[n.jsx("span",{className:"absolute -inset-2.5"}),n.jsx("span",{className:"sr-only",children:"Close panel"}),n.jsx("i",{className:"h-6 w-6 text-lg fa fa-close","aria-hidden":"true"})]})})]})}),n.jsx("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:n.jsx(Md,{history:(e==null?void 0:e.history)||[]})})]})})})})})})]})})}function $d(...e){return e.filter(Boolean).join(" ")}function Md({history:e}){return n.jsx(n.Fragment,{children:n.jsx("ul",{role:"list",className:"space-y-6",children:e.sort((t,s)=>new Date(s.time)-new Date(t.time)).map((t,s)=>n.jsxs("li",{className:"relative flex gap-x-4",children:[n.jsx("div",{className:$d(s===e.length-1?"h-6":"-bottom-6","absolute left-0 top-0 flex w-6 justify-center"),children:n.jsx("div",{className:"w-px bg-gray-200"})}),n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"relative flex h-6 w-6 flex-none items-center justify-center bg-white",children:n.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-gray-100 ring-1 ring-gray-300"})}),n.jsxs("p",{className:"flex-auto py-0.5 text-xs leading-5 text-gray-500",children:[n.jsx("span",{className:"font-medium text-gray-900",children:t.user})," ",t.type]}),n.jsx("time",{dateTime:t.time,className:"flex-none py-0.5 text-xs leading-5 text-gray-500",children:Id(t.time)})]})]},t.id))})})}function Id(e){const t=e instanceof Date?e:new Date(e),s=new Intl.RelativeTimeFormat("en"),i={years:3600*24*365,months:3600*24*30,weeks:3600*24*7,days:3600*24,hours:3600,minutes:60,seconds:1},o=(t.getTime()-Date.now())/1e3;for(let a in i)if(i[a]<Math.abs(o)){const r=o/i[a];return s.format(Math.round(r),a)}}const Ae={pageControls:{controlItem:"pl-6 py-0.5 text-md cursor-pointer hover:text-blue-500 text-slate-400 flex items-center",select:"bg-transparent border-none rounded-sm focus:ring-0 focus:border-0 pl-1",selectOption:"p-4 text-md cursor-pointer hover:text-blue-500 text-slate-400 hover:bg-blue-600",content:""}};function Li({item:e,dataItems:t,updateAttribute:s,attributes:i,edit:o,status:a,setItem:r,pageType:l="page"}){var G,Y;const c=Le(),{pathname:d="/edit"}=Me(),[u,p]=O.useState(!1),[m,f]=O.useState(!1),[b,w]=h.useState(!1),[x,y]=h.useState(!1);h.useState(a==null?void 0:a.message),h.useState(!1),h.useState(e.type);const[v,S]=h.useState(),{baseUrl:_,user:j,falcor:N,falcorCache:E}=O.useContext(se),k=async M=>{let D={id:e.id,url_slug:it(e,t)};M&&(D.sections=M),c(pe(D),{method:"post",action:l==="template"?d:`${_}/edit/${D.url_slug}`})};async function C(M){var z,U;const D=(U=(z=Object.keys(M.sectionControls))==null?void 0:z.filter((V,Z)=>V&&V!=="undefined"))==null?void 0:U.length;S("Loading sections...");const I=await Object.keys(M.sectionControls).filter((V,Z)=>V&&V!=="undefined").reduce(async(V,Z,R)=>{var $t,Mt,H,Q,ie;const q=await V;let K=(($t=e.sections.filter(le=>le.id===Z))==null?void 0:$t[0])||{};S(`Updating section ${K==null?void 0:K.title}  ${(Mt=K==null?void 0:K.element)==null?void 0:Mt["element-type"]}  ${R+1}/${D}`);let ge=Fn((H=K==null?void 0:K.element)==null?void 0:H["element-data"])||{},et=((Q=K==null?void 0:K.element)==null?void 0:Q["element-type"])||"",ne=Ne[et]||{},St=((ne==null?void 0:ne.variables)||[]).reduce((le,J)=>(le[J.name]=ge[J.name],le),{}),tt=Object.keys(M.sectionControls[Z]).reduce((le,J)=>{var we,ke,ze,ve,_e,Un,Vn;return le[J]=((ve=M==null?void 0:M.active_row)==null?void 0:ve[(ze=(ke=(we=M==null?void 0:M.sectionControls)==null?void 0:we[Z])==null?void 0:ke[J])==null?void 0:ze.name])||((Vn=M==null?void 0:M.active_row)==null?void 0:Vn[(Un=(_e=M==null?void 0:M.sectionControls)==null?void 0:_e[Z])==null?void 0:Un[J]])||null,le},{}),Se=(ie=ge.additionalVariables)==null?void 0:ie.map(le=>{var ke,ze,ve;const J=le.name,we=(ze=(ke=M==null?void 0:M.sectionControls)==null?void 0:ke[Z])==null?void 0:ze[J];return le.defaultValue=(ve=M==null?void 0:M.active_row)==null?void 0:ve[we],le}),Qt={...St,...tt,additionalVariables:Se};const kt=ne!=null&&ne.getData?await ne.getData(Qt,N).then(le=>({section_id:Z,data:le})):null;return kt?[...q,kt]:q},Promise.resolve([]));if(I.length>0){let V=oe(e.sections);I.forEach(({section_id:Z,data:R})=>{var K;let q=((K=V.filter(ge=>ge.id===Z))==null?void 0:K[0])||{};q.element["element-data"]=JSON.stringify(R)}),s("sections",V),k(V)}S(void 0)}const $=()=>{const M=t.filter(I=>!I.parent).reduce((I,z)=>Math.max(isNaN(z.index)?-1:z.index,I),-1),D=oe(e);delete D.id,D.title+=" Dup",D.index=M+1,D.url_slug=it(D,t),D.sections.forEach(I=>{delete I.ref,delete I.id}),c(pe(D),{method:"post",action:d})},A=async()=>{const M=t.filter(I=>I.parent===e.id).reduce((I,z)=>Math.max(isNaN(z.index)?0:z.index,I),0),D={title:"New Page",parent:e.id,index:M+1,published:"draft",history:[{type:" created Page.",user:j.email,time:new Date().toString()}]};D.url_slug=`${it(D,t)}`,c(pe(D),{method:"post",action:`${_}/edit/${D.url_slug}`})},B=async(M,D="")=>{var U,V;const I=oe(e);I[M]=D;let z=l==="template"?"sections":"draft_sections";M==="header"&&!((V=(U=I==null?void 0:I[z])==null?void 0:U.filter(Z=>Z.is_header))!=null&&V[0])?(I[z].unshift({is_header:!0,element:{"element-type":"Header: Default Header","element-data":{}}}),s("","",{header:D,[z]:I[z]})):s(M,D),c(pe(I),{method:"post",action:d})},T=async(M="")=>{if(M!==e.title){let D=e.history?oe(e.history):[],I={type:`changed page title to ${M}`,user:j.email,time:new Date().toString()};D.push(I);const z={id:e.id,title:M,history:D};z.url_slug=it(z,t),s("title",M),c(pe(z),{method:"post",action:`${_}/edit/${z.url_slug}`})}},P=async()=>{let M={type:"published changes.",user:j.email,time:new Date().toString()},D=e.history?oe(e.history):[];D.push(M);const I={id:e.id,has_changes:!1,published:"",history:D};let z=oe(e.sections||[]).reduce((U,V)=>(V.draft_id&&(U[V.draft_id]=V),U),{});I.sections=oe(e.draft_sections).reduce((U,V)=>(z[V.id]?V.id=z[V.id].id:delete V.id,U.push(V),U),[]),s("","",{has_changes:!1,published:"",history:D}),c(pe(I),{method:"post",action:d})},F=M=>{if(!Be(e.data_controls,M)){console.log("------setting data controls-------------");const D=oe(e);e.id,D.data_controls=M,s("data_controls",M),c(pe(D),{method:"post",action:d})}};return n.jsxs(n.Fragment,{children:[n.jsx(Ed,{item:e,dataItems:t,edit:!0,open:u,setOpen:p}),n.jsx(kd,{item:e,historyOpen:m,setHistoryOpen:f}),n.jsx(cd,{item:e,open:b,setOpen:w,dataControls:e==null?void 0:e.data_controls,setDataControls:F,loadingStatus:v,setLoadingStatus:S,baseUrl:_}),o&&n.jsxs("div",{className:"p-4",children:[l==="page"&&n.jsx("div",{className:"w-full flex justify-center pb-6",children:n.jsx(Ad,{item:e,onClick:P})}),n.jsxs("div",{className:"pl-4 pb-2",children:[n.jsx("span",{className:"text-xs uppercase font-bold text-slate-400",children:" page name "}),n.jsx($s,{value:e==null?void 0:e.title,onChange:T})]}),n.jsxs("div",{className:"flex w-full h-12 px-4",children:[l==="page"&&n.jsx(Ms,{icon:"fad fa-wrench p-2 text-blue-300 hover:text-blue-500 cursor-pointer text-lg",children:n.jsxs("div",{className:"py-2",children:[n.jsx("div",{className:"px-6 font-medium text-sm",children:" Page Controls "}),n.jsx("div",{onClick:A,className:Ae.pageControls.controlItem,children:"☲ New Page"}),n.jsx("div",{onClick:A,className:Ae.pageControls.controlItem,children:"☲ Insert Subpage"}),n.jsx("div",{onClick:$,className:Ae.pageControls.controlItem,children:"☳ Duplicate"}),n.jsx("div",{onClick:()=>y(!0),className:Ae.pageControls.controlItem,children:"☵ Delete"})]})}),n.jsx(Ms,{icon:"fad fa-sliders-h p-2 text-blue-300 hover:text-blue-500 cursor-pointer text-lg",children:n.jsxs("div",{className:"py-2",children:[n.jsx("div",{className:"px-6 font-medium text-sm",children:" Page Settings "}),n.jsxs("div",{className:Ae.pageControls.controlItem,children:[n.jsx(At,{item:e,type:"sidebar",toggleSidebar:B}),"Show Sidebar"]}),n.jsxs("div",{className:Ae.pageControls.controlItem,children:[n.jsx(At,{type:"full_width",item:e,toggleSidebar:B}),"Full Width"]}),n.jsxs("div",{className:Ae.pageControls.controlItem,children:[n.jsx(At,{type:"hide_in_nav",item:e,toggleSidebar:B}),"Hide In Nav"]}),n.jsx("div",{className:Ae.pageControls.controlItem+" pr-4",children:n.jsx(Ic,{label:"Header:",types:[{label:"None",value:"none"},{label:"Above",value:"above"},{label:"Below",value:"below"},{label:"In page",value:"inpage"}],type:e.header,setType:M=>B("header",M)})}),n.jsxs("div",{className:Ae.pageControls.controlItem,children:[n.jsx(At,{type:"footer",item:e,toggleSidebar:B}),"Show Footer"]})]})}),l==="page"&&n.jsx("div",{className:"fad fa-file-alt p-2 text-blue-300 hover:text-blue-500 cursor-pointer text-lg",onClick:()=>p(!0)}),l==="template"&&n.jsx("div",{className:"fad fa-sliders-h-square p-2 text-blue-300 hover:text-blue-500 cursor-pointer text-lg",onClick:()=>w(!0)}),n.jsx("div",{className:"fad fa-history p-2 text-blue-300 hover:text-blue-500 cursor-pointer text-lg",onClick:()=>f(!0)})]}),l==="template"&&n.jsxs("div",{className:"pl-4 pb-2",children:[n.jsx("span",{className:"text-xs uppercase font-bold text-slate-400",children:" url prefix "}),n.jsx($s,{value:(G=e==null?void 0:e.data_controls)==null?void 0:G.url,onChange:M=>F({...e.data_controls,url:M})})]}),l==="template"&&((Y=e==null?void 0:e.data_controls)==null?void 0:Y.id_column)&&n.jsx("div",{children:n.jsx(Oi,{item:e,submit:c,onChange:(M,D)=>{let I;console.log("test123",M,D),M==="id_column"&&(I={...e==null?void 0:e.data_controls,id_column:D,active_row:{}}),M==="active_row"&&(I={...e==null?void 0:e.data_controls,...D}),F(I),C(I)},loadingStatus:v,setLoadingStatus:S,baseUrl:_})}),n.jsx(Rd,{item:e,open:x,setOpen:y})]})]})}function $s({value:e,onChange:t}){const[s,i]=O.useState(!1),[o,a]=O.useState(e||"");return n.jsx("div",{className:"flex justify-between group",children:n.jsx("div",{className:"flex-1",children:n.jsx("dd",{className:" text-sm text-gray-900 ",children:s?n.jsxs("div",{className:"flex group focus:outline-none border-slate-300 border-b-2 group-focus:border-blue-500",children:[n.jsx("input",{className:"w-full px-2 py-1 text font-medium text-slate-500 focus:outline-none focus:border-blue-500",value:o,onChange:r=>a(r.target.value)}),n.jsxs("div",{className:"flex cursor-pointer",children:[n.jsx("span",{className:" pt-0.5 text-green-500 rounded hover:bg-green-500 hover:text-white ",onClick:r=>{t(o),i(!1)},children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}),n.jsx("span",{className:"pt-0.5 text-slate-300  rounded  hover:text-red-300 ",onClick:r=>i(!1),children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})})]})]}):n.jsxs("div",{className:"w-full min-h-[30px] flex flex-row px-2 py-1 text font-medium text-slate-500 focus:outline-none border-slate-300 border-b-2 focus:border-blue-500",children:[n.jsx("div",{className:"w-full",children:e}),n.jsx("span",{className:"hidden group-hover:block text-blue-300 hover:text-blue-500 cursor-pointer ",onClick:r=>i(!s),children:n.jsx("i",{className:"fad fa-pencil absolute -ml-4 -mt-0.5 p-1.5 rounded hover:bg-blue-500 hover:text-white"})})]})})})})}function Ad({item:e,onClick:t}){const s=e.published==="draft"||e.has_changes;return n.jsx("div",{onClick:()=>s?t():null,className:`${s?"inline-flex w-36 justify-center rounded-lg cursor-pointer text-sm font-semibold py-2 px-2 bg-blue-600 text-white hover:bg-blue-500 shadow-lg border border-b-4 border-blue-800 hover:border-blue-700 active:border-b-2 active:mb-[2px] active:shadow-none":"inline-flex w-36 justify-center rounded-lg cursor-not-allowed text-sm font-semibold py-2 px-2 bg-slate-300 text-white shadow border border-slate-400 border-b-4"}`,children:n.jsxs("span",{className:"flex items-center",children:[n.jsx("span",{className:"pr-2",children:s?"Publish":"No Changes"}),s?n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}):""]})})}function Ms({icon:e,children:t}){let[s,i]=h.useState(),[o,a]=h.useState(),{styles:r,attributes:l}=Tn(s,o);return n.jsxs(Oe,{className:"relative",children:[n.jsx(Oe.Button,{ref:i,className:"text-md cursor-pointer hover:text-blue-800 text-blue-500",children:n.jsx("i",{className:e,title:"Help"})}),n.jsx(je,{as:h.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:n.jsx(Oe.Panel,{ref:a,style:r.popper,...l.popper,className:"shadow-lg bg-white rounded z-10 transform  border border-blue-200 w-[180px] ",children:t})})]})}function At({type:e,item:t,toggleSidebar:s}){let i=t[e]==="show";return n.jsxs(go,{checked:i,onChange:o=>s(e,i?"":"show"),className:"group relative inline-flex h-5 w-10 flex-shrink-0 cursor-pointer items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2",children:[n.jsx("span",{className:"sr-only",children:"Use setting"}),n.jsx("span",{"aria-hidden":"true",className:"pointer-events-none absolute h-full w-full rounded-md bg-white"}),n.jsx("span",{"aria-hidden":"true",className:`
          ${i?"bg-blue-500":"bg-gray-200"}
          pointer-events-none absolute mx-auto h-4 w-9 rounded-full transition-colors duration-200 ease-in-out
        `}),n.jsx("span",{"aria-hidden":"true",className:`
          ${i?"translate-x-5":"translate-x-0"}
          pointer-events-none absolute left-0 inline-block h-5 w-5 transform rounded-full border border-gray-200 bg-white shadow ring-0 transition-transform duration-200 ease-in-out
        `})]})}function Rd({item:e,open:t,setOpen:s}){const i=h.useRef(null),o=Le(),{baseUrl:a}=O.useContext(se),[r,l]=h.useState(!1);return n.jsxs(Hn,{open:t,setOpen:s,initialFocus:i,children:[n.jsxs("div",{className:"sm:flex sm:items-start",children:[n.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:n.jsx("i",{className:"fa fa-danger h-6 w-6 text-red-600","aria-hidden":"true"})}),n.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[n.jsxs(ye.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:["Delete Page ",e.title," ",e.id]}),n.jsx("div",{className:"mt-2",children:n.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this page? All of the page data will be permanently removed from our servers forever. This action cannot be undone."})})]})]}),n.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[n.jsxs("button",{type:"button",disabled:r,className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:async()=>{l(!0),await o(pe(e,"delete"),{method:"post",action:`${a}/edit/`}),l(!1),s(!1)},children:["Delet",r?"ing...":"e"]}),n.jsx("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>s(!1),ref:i,children:"Cancel"})]})]})}function Hn({open:e,setOpen:t,initialFocus:s,children:i}){return n.jsx(je.Root,{show:e,as:h.Fragment,children:n.jsxs(ye,{as:"div",className:"relative z-30",initialFocus:s,onClose:t,children:[n.jsx(je.Child,{as:h.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),n.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:n.jsx("div",{onClick:()=>{t(!1)},className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:n.jsx(je.Child,{as:h.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:n.jsx(ye.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:i})})})})]})})}function Od({item:e,dataItems:t,updateAttribute:s,attributes:i,setItem:o,status:a,logo:r,rightMenu:l}){var j,N,E;const c=Yt(),d=Le();Me();const{baseUrl:u,user:p,theme:m}=O.useContext(se),f=O.useMemo(()=>Ei(t,u,!0),[t]),b=(e==null?void 0:e.index)=="999"?1:_i(t,u),w=Pn(e);O.useEffect(()=>{if(!(e!=null&&e.url_slug)){let k=t.sort((C,$)=>C.index-$.index).filter(C=>!C.parent&&C.url_slug)[0];k&&k.url_slug&&c(`edit/${k.url_slug}`)}},[]),O.useEffect(()=>{var k;if(e.sections&&((k=e==null?void 0:e.sections)==null?void 0:k.length)>0&&!e.draft_sections){const C=oe(e.sections);C.forEach(A=>delete A.id);const $=oe(e);$.draft_sections=C,e.draft_sections=C,s("draft_sections",C),d(pe($),{method:"post",action:`${u}/edit/${$.url_slug}`})}},[]);const x=(N=(j=e.draft_sections)==null?void 0:j.filter(k=>k.is_header))==null?void 0:N[0],y=(E=e.draft_sections)==null?void 0:E.filter(k=>!k.is_header&&!k.is_footer),v=k=>{let C=e.history?oe(e.history):[];C.push({type:"Header updated.",user:(p==null?void 0:p.email)||"user",time:new Date().toString()}),s("","",{has_changes:!0,history:C,draft_sections:[...k,...y].filter(A=>A)});const $={id:e.id,draft_sections:[...k,...y].filter(A=>A),has_changes:!0,history:C};console.log("save header",$),d(pe($),{method:"post",action:`${u}/edit/${e.url_slug}`})},S=(k,C)=>{let $={type:C,user:(p==null?void 0:p.email)||"user",time:new Date().toString()},A=e.history?oe(e.history):[];C&&A.push($),s("","",{has_changes:!0,history:A,draft_sections:[x,...k].filter(T=>T)});const B={id:e==null?void 0:e.id,draft_sections:[x,...k].filter(T=>T),has_changes:!0,history:A};d(pe(B),{method:"post",action:`${u}/edit/${e.url_slug}`})},_=O.useMemo(()=>i.sections.EditComp,[]);return n.jsxs("div",{children:[(e==null?void 0:e.header)==="above"&&n.jsx("div",{className:"w-full",children:n.jsx(_,{item:e,value:[x],onChange:v,...i.draft_sections})}),n.jsx(Tt,{topNav:{menuItems:f,position:"fixed",logo:r,rightMenu:l},sideNav:w,children:n.jsxs("div",{className:`${m.page.wrapper1} ${m.navPadding[b]}`,children:[(e==null?void 0:e.header)==="below"&&n.jsx("div",{className:"w-full",children:n.jsx(_,{item:e,value:[x],onChange:v,...i.draft_sections})}),n.jsxs("div",{className:`${m.page.wrapper2}`,children:[(e==null?void 0:e.sidebar)==="show"&&n.jsx(Ld,{inPageNav:w}),n.jsxs("div",{className:m.page.wrapper3+" border-r",children:[(e==null?void 0:e.header)==="inpage"&&n.jsx("div",{className:"w-full",children:n.jsx(_,{item:e,value:[x],onChange:v,...i.draft_sections})}),(p==null?void 0:p.authLevel)>=5&&n.jsx(Dd,{item:e,baseUrl:u}),n.jsx(_,{full_width:e.full_width,value:y,onChange:S,...i.draft_sections})]}),n.jsx("div",{className:"w-52 hidden xl:block",children:n.jsx("div",{className:"w-52 sticky top-24 hidden xl:block",children:n.jsx(Li,{item:e,dataItems:t,setItem:o,edit:!0,status:a,attributes:i,updateAttribute:s,pageType:"page"})})})]})]})}),(e==null?void 0:e.footer)&&n.jsx("div",{className:"h-[300px] bg-slate-100"})]})}function Dd({baseUrl:e,item:t}){return n.jsx(De,{className:"z-30 absolute right-[10px] top-[5px]",to:`${e}/${t.url_slug}`,children:n.jsx("i",{className:"fad fa-eye fa-fw flex-shrink-0 text-lg text-slate-400 hover:text-blue-500"})})}function Ld({inPageNav:e}){return n.jsx("div",{className:"w-64 hidden xl:block",children:n.jsx("div",{className:"w-64 sticky top-20 hidden xl:block h-screen",children:n.jsx("div",{className:"h-[calc(100%_-_5rem)] overflow-y-auto overflow-x-hidden font-display",children:n.jsx(Zt,{...e})})})})}function Pd({item:e,dataItems:t,updateAttribute:s,attributes:i,setItem:o,status:a,params:r,logo:l,rightMenu:c,sideNav:d=[]}){var k,C,$;Yt();const u=Le(),{baseUrl:p,user:m,theme:f}=O.useContext(se),{pathname:b="/edit"}=Me(),{id:w}=r,x=1,y=Pn(e),v=(C=(k=e.sections)==null?void 0:k.filter(A=>A.is_header))==null?void 0:C[0],S=($=e.sections)==null?void 0:$.filter(A=>!A.is_header&&!A.is_footer),_=[{path:`${p}/templates`,name:"Templates"}],j=A=>{let B=e.history?oe(e.history):[];B.push({type:"Header updated.",user:m.email,time:new Date().toString()}),s("","",{has_changes:!0,history:B,sections:[...A,...S].filter(P=>P)});const T={id:e.id,sections:[...A,...S].filter(P=>P),has_changes:!0,history:B};console.log("save header",T),u(pe(T),{method:"post",action:b})},N=(A,B)=>{let T={type:B,user:m.email,time:new Date().toString()},P=e.history?oe(e.history):[];B&&P.push(T),s("","",{has_changes:!0,history:P,sections:[v,...A].filter(G=>G)});const F={id:e.id,sections:[v,...A].filter(G=>G),has_changes:!0,history:P};u(pe(F),{method:"post",action:b})},E=O.useMemo(()=>i.sections.EditComp,[]);return n.jsxs("div",{children:[(e==null?void 0:e.header)==="above"&&n.jsx("div",{className:"w-full",children:n.jsx(E,{full_width:e.full_width,value:[v],onChange:j,...i.sections})}),n.jsx(Tt,{topNav:{menuItems:_,position:"fixed",logo:l,rightMenu:c},sideNav:d,children:n.jsxs("div",{className:`${f.page.wrapper1} ${f.navPadding[x]}`,children:[(e==null?void 0:e.header)==="below"&&n.jsx("div",{className:"w-full",children:n.jsx(E,{item:e,value:[v],onChange:j,...i.sections})}),n.jsxs("div",{className:`${f.page.wrapper2}`,children:[(e==null?void 0:e.sidebar)==="show"&&n.jsx(Fd,{inPageNav:y}),n.jsxs("div",{className:f.page.wrapper3+" border-r",children:[(e==null?void 0:e.header)==="inpage"&&n.jsx("div",{className:"w-full",children:n.jsx(E,{item:e,value:[v],onChange:j,...i.sections})}),n.jsx(E,{full_width:e.full_width,value:S,onChange:N,...i.sections})]}),n.jsx("div",{className:"w-52 hidden xl:block",children:n.jsx("div",{className:"w-52 sticky top-12 hidden xl:block h-screen",children:n.jsx(Li,{item:e,dataItems:t,setItem:o,edit:!0,status:a,attributes:i,updateAttribute:s,pageType:"template"})})})]})]})}),(e==null?void 0:e.footer)&&n.jsx("div",{className:"h-[300px] bg-slate-100"})]},w)}function Fd({inPageNav:e}){return n.jsx("div",{className:"w-64 hidden xl:block",children:n.jsx("div",{className:"w-64 sticky top-20 hidden xl:block h-screen",children:n.jsx("div",{className:"h-[calc(100%_-_5rem)] overflow-y-auto overflow-x-hidden font-display",children:n.jsx(Zt,{...e})})})})}const mt=(e=50,t=50,s=20,i=30,o=!1)=>n.jsxs("svg",{width:i,height:s,children:[n.jsx("line",{x1:"0",y1:"0",x2:"0",y2:s,stroke:"black",strokeDasharray:"4 1.5 4 1.5"}),n.jsx("rect",{x:e===100?0:5,y:"0",width:Math.max(Math.floor(i*e/100)-(e===100?0:6),0),height:s,rx:"1",ry:"1",style:{fill:"white",stroke:"black",strokeWidth:1,opacity:.5}}),n.jsx("rect",{x:i*e/100-1,y:"0",width:Math.max(Math.floor(i*t/100)-(e===100?0:6),0),height:s,rx:"1",ry:"1",style:{fill:"white",stroke:"black",strokeWidth:1,opacity:.5}}),n.jsx("line",{x1:i,y1:"0",x2:i,y2:s,stroke:"black",strokeDasharray:"4 1.5 4 1.5"})]}),hn={"1/3":"col-span-6 md:col-span-2","1/2":"col-span-6 md:col-span-3","2/3":"col-span-6 md:col-span-4",1:"col-span-6 md:col-span-6",2:"col-span-6 md:col-span-8"},zn=[{name:"1/3",value:2,icon:mt(40,60)},{name:"1/2",value:3,icon:mt(50,50)},{name:"2/3",value:4,icon:mt(60,40)},{name:"1",value:6,icon:mt(90,0)},{name:"2",value:8,icon:mt(100,0)}],Pi=(e,t,s,i)=>["2"].includes(e)?hn[e]:s<t?`${hn[e]} md:col-start-2`:`${hn[e]} md:col-start-${i}`,Bd=e=>{try{JSON.parse(e)}catch{return!1}return!0};function Hd({size:e="1",setSize:t,onChange:s}){return n.jsx("div",{className:"flex space-x-1 rounded-lg bg-blue-50 p-0.5",role:"tablist","aria-orientation":"horizontal",children:zn.map((i,o)=>n.jsx("button",{className:i.name===e?"flex items-center rounded-md py-[0.4375rem] pl-2 pr-2 text-sm font-semibold lg:pr-3 bg-white shadow":"flex items-center rounded-md py-[0.4375rem] pl-2 pr-2 text-sm font-semibold lg:pr-3 hover:text-blue-500",id:"headlessui-tabs-tab-3",role:"tab",type:"button",tabIndex:-1,onClick:()=>{s(i.name)},children:i.icon},o))})}const zd=({data:e})=>n.jsxs("div",{className:"p-2 rounded-md bg-red-300 border-red-500 text-white min-h-[50px]",children:["Error: ",e==null?void 0:e.status]});function Wd({value:e,i:t,onChange:s,attributes:i,size:o,onCancel:a,onSave:r,onRemove:l}){var _,j,N,E,k;let[c,d]=h.useState(),[u,p]=h.useState(),{styles:m,attributes:f}=Tn(c,u);const b=(C,$)=>{Be(e,{...e,[C]:$})||s({...e,[C]:$})};let w=(_=i==null?void 0:i.title)==null?void 0:_.EditComp,x=(j=i==null?void 0:i.level)==null?void 0:j.EditComp,y=(N=i==null?void 0:i.tags)==null?void 0:N.EditComp,v=(E=i==null?void 0:i.element)==null?void 0:E.EditComp,S=(k=i==null?void 0:i.helpText)==null?void 0:k.EditComp;return n.jsxs("div",{className:`${t===0?"":"pt-4"}`,children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("div",{className:"flex flex-wrap border-y justify-end items-center",children:[n.jsx("div",{className:"flex-0 grow",children:n.jsx(w,{className:`p-2 w-full font-sans font-medium text-md  ${(e==null?void 0:e.level)==="1"?"text-blue-500 font-bold text-xl tracking-wider py-1 pl-1":(e==null?void 0:e.level)==="2"?"text-lg tracking-wider":(e==null?void 0:e.level)==="3"?"text-md tracking-wide":""}`,placeholder:"Section Title",value:e==null?void 0:e.title,onChange:C=>b("title",C)})}),n.jsx("div",{children:n.jsx(x,{className:"p-2 w-20 bg-white",value:e==null?void 0:e.level,placeholder:"level",options:i.level.options,onChange:C=>b("level",C)})}),n.jsx("div",{children:n.jsx(y,{className:"p-2 flex-0",value:e==null?void 0:e.tags,placeholder:"Add Tag...",onChange:C=>b("tags",C)})})]}),n.jsxs("div",{className:"flex flex-wrap border-y justify-end items-center",children:[n.jsx("div",{className:"self-center pl-2",children:n.jsx(Hd,{size:e==null?void 0:e.size,onChange:C=>b("size",C)})}),n.jsx("div",{className:"flex-1"}),n.jsxs("div",{className:"flex flex-row flex-wrap",children:[n.jsx("div",{className:"py-2",children:n.jsxs(Oe,{className:"relative",children:[n.jsx(Oe.Button,{ref:d,className:"pl-3  text-md cursor-pointer hover:text-blue-800 text-blue-500",children:n.jsx("i",{className:"fa fa-circle-info text-2xl fa-fw",title:"Help"})}),n.jsx(je,{as:h.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:n.jsx(Oe.Panel,{ref:p,style:m.popper,...f.popper,className:"shadow-lg bg-white z-10 w-screen max-w-sm transform px-4 border border-blue-200 lg:max-w-3xl",children:n.jsx(S,{value:e==null?void 0:e.helpText,onChange:C=>b("helpText",C)})})})]})}),n.jsx("div",{className:"py-2",children:n.jsx("button",{className:"pl-6 py-0.5 text-md cursor-pointer hover:text-red-500 text-slate-400",onClick:l,children:n.jsx("i",{className:"fa-light fa-trash text-2xl fa-fw",title:"Delete"})})}),n.jsx("div",{className:"py-2",children:n.jsx("button",{className:"pl-6 py-0.5 text-md cursor-pointer hover:text-red-500 text-slate-400",onClick:a,children:n.jsx("i",{className:"fa-light fa-xmark text-2xl fa-fw",title:"Cancel"})})}),n.jsx("div",{className:"py-2",children:n.jsxs("button",{className:"pl-6 py-0.5 text-md cursor-pointer flex items-center hover:text-blue-500 text-slate-400",onClick:r,children:[n.jsx("i",{className:"fa-light fa-floppy-disk text-2xl fa-fw",title:"Save"}),"  "]})})]})]})]}),n.jsx("div",{children:n.jsx(v,{value:e==null?void 0:e.element,onChange:C=>b("element",C),size:o})})]})}function Wn({value:e,i:t,attributes:s,edit:i,onEdit:o,moveItem:a,addAbove:r}){var N,E,k,C,$,A,B,T;let[l,c]=h.useState(),[d,u]=h.useState(),{styles:p,attributes:m}=Tn(l,d);O.useContext(se);let f=(N=s==null?void 0:s.title)==null?void 0:N.ViewComp,b=(E=s==null?void 0:s.tags)==null?void 0:E.ViewComp,w=(k=s==null?void 0:s.element)==null?void 0:k.ViewComp,x=(C=s==null?void 0:s.helpText)==null?void 0:C.ViewComp,y=(e==null?void 0:e.title)||(e==null?void 0:e.tags),v=e==null?void 0:e.helpText,S=!1,_=($=e==null?void 0:e.element)==null?void 0:$["template-section-id"];const j=O.useMemo(()=>n.jsx(w,{value:e==null?void 0:e.element}),[e==null?void 0:e.element,e==null?void 0:e.id]);return n.jsxs("div",{className:"h-full ",children:[n.jsxs("div",{className:"flex w-full ",children:[n.jsx("div",{className:"flex-1"}),e!=null&&e.is_header&&i?n.jsx("div",{className:"z-10 relative",children:n.jsx("div",{className:"absolute mr-16 right-[-60px] flex",children:n.jsx("button",{className:" flex items-center text-md cursor-pointer hover:text-blue-500 text-slate-400",onClick:o,children:n.jsx("i",{className:"fa-light fa-pencil text-xl fa-fw",title:"Edit"})})})}):n.jsx("div",{className:"z-10 relative",children:n.jsx("div",{className:`absolute mr-16 ${i?"top-[-14px]":"}top-[-6px]"} right-[-60px] flex`,children:i&&typeof o=="function"&&!_?n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"flex items-center text-md cursor-pointer hover:text-blue-500 text-slate-400",onClick:()=>a(t,-1),children:n.jsx("i",{className:"fa-light fa-angle-up text-xl fa-fw",title:"Move Up"})}),n.jsx("button",{className:"flex items-center text-md cursor-pointer hover:text-blue-500 text-slate-400",onClick:()=>a(t,1),children:n.jsx("i",{className:"fa-light fa-angle-down text-xl fa-fw",title:"Move Down"})}),n.jsx("button",{className:" flex items-center text-md cursor-pointer hover:text-blue-500 text-slate-400",onClick:o,children:n.jsx("i",{className:"fa-light fa-pencil text-xl fa-fw",title:"Edit"})}),n.jsx("button",{className:"text-lg cursor-pointer hover:text-blue-500 text-slate-400 pr-1",onClick:r,children:n.jsx("i",{className:"fal fa-circle-plus text-lg fa-fw",title:"Add Section"})})]}):""})})]}),(y||v||S)&&n.jsxs("div",{className:`flex w-full h-[50px] items-center ${(e==null?void 0:e.level)==="1"?"border-b":""} `,children:[n.jsx("div",{id:`#${(A=e==null?void 0:e.title)==null?void 0:A.replace(/ /g,"_")}`,className:`flex-1 flex-row py-2  font-display font-medium uppercase scroll-mt-36 ${y?"":"invisible"}`,children:n.jsx(f,{className:`w-full ${(e==null?void 0:e.level)==="1"?"text-blue-500 font-bold text-xl tracking-wider py-1 pl-1":(e==null?void 0:e.level)==="2"?"text-lg tracking-wider":(e==null?void 0:e.level)==="3"?"text-md tracking-wide":""}`,value:e==null?void 0:e.title})}),n.jsx("div",{className:`${y?"p2":"invisible"}`,children:n.jsx(b,{className:"",value:e==null?void 0:e.tags})}),((T=(B=e==null?void 0:e.element)==null?void 0:B["element-type"])==null?void 0:T.includes("Map:"))&&n.jsx(De,{className:"hidden",to:`/interact/${e==null?void 0:e.id}`,title:"interact",children:n.jsx("i",{className:"fa-light fa-window-restore"})}),n.jsx("div",{className:`${v?"p-0.5":"hidden"}`,children:n.jsxs(Oe,{className:"relative",children:[n.jsx(Oe.Button,{ref:c,className:"pl-3  text-md cursor-pointer hover:text-blue-200 text-blue-500",children:n.jsx("i",{className:"fa fa-circle-info text-2xl fa-fw",title:"Help"})}),n.jsx(je,{as:h.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:n.jsx(Oe.Panel,{ref:u,style:p.popper,...m.popper,className:"shadow-lg bg-white z-10 w-screen max-w-sm transform px-4 border border-blue-200 lg:max-w-3xl",children:n.jsx(x,{value:e==null?void 0:e.helpText})})})]})}),y&&typeof o=="function"&&!_?n.jsx(n.Fragment,{}):_&&typeof o=="function"?n.jsx("i",{className:"pl-5 py-0.5 fa-light fa-lock p-2 text-slate-400",title:"Template generated section"}):n.jsx(n.Fragment,{})]}),n.jsx("div",{className:"h-full",children:j})]})}O.memo(Wn,(e,t)=>Be(e.value,t.value));const Ud=({onClick:e,showpageToggle:t})=>n.jsxs("div",{className:"flex w-full",children:[n.jsx("div",{className:"flex-1"}),n.jsx("div",{className:`z-10 relative ${t?"w-12":"w-8"}`,children:n.jsx("div",{className:"absolute mr-8 top-[-14px] flex",children:n.jsx("button",{className:"text-lg cursor-pointer hover:text-blue-500 text-slate-400",onClick:e,children:n.jsx("i",{className:"fal fa-circle-plus text-lg fa-fw",title:"Add Section"})})})})]}),Fi=()=>{const e=Me();return h.useLayoutEffect(()=>{const{hash:t}=e,s=i=>+i.slice(1);if(t){const i=document.getElementById(s(t));if(i){let o=i.getBoundingClientRect();setTimeout(function(){window.scrollTo(o.x,o.y-170)},100)}}},[e]),null},Vd=({Component:e,value:t,onChange:s,attr:i,full_width:o=!1})=>{(!t||!t.map)&&(t=[]);const a=[...t,""],[r,l]=O.useState({index:-1,value:"",type:"new"}),c=y=>l({...r,value:y}),d=y=>l({...r,index:y}),u=()=>{l({index:-1,value:"",type:"new"})},p=()=>{var S,_,j,N;let y=oe(t),v="";r.type==="update"?(y[r.index]=r.value,v=`edited section ${(S=r==null?void 0:r.value)!=null&&S.title?`${(_=r==null?void 0:r.value)==null?void 0:_.title} ${r.index+1}`:r.index+1}`):(y.splice(r.index,0,r.value),v=`added section ${(j=r==null?void 0:r.value)!=null&&j.title?`${(N=r==null?void 0:r.value)==null?void 0:N.title} ${r.index+1}`:r.index+1}`),u(),s(y,v)},m=()=>{var v,S;let y=oe(t);r.type==="update"&&y.splice(r.index,1),u(),s(y,`removed section ${(v=r==null?void 0:r.value)!=null&&v.title?`${(S=r==null?void 0:r.value)==null?void 0:S.title} ${r.index+1}`:r.index+1}`)},f=y=>{l({index:y,value:t[y],type:"update"})};function b(y,v){let S=oe(t),_=y+v;if(!(_<0||_>=S.length)){var j=S.splice(y,1)[0];S.splice(_,0,j),s(S)}}let w=8;const x={centered:"md:grid-cols-[1fr_repeat(6,_minmax(_100px,_170px))_1fr]",fullwidth:"md:grid-cols-[_minmax(_0px,0px)_repeat(6,_1fr)_minmax(_0px,0px)]"};return n.jsxs("div",{className:`w-full grid grid-cols-6 ${x[o==="show"?"fullwidth":"centered"]} gap-1`,children:[n.jsx(Fi,{}),a.map((y,v)=>{var E,k,C,$;const S=(r.index===v?(E=r==null?void 0:r.value)==null?void 0:E.size:y==null?void 0:y.size)||"1",_=(k=zn.find(A=>A.name===S))==null?void 0:k.value,j=6-w;w===0?w=_:_<=j?w+=_:w=_;const N=Pi(S,_,j,w);return n.jsxs("div",{id:`${y.id}`,className:`${y!=null&&y.size?"h-full":""} ${N} `,children:[r.index===v?n.jsx(Wd,{value:r.value,onChange:c,onSave:p,onCancel:u,onRemove:m,attributes:i.attributes,size:S,i:v}):"",y!==""&&!(r.index===v&&r.type==="update")&&(!(y!=null&&y.status)||(y==null?void 0:y.status)==="success")?n.jsx(Wn,{value:y,i:v,moveItem:b,attributes:i.attributes,edit:!0,onEdit:r.index===-1?A=>f(v):null,addAbove:()=>d(v)}):((C=y==null?void 0:y.status)==null?void 0:C.length)>1?n.jsx(zd,{data:y}):"",!(($=a[0])!=null&&$.is_header)&&r.index==-1&&v===a.length-1?n.jsx("div",{className:"",children:n.jsx(Ud,{onClick:()=>d(v)})}):n.jsx("div",{className:""})]},v)})]})},qd=({Component:e,value:t,attr:s,full_width:i})=>{if(!t||!t.map)return"";let o=8,a={centered:"md:grid-cols-[1fr_repeat(6,_minmax(_100px,_170px))_1fr]",fullwidth:"md:grid-cols-[_minmax(_0px,0px)_repeat(6,_1fr)_minmax(_0px,0px)]"};const r=l=>{var u;let c=(u=l==null?void 0:l.element)==null?void 0:u["element-data"],d=typeof c=="object"?c:c&&Bd(c)?JSON.parse(c):{};return!(d!=null&&d.hideSection)};return n.jsxs("div",{className:`w-full grid grid-cols-6 ${a[i==="show"?"fullwidth":"centered"]} gap-1`,children:[t.filter(l=>r(l)).map((l,c)=>{var f;const d=(l==null?void 0:l.size)||"1",u=(f=zn.find(b=>b.name===d))==null?void 0:f.value,p=6-o;o===0?o=u:u<=p?o+=u:o=u;const m=Pi(d,u,p,o);return n.jsx("div",{id:l.id,className:`${m}`,children:n.jsx(Wn,{attributes:s.attributes,i:c,value:l},c)},c)}),n.jsx(Fi,{})]})},Is={EditComp:Vd,ViewComp:qd},Yd={app:"dms-site",type:"cms-section",attributes:[{key:"title",type:"text",required:!1,default:"Untitled Section"},{key:"is_header",type:"boolean",hidden:"true",required:!1},{key:"helpText",type:"lexical"},{key:"level",type:"select",options:[{value:"0",label:"Hidden"},{value:"1",label:"H1"},{value:"2",label:"H2"},{value:"3",label:"H3"},{value:"4",label:"H4"}],required:!1,default:"1"},{key:"tags",type:"text",required:!1},{key:"requirements",type:"text",required:!1},{key:"size",type:"text"},{key:"element",type:"selector",required:!1}]},Gd={app:"dms-site",type:"page-edit",attributes:[{key:"action",type:"text"},{key:"user",type:"text"},{key:"time",type:"text"},{key:"parent_type",type:"text"}]},Jd={app:"dms-site",type:"docs-page",registerFormats:[Yd,Gd],defaultSearch:"data ->> 'index' = '0' and (data ->> 'parent' = '' or data ->> 'parent' is null) and (data ->> 'template_id' is null)",defaultSort:e=>e.sort((t,s)=>(s.parent===null)-(t.parent===null)||t.index-s.index||+t.parent-+s.parent),attributes:[{key:"title",type:"text",required:!0,default:"New Page"},{key:"template_id",type:"number"},{key:"data_controls",type:"text",hidden:!0},{key:"generated-pages",type:"text",isArray:!0},{key:"hide_in_nav",type:"text",default:!1},{key:"index",type:"number",default:"props:index",editable:!1,hidden:!0},{key:"parent",type:"text",default:"",editable:!1,hidden:!0},{key:"url_slug",type:"text",matchWildcard:!0,hidden:!0},{key:"sidebar",type:"text",hidden:!0},{key:"header",type:"text",hidden:!0},{key:"footer",type:"text",hidden:!0},{key:"full_width",type:"text",hidden:!0},{key:"sections",type:"dms-format",isArray:!0,format:"dms-site+cms-section",DisplayComp:Is},{key:"draft_sections",type:"dms-format",isArray:!0,format:"dms-site+cms-section",DisplayComp:Is},{key:"published",type:"text",default:"draft"},{key:"has_changes",type:"boolean",default:!1},{key:"history",type:"dms-format",isArray:!0,format:"dms-site+page-edit"}]},Kd=(e={})=>{let{color:t="white",size:s="compact",subMenuStyle:i="inline",responsive:o="top"}=e,a={top:"hidden md:block",side:"hidden md:block",none:""},r={white:{contentBg:"bg-white border-r",sideItemActive:"",contentBgAccent:"bg-neutral-100",accentColor:"blue-600",accentBg:"",borderColor:"border-slate-200",textColor:"text-slate-600",textColorAccent:"text-slate-800",highlightColor:"text-blue-800"},transparent:{contentBg:"",contentBgAccent:"bg-neutral-100",accentColor:"blue-600",accentBg:"hover:bg-blue-400",borderColor:"border-slate-100",textColor:"text-slate-600",textColorAccent:"text-slate-800",highlightColor:"text-slate-800"},dark:{contentBg:"bg-neutral-800",contentBgAccent:"bg-neutral-900",accentColor:"white",accentBg:"",borderColor:"border-neutral-700",textColor:"text-slate-300",textColorAccent:"text-slate-100",highlightColor:"text-slate-100",sideItem:"text-slate-300 hover:text-white",sideItemActive:"text-slate-300 hover:text-white"},bright:{contentBg:"bg-blue-700",accentColor:"blue-400",accentBg:"hover:bg-blue-400",borderColor:"border-blue-600",textColor:"text-white",highlightColor:"text-white-500"}},l={none:{wrapper:"w-0 overflow-hidden",sideItem:"flex mx-2 pr-4 py-2 text-base ",topItem:"flex items-center text-sm px-4 border-r h-12",icon:"mr-3 text-lg"},compact:{fixed:"ml-0 md:ml-44",wrapper:"w-44",itemWrapper:"pt-5",sideItem:"group flex px-3 py-1.5 text-[14px] font-light hover:bg-blue-50 text-slate-700 mx-2 ",sideItemActive:"group flex px-3 py-1.5 text-[14px] font-light hover:bg-blue-50 text-slate-700  mx-2 ",topItem:"flex items-center text-sm px-4 border-r h-12",icon:"group w-6 mr-2 text-blue-500 ",iconActive:"group w-6 mr-2 text-blue-500 ",sideItemContent:"group-hover:translate-x-1.5 transition-transform duration-300 ease-in-out"},full:{fixed:"",wrapper:"w-full",sideItem:"group flex px-3 py-2 text-[14px] font-light hover:bg-blue-50 text-slate-700 mx-2 border-r-4 border-white",sideItemActive:"group flex px-3 py-2 text-[14px] font-light hover:bg-blue-50 text-slate-700 mx-2 border-r-4  border-white",topItem:"flex pr-4 py-2  font-",icon:"group w-6 mr-2 text-blue-500  ",iconActive:"group w-6 mr-2 text-blue-500",sideItemContent:"group-hover:translate-x-1.5 transition-transform duration-300 ease-in-out"},mini:{fixed:"ml-0 md:ml-20",wrapper:"w-20 overflow-x-hidden",sideItem:"text-white hover:bg-blue-100 hover:text-blue-100",sideItemActive:"text-blue-500 bg-blue-500  ",topItem:"flex px-4 items-center text-sm font-light ",icon:"w-20 h-10 text-xl text-blue-500",iconActive:"w-20 h-10 text-xl text-white",sideItemContent:"w-0"},micro:{fixed:"ml-0 md:ml-14",wrapper:"w-14 overflow-x-hidden",itemWrapper:"p-1",sideItem:"flex text-base font-base ",topItem:"flex mx-6 pr-4 py-2 text-sm font-light",icon:"w-12 text-2xl hover:bg-neutral-900 px-1 py-3 my-2 rounded-lg mr-4 hover:text-blue-500",sideItemContent:"hidden"}};l[s]||(s="none");let c={inline:{indicatorIcon:"fa fa-angle-right pt-2.5",indicatorIconOpen:"fal fa-angle-down pt-2.5",subMenuWrapper:"pl-2 w-full",subMenuParentWrapper:"flex flex-col w-full"},flyout:{indicatorIcon:"fal fa-angle-down",indicatorIconOpen:"fa fa-angle-right",subMenuWrapper:`absolute ml-${l[s].width-8}`,subMenuParentWrapper:"flex flex-row",subMenuWrapperTop:"absolute top-full"}};return{fixed:`md:${l[s].fixed}`,logoWrapper:`${l[s].wrapper} ${r[t].contentBgAccent} ${r[t].textColorAccent}`,sidenavWrapper:`${a[o]} ${r[t].contentBg} ${l[s].wrapper} h-full z-20`,menuIconSide:`${l[s].icon} group-hover:${r[t].highlightColor}`,menuIconSideActive:`${l[s].iconActive} group-hover:${r[t].highlightColor}`,itemsWrapper:`${r[t].borderColor} ${l[s].itemWrapper}  `,navItemContent:`${l[s].sideItemContent}`,navitemSide:`
        group  flex flex-col

        ${l[s].sideItem} ${r[t].sideItem}
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition-all cursor-pointer
     `,navitemSideActive:`
        group  flex flex-col
         ${l[s].sideItemActive} ${r[t].sideItemActive} 
        
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition-all cursor-pointer

      `,...c[i],vars:{colors:r,sizes:l,mobile:a}}},Xd=({color:e="white",size:t="compact",menu:s="left",subMenuStyle:i="inline"})=>{let o={white:{contentBg:"bg-slate-100",accentColor:"blue-500",accentBg:"hover:bg-white",borderColor:"border-slate-100",textColor:"text-slate-700",highlightColor:"text-blue-500"},bright:{contentBg:"bg-blue-700",accentColor:"blue-400",accentBg:"hover:bg-blue-400",borderColor:"border-blue-600",textColor:"text-white",highlightColor:"text-white"}},a={compact:{menu:`hidden uppercase md:flex flex-1 ${s==="left"?"":"justify-end"} divide-x-2`,sideItem:"flex  mx-6 pr-4 py-2 text-sm font-light hover:pl-4",topItem:`flex font-medium tracking-widest items-center text-[14px] px-4 h-12 ${o[e].textColor} ${o[e].borderColor}
        ${o[e].accentBg} hover:${o[e].highlightColor}`,activeItem:`flex font-medium  tracking-widest bg-white items-center text-[14px] px-4 h-12 ${o[e].highlightColor} ${o[e].borderColor}
        ${o[e].accentBg} hover:${o[e].highlightColor}`,icon:"mr-3 text-lg",responsive:"md:hidden"},inline:{menu:"flex flex-1",sideItem:"flex mx-4 pr-4 py-4 text-base font-base border-b hover:pl-4",topItem:`flex px-4 py-2 mx-2 font-medium text-gray-400 border-b-2 ${o[e].textColor} ${o[e].borderColor}
      hover:border-gray-300 hover:text-gray-700 border-gray-100 `,activeItem:`flex px-4 py-2 mx-2 font-medium text-blue-600 border-b-2 ${o[e].textColor} ${o[e].borderColor} border-blue-600 `,icon:"mr-4 text-2xl",responsive:"hidden"}},r={inline:{subMenuWrapperChild:"",subMenuWrapper:"pl-2 w-full ",subMenuParentWrapper:"flex flex-col w-full  "},flyout:{indicatorIcon:"fal fa-angle-down pl-2 pt-1",indicatorIconOpen:"fal fa-angle-down pl-2",subMenuWrapper:`absolute ml-${a[t].width-8} `,subMenuParentWrapper:"flex flex-row  ",subMenuWrapperTop:"absolute top-full  "},row:{indicatorIcon:"fal fa-angle-down pl-2 pt-1",indicatorIconOpen:"fal fa-angle-down pl-2 pt-1",subMenuWrapper:`absolute bg-white ml-${a[t].width-8}`,subMenuParentWrapper:"flex flex-row  ",subMenuWrapperChild:"divide-x overflow-x-auto",subMenuWrapperTop:"absolute top-full left-0 border-y border-gray-200 w-full bg-white normal-case",subMenuWrapperInactiveFlyout:"absolute  mt-8 normal-case bg-white shadow-lg z-10 p-2",subMenuWrapperInactiveFlyoutBelow:" absolute ml-40 normal-case bg-white shadow-lg z-10 p-2",subMenuWrapperInactiveFlyoutDirection:"flex flex-col divide-y-2"}};return{topnavWrapper:`w-full ${o[e].contentBg} border-b border-gray-200`,topnavContent:"flex w-full h-full",topnavMenu:`${a[t].menu} h-full overflow-x-auto overflow-y-hidden scrollbar-sm`,menuIconTop:`text-${o[e].accentColor} ${a[t].icon} group-hover:${o[e].highlightColor}`,menuIconTopActive:`text-${o[e].accentColor} ${a[t].icon} group-hover:${o[e].highlightColor}`,menuOpenIcon:"fa-light fa-bars fa-fw",menuCloseIcon:'fa-light fa-xmark fa-fw"',navitemTop:`
        w-fit group font-display whitespace-nowrap
        ${a[t].topItem}
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition cursor-pointer
    `,topmenuRightNavContainer:"hidden md:block h-full",topnavMobileContainer:"bg-slate-50",navitemTopActive:` w-fit group font-display whitespace-nowrap
        ${a[t].activeItem}
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition cursor-pointer 
      `,mobileButton:`${a[t].responsive} ${o[e].contentBg} inline-flex items-center justify-center pt-[12px] px-2 hover:text-blue-400  text-gray-400 hover:bg-gray-100 `,...r[i],vars:{colors:o,sizes:a}}},As={page:{wrapper1:"w-full flex-1 flex flex-col bg-slate-100",wrapper2:"w-full h-full flex-1 flex flex-row px-1 md:px-6 py-6",wrapper3:"flex flex-1 w-full  flex-col border shadow bg-white relative text-md font-light leading-7 p-4 min-h-[calc(100vh_-_102px)]"},navPadding:{1:"pt-0 ",2:"md:pt-12 pt-0",3:"md:pt-24 pt-0"},sidenav:Kd,topnav:Xd},se=O.createContext(void 0),Zd=({app:e="dms-site",type:t="docs-page",useFalcor:s,sideNav:i=null,logo:o=null,rightMenu:a=n.jsx("div",{}),baseUrl:r="",checkAuth:l=()=>{},authLevel:c=-1,theme:d=As,pgEnv:u})=>{d={...As,...d};const p=oe(Jd);p.app=e,p.type=t;const m=n.jsx("div",{className:"flex flex-col md:flex-row",children:a});return{format:p,baseUrl:r,check:({user:f},b,w)=>{const x=v=>v.reduce((S,_)=>{let j=_.authLevel||-1;return _.children&&(j=Math.max(j,x(_.children))),Math.max(S,j)},-1);let y=x(b);console.log("checking",f,b),l({user:f,authLevel:y},w)},children:[{type:f=>n.jsx(js,{...f,baseUrl:r,theme:d,useFalcor:s,pgEnv:u}),authLevel:c,action:"list",path:"/*",filter:{options:JSON.stringify({filter:{"data->>'hide_in_nav'":["null"]}}),attributes:["title","index","url_slug","parent","published","hide_in_nav"]},children:[{type:f=>n.jsx(Dc,{logo:o,rightMenu:m,...f}),action:"list",path:"templates/*",lazyLoad:!0,filter:{options:JSON.stringify({filter:{"data->>'template_id'":["-99"]}}),attributes:["title","index","url_slug","parent","hide_in_nav","template_id"]}},{type:f=>n.jsx(Pd,{logo:o,rightMenu:m,...f}),action:"edit",path:"templates/edit/:id"},{type:f=>n.jsx(zc,{logo:o,rightMenu:m,...f}),action:"edit",path:"templates/pages/:id"},{type:f=>n.jsx(kc,{...f,logo:o,rightMenu:m}),filter:{attributes:["title","index","url_slug","parent","published","hide_in_nav","sections","sidebar","header","footer","full_width"]},path:"/*",action:"view"}]},{type:f=>n.jsx(js,{...f,edit:!0,baseUrl:r,theme:d,useFalcor:s,pgEnv:u}),action:"list",path:"/edit/*",authLevel:5,filter:{options:JSON.stringify({filter:{"data->>'hide_in_nav'":["null"]}}),attributes:["title","index","url_slug","parent","published","hide_in_nav"]},children:[{type:f=>n.jsx(Od,{...f,logo:o,rightMenu:m}),action:"edit",path:"/edit/*"}]}]}},Qd={children:[{type:"ams-login",path:"login",props:{title:"MitigateNY"}},{ype:"ams-reset-password",path:"reset-password",props:{title:"MitigateNY"}},{type:"ams-logout",path:"logout",props:{redirectTo:"/"}},{type:"ams-signup",path:"register",props:{title:"MitigateNY",addToGroup:"NPMRDS_PM3 New Users"}},{type:"ams-profile",path:"profile"},{type:"ams-verify-request",path:"verify-request"},{type:"ams-set-password",path:"set-password"},{type:"ams-accept-invite",path:"accept-invite"},{type:"ams-project-management",path:"project-management",props:{authLevel:5}}]},Bi=Ls.amsFactory(Qd,"/auth");Hl("selector",id);const eu="https://graph.availabs.org",tu={...fc(Zd({app:"rgi",type:"foundation-aid",logo:n.jsx("div",{className:"flex items-center px-8 h-full text-lg font-bold",children:"FoundationAid"}),rightMenu:n.jsx(De,{className:"flex items-center px-8 text-lg font-bold h-12",to:"/",children:" "}),baseUrl:"",API_HOST:eu}))},nu=[tu],su=e=>e.split(".").length>2||e.split(".").length>1?window.location.host.split(".")[0].toLowerCase():!1,Rt={docs:nu};Bi.forEach(e=>{e.Component=e.element,delete e.element});function iu(){const e=su(window.location.host),t=O.useMemo(()=>(Rt==null?void 0:Rt[e])||Rt.docs,[e]);return n.jsx(xo,{router:bo([...t,...Bi])})}const ou=Ls.authProvider(iu,{AUTH_HOST:vo,PROJECT_NAME:wo,CLIENT_HOST:No});yo.createRoot(document.getElementById("root")).render(n.jsx(O.StrictMode,{children:n.jsx(ou,{})}));export{zs as $,at as B,ta as C,Jt as D,ka as F,ys as I,cs as L,gl as P,Hr as S,lt as T,ls as a,un as b,lu as c,du as d,Kr as e,cu as f,Qr as g,yt as h,si as i,Ct as u};
